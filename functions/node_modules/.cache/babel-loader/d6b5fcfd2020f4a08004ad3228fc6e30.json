{"ast":null,"code":"import _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/esm/taggedTemplateLiteralLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"none\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useRef, useState, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport clone from 'lodash/clone';\nimport isUndefined from 'lodash/isUndefined';\nimport isFunction from 'lodash/isFunction';\nimport remove from 'lodash/remove';\nimport omit from 'lodash/omit';\nimport pick from 'lodash/pick';\nimport isNil from 'lodash/isNil';\nimport { filterNodesOfTree } from '../utils/treeUtils';\nimport { createChainedFunction, getDataGroupBy, useClassNames, shallowEqual, useCustom, useControlled, mergeRefs } from '../utils';\nimport { DropdownMenu, DropdownMenuCheckItem as DropdownMenuItem, PickerToggle, PickerOverlay, SearchBar, SelectedElement, PickerToggleTrigger, useFocusItemValue, usePickerClassName, useSearch, usePublicMethods, useToggleKeyDownEvent, pickTriggerPropKeys, omitTriggerPropKeys, listPickerPropTypes } from '../Picker';\nvar defaultProps = {\n  as: 'div',\n  appearance: 'default',\n  classPrefix: 'picker',\n  countable: true,\n  searchable: true,\n  cleanable: true,\n  data: [],\n  disabledItemValues: [],\n  valueKey: 'value',\n  labelKey: 'label',\n  placement: 'bottomStart',\n  menuAutoWidth: true,\n  menuMaxHeight: 320\n};\nvar CheckPicker = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var Component = props.as,\n      classPrefix = props.classPrefix,\n      countable = props.countable,\n      data = props.data,\n      disabledItemValues = props.disabledItemValues,\n      valueKey = props.valueKey,\n      labelKey = props.labelKey,\n      searchable = props.searchable,\n      virtualized = props.virtualized,\n      cleanable = props.cleanable,\n      placement = props.placement,\n      menuAutoWidth = props.menuAutoWidth,\n      menuMaxHeight = props.menuMaxHeight,\n      menuClassName = props.menuClassName,\n      menuStyle = props.menuStyle,\n      overrideLocale = props.locale,\n      placeholder = props.placeholder,\n      disabled = props.disabled,\n      toggleAs = props.toggleAs,\n      style = props.style,\n      sticky = props.sticky,\n      valueProp = props.value,\n      defaultValue = props.defaultValue,\n      groupBy = props.groupBy,\n      listProps = props.listProps,\n      id = props.id,\n      sort = props.sort,\n      searchBy = props.searchBy,\n      renderMenuItem = props.renderMenuItem,\n      renderMenuGroup = props.renderMenuGroup,\n      renderValue = props.renderValue,\n      renderExtraFooter = props.renderExtraFooter,\n      renderMenu = props.renderMenu,\n      onGroupTitleClick = props.onGroupTitleClick,\n      onSearch = props.onSearch,\n      onEnter = props.onEnter,\n      onEntered = props.onEntered,\n      onExited = props.onExited,\n      onClean = props.onClean,\n      onChange = props.onChange,\n      onSelect = props.onSelect,\n      onClose = props.onClose,\n      onOpen = props.onOpen,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"classPrefix\", \"countable\", \"data\", \"disabledItemValues\", \"valueKey\", \"labelKey\", \"searchable\", \"virtualized\", \"cleanable\", \"placement\", \"menuAutoWidth\", \"menuMaxHeight\", \"menuClassName\", \"menuStyle\", \"locale\", \"placeholder\", \"disabled\", \"toggleAs\", \"style\", \"sticky\", \"value\", \"defaultValue\", \"groupBy\", \"listProps\", \"id\", \"sort\", \"searchBy\", \"renderMenuItem\", \"renderMenuGroup\", \"renderValue\", \"renderExtraFooter\", \"renderMenu\", \"onGroupTitleClick\", \"onSearch\", \"onEnter\", \"onEntered\", \"onExited\", \"onClean\", \"onChange\", \"onSelect\", \"onClose\", \"onOpen\"]);\n\n  var triggerRef = useRef();\n  var targetRef = useRef();\n  var overlayRef = useRef();\n\n  var _useCustom = useCustom('Picker', overrideLocale),\n      locale = _useCustom.locale;\n\n  var _useControlled = useControlled(valueProp, defaultValue || []),\n      value = _useControlled[0],\n      setValue = _useControlled[1]; // Used to hover the focuse item  when trigger `onKeydown`\n\n\n  var _useFocusItemValue = useFocusItemValue(value === null || value === void 0 ? void 0 : value[0], {\n    data: data,\n    valueKey: valueKey,\n    target: function target() {\n      return overlayRef.current;\n    }\n  }),\n      focusItemValue = _useFocusItemValue.focusItemValue,\n      setFocusItemValue = _useFocusItemValue.setFocusItemValue,\n      onFocusItem = _useFocusItemValue.onKeyDown;\n\n  var handleSearchCallback = useCallback(function (searchKeyword, filteredData, event) {\n    var _filteredData$; // The first option after filtering is the focus.\n\n\n    setFocusItemValue(filteredData === null || filteredData === void 0 ? void 0 : (_filteredData$ = filteredData[0]) === null || _filteredData$ === void 0 ? void 0 : _filteredData$[valueKey]);\n    onSearch === null || onSearch === void 0 ? void 0 : onSearch(searchKeyword, event);\n  }, [setFocusItemValue, onSearch, valueKey]); // Use search keywords to filter options.\n\n  var _useSearch = useSearch({\n    labelKey: labelKey,\n    data: data,\n    searchBy: searchBy,\n    callback: handleSearchCallback\n  }),\n      searchKeyword = _useSearch.searchKeyword,\n      filteredData = _useSearch.filteredData,\n      setSearchKeyword = _useSearch.setSearchKeyword,\n      handleSearch = _useSearch.handleSearch,\n      checkShouldDisplay = _useSearch.checkShouldDisplay; // Use component active state to support keyboard events.\n\n\n  var _useState = useState(false),\n      active = _useState[0],\n      setActive = _useState[1]; // A list of shortcut options.\n  // when opened again, the selected options are displayed at the top.\n\n\n  var _useState2 = useState([]),\n      stickyItems = _useState2[0],\n      setStickyItems = _useState2[1];\n\n  var initStickyItems = function initStickyItems() {\n    if (!sticky) {\n      return;\n    }\n\n    var nextStickyItems = [];\n\n    if (data && value.length) {\n      nextStickyItems = data.filter(function (item) {\n        return value.some(function (v) {\n          return v === item[valueKey];\n        });\n      });\n    }\n\n    setStickyItems(nextStickyItems);\n  };\n\n  var handleChangeValue = useCallback(function (value, event) {\n    onChange === null || onChange === void 0 ? void 0 : onChange(value, event);\n  }, [onChange]);\n  var handleClean = useCallback(function (event) {\n    if (disabled || !cleanable) {\n      return;\n    }\n\n    setValue([]);\n    handleChangeValue([], event);\n  }, [disabled, cleanable, setValue, handleChangeValue]);\n\n  var handleMenuPressEnter = function handleMenuPressEnter(event) {\n    var nextValue = clone(value);\n\n    if (!focusItemValue) {\n      return;\n    }\n\n    if (!nextValue.some(function (v) {\n      return shallowEqual(v, focusItemValue);\n    })) {\n      nextValue.push(focusItemValue);\n    } else {\n      remove(nextValue, function (itemVal) {\n        return shallowEqual(itemVal, focusItemValue);\n      });\n    }\n\n    var focusItem = data.find(function (item) {\n      return shallowEqual(item === null || item === void 0 ? void 0 : item[valueKey], focusItemValue);\n    });\n    setValue(nextValue);\n    handleSelect(nextValue, focusItem, event);\n    handleChangeValue(nextValue, event);\n  };\n\n  var onPickerKeyDown = useToggleKeyDownEvent(_extends({\n    toggle: !focusItemValue || !active,\n    triggerRef: triggerRef,\n    targetRef: targetRef,\n    overlayRef: overlayRef,\n    active: active,\n    onExit: handleClean,\n    onMenuKeyDown: onFocusItem,\n    onMenuPressEnter: handleMenuPressEnter,\n    onClose: function onClose() {\n      setFocusItemValue(null);\n    }\n  }, rest));\n  var handleSelect = useCallback(function (nextItemValue, item, event) {\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(nextItemValue, item, event);\n  }, [onSelect]);\n  var handleItemSelect = useCallback(function (nextItemValue, item, event, checked) {\n    var nextValue = clone(value);\n\n    if (checked) {\n      nextValue.push(nextItemValue);\n    } else {\n      remove(nextValue, function (itemVal) {\n        return shallowEqual(itemVal, nextItemValue);\n      });\n    }\n\n    setValue(nextValue);\n    setFocusItemValue(nextItemValue);\n    handleSelect(nextValue, item, event);\n    handleChangeValue(nextValue, event);\n  }, [value, setValue, handleSelect, handleChangeValue, setFocusItemValue]);\n  var handleEntered = useCallback(function () {\n    setActive(true);\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n  }, [onOpen]);\n  var handleExited = useCallback(function () {\n    setSearchKeyword('');\n    setFocusItemValue(null);\n    setActive(false);\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n  }, [onClose, setFocusItemValue, setSearchKeyword]);\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef,\n    targetRef: targetRef\n  });\n  var selectedItems = data.filter(function (item) {\n    return value === null || value === void 0 ? void 0 : value.some(function (val) {\n      return shallowEqual(item[valueKey], val);\n    });\n  }) || [];\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   */\n\n  var hasValue = selectedItems.length > 0 || (value === null || value === void 0 ? void 0 : value.length) > 0 && isFunction(renderValue);\n\n  var _useClassNames = useClassNames(classPrefix),\n      prefix = _useClassNames.prefix,\n      merge = _useClassNames.merge;\n\n  var selectedElement = placeholder;\n\n  if (selectedItems.length > 0) {\n    selectedElement = /*#__PURE__*/React.createElement(SelectedElement, {\n      selectedItems: selectedItems,\n      countable: countable,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      prefix: prefix\n    });\n  }\n\n  if ((value === null || value === void 0 ? void 0 : value.length) > 0 && isFunction(renderValue)) {\n    selectedElement = renderValue(value, selectedItems, selectedElement); // If renderValue returns null or undefined, hasValue is false.\n\n    if (isNil(selectedElement)) {\n      hasValue = false;\n    }\n  }\n\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var left = positionProps.left,\n        top = positionProps.top,\n        className = positionProps.className;\n    var classes = merge(className, menuClassName, prefix('check-menu'));\n\n    var styles = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n\n    var items = filteredData;\n    var filteredStickyItems = [];\n\n    if (stickyItems) {\n      filteredStickyItems = filterNodesOfTree(stickyItems, function (item) {\n        return checkShouldDisplay(item);\n      });\n      items = filterNodesOfTree(data, function (item) {\n        return checkShouldDisplay(item) && !stickyItems.some(function (v) {\n          return v[valueKey] === item[valueKey];\n        });\n      });\n    } // Create a tree structure data when set `groupBy`\n\n\n    if (groupBy) {\n      items = getDataGroupBy(items, groupBy, sort);\n    } else if (typeof sort === 'function') {\n      items = items.sort(sort(false));\n    }\n\n    var menu = items.length || filteredStickyItems.length ? /*#__PURE__*/React.createElement(DropdownMenu, {\n      id: id ? id + \"-listbox\" : undefined,\n      listProps: listProps,\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      renderMenuGroup: renderMenuGroup,\n      renderMenuItem: renderMenuItem,\n      maxHeight: menuMaxHeight,\n      classPrefix: 'picker-check-menu',\n      dropdownMenuItemAs: DropdownMenuItem,\n      activeItemValues: value,\n      focusItemValue: focusItemValue,\n      data: [].concat(filteredStickyItems, items),\n      group: !isUndefined(groupBy),\n      onSelect: handleItemSelect,\n      onGroupTitleClick: onGroupTitleClick,\n      virtualized: virtualized\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix(_templateObject())\n    }, locale === null || locale === void 0 ? void 0 : locale.noResultsText);\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      ref: mergeRefs(overlayRef, speakerRef),\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: styles,\n      onKeyDown: onPickerKeyDown,\n      target: triggerRef\n    }, searchable && /*#__PURE__*/React.createElement(SearchBar, {\n      placeholder: locale === null || locale === void 0 ? void 0 : locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeyword\n    }), renderMenu ? renderMenu(menu) : menu, renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n    hasValue: hasValue,\n    name: 'check'\n  })),\n      classes = _usePickerClassName[0],\n      usedClassNamePropKeys = _usePickerClassName[1];\n\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    pickerProps: pick(props, pickTriggerPropKeys),\n    ref: triggerRef,\n    placement: placement,\n    onEnter: createChainedFunction(initStickyItems, onEnter),\n    onEntered: createChainedFunction(handleEntered, onEntered),\n    onExited: createChainedFunction(handleExited, onExited),\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys)), {\n    id: id,\n    ref: targetRef,\n    disabled: disabled,\n    onClean: createChainedFunction(handleClean, onClean),\n    onKeyDown: onPickerKeyDown,\n    as: toggleAs,\n    cleanable: cleanable && !disabled,\n    hasValue: hasValue,\n    active: active,\n    placement: placement,\n    inputValue: value\n  }), selectedElement || (locale === null || locale === void 0 ? void 0 : locale.placeholder))));\n});\nCheckPicker.displayName = 'CheckPicker';\nCheckPicker.defaultProps = defaultProps;\nCheckPicker.propTypes = _extends({}, listPickerPropTypes, {\n  locale: PropTypes.any,\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  menuAutoWidth: PropTypes.bool,\n  menuMaxHeight: PropTypes.number,\n  renderMenu: PropTypes.func,\n  renderMenuItem: PropTypes.func,\n  renderMenuGroup: PropTypes.func,\n  onSelect: PropTypes.func,\n  onGroupTitleClick: PropTypes.func,\n  onSearch: PropTypes.func,\n  groupBy: PropTypes.any,\n  sort: PropTypes.func,\n  searchable: PropTypes.bool,\n  countable: PropTypes.bool,\n  sticky: PropTypes.bool,\n  virtualized: PropTypes.bool,\n  searchBy: PropTypes.func\n});\nexport default CheckPicker;","map":{"version":3,"sources":["C:/Programowanie/store/node_modules/rsuite/es/CheckPicker/CheckPicker.js"],"names":["_taggedTemplateLiteralLoose","_extends","_objectWithoutPropertiesLoose","_templateObject","data","React","useRef","useState","useCallback","PropTypes","clone","isUndefined","isFunction","remove","omit","pick","isNil","filterNodesOfTree","createChainedFunction","getDataGroupBy","useClassNames","shallowEqual","useCustom","useControlled","mergeRefs","DropdownMenu","DropdownMenuCheckItem","DropdownMenuItem","PickerToggle","PickerOverlay","SearchBar","SelectedElement","PickerToggleTrigger","useFocusItemValue","usePickerClassName","useSearch","usePublicMethods","useToggleKeyDownEvent","pickTriggerPropKeys","omitTriggerPropKeys","listPickerPropTypes","defaultProps","as","appearance","classPrefix","countable","searchable","cleanable","disabledItemValues","valueKey","labelKey","placement","menuAutoWidth","menuMaxHeight","CheckPicker","forwardRef","props","ref","Component","virtualized","menuClassName","menuStyle","overrideLocale","locale","placeholder","disabled","toggleAs","style","sticky","valueProp","value","defaultValue","groupBy","listProps","id","sort","searchBy","renderMenuItem","renderMenuGroup","renderValue","renderExtraFooter","renderMenu","onGroupTitleClick","onSearch","onEnter","onEntered","onExited","onClean","onChange","onSelect","onClose","onOpen","rest","triggerRef","targetRef","overlayRef","_useCustom","_useControlled","setValue","_useFocusItemValue","target","current","focusItemValue","setFocusItemValue","onFocusItem","onKeyDown","handleSearchCallback","searchKeyword","filteredData","event","_filteredData$","_useSearch","callback","setSearchKeyword","handleSearch","checkShouldDisplay","_useState","active","setActive","_useState2","stickyItems","setStickyItems","initStickyItems","nextStickyItems","length","filter","item","some","v","handleChangeValue","handleClean","handleMenuPressEnter","nextValue","push","itemVal","focusItem","find","handleSelect","onPickerKeyDown","toggle","onExit","onMenuKeyDown","onMenuPressEnter","nextItemValue","handleItemSelect","checked","handleEntered","handleExited","selectedItems","val","hasValue","_useClassNames","prefix","merge","selectedElement","createElement","renderDropdownMenu","positionProps","speakerRef","left","top","className","classes","styles","items","filteredStickyItems","menu","undefined","maxHeight","dropdownMenuItemAs","activeItemValues","concat","group","noResultsText","autoWidth","searchPlaceholder","_usePickerClassName","name","usedClassNamePropKeys","pickerProps","speaker","inputValue","displayName","propTypes","any","oneOf","bool","number","func"],"mappings":"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","sourcesContent":["import _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/esm/taggedTemplateLiteralLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"none\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useRef, useState, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport clone from 'lodash/clone';\nimport isUndefined from 'lodash/isUndefined';\nimport isFunction from 'lodash/isFunction';\nimport remove from 'lodash/remove';\nimport omit from 'lodash/omit';\nimport pick from 'lodash/pick';\nimport isNil from 'lodash/isNil';\nimport { filterNodesOfTree } from '../utils/treeUtils';\nimport { createChainedFunction, getDataGroupBy, useClassNames, shallowEqual, useCustom, useControlled, mergeRefs } from '../utils';\nimport { DropdownMenu, DropdownMenuCheckItem as DropdownMenuItem, PickerToggle, PickerOverlay, SearchBar, SelectedElement, PickerToggleTrigger, useFocusItemValue, usePickerClassName, useSearch, usePublicMethods, useToggleKeyDownEvent, pickTriggerPropKeys, omitTriggerPropKeys, listPickerPropTypes } from '../Picker';\nvar defaultProps = {\n  as: 'div',\n  appearance: 'default',\n  classPrefix: 'picker',\n  countable: true,\n  searchable: true,\n  cleanable: true,\n  data: [],\n  disabledItemValues: [],\n  valueKey: 'value',\n  labelKey: 'label',\n  placement: 'bottomStart',\n  menuAutoWidth: true,\n  menuMaxHeight: 320\n};\nvar CheckPicker = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var Component = props.as,\n      classPrefix = props.classPrefix,\n      countable = props.countable,\n      data = props.data,\n      disabledItemValues = props.disabledItemValues,\n      valueKey = props.valueKey,\n      labelKey = props.labelKey,\n      searchable = props.searchable,\n      virtualized = props.virtualized,\n      cleanable = props.cleanable,\n      placement = props.placement,\n      menuAutoWidth = props.menuAutoWidth,\n      menuMaxHeight = props.menuMaxHeight,\n      menuClassName = props.menuClassName,\n      menuStyle = props.menuStyle,\n      overrideLocale = props.locale,\n      placeholder = props.placeholder,\n      disabled = props.disabled,\n      toggleAs = props.toggleAs,\n      style = props.style,\n      sticky = props.sticky,\n      valueProp = props.value,\n      defaultValue = props.defaultValue,\n      groupBy = props.groupBy,\n      listProps = props.listProps,\n      id = props.id,\n      sort = props.sort,\n      searchBy = props.searchBy,\n      renderMenuItem = props.renderMenuItem,\n      renderMenuGroup = props.renderMenuGroup,\n      renderValue = props.renderValue,\n      renderExtraFooter = props.renderExtraFooter,\n      renderMenu = props.renderMenu,\n      onGroupTitleClick = props.onGroupTitleClick,\n      onSearch = props.onSearch,\n      onEnter = props.onEnter,\n      onEntered = props.onEntered,\n      onExited = props.onExited,\n      onClean = props.onClean,\n      onChange = props.onChange,\n      onSelect = props.onSelect,\n      onClose = props.onClose,\n      onOpen = props.onOpen,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"classPrefix\", \"countable\", \"data\", \"disabledItemValues\", \"valueKey\", \"labelKey\", \"searchable\", \"virtualized\", \"cleanable\", \"placement\", \"menuAutoWidth\", \"menuMaxHeight\", \"menuClassName\", \"menuStyle\", \"locale\", \"placeholder\", \"disabled\", \"toggleAs\", \"style\", \"sticky\", \"value\", \"defaultValue\", \"groupBy\", \"listProps\", \"id\", \"sort\", \"searchBy\", \"renderMenuItem\", \"renderMenuGroup\", \"renderValue\", \"renderExtraFooter\", \"renderMenu\", \"onGroupTitleClick\", \"onSearch\", \"onEnter\", \"onEntered\", \"onExited\", \"onClean\", \"onChange\", \"onSelect\", \"onClose\", \"onOpen\"]);\n\n  var triggerRef = useRef();\n  var targetRef = useRef();\n  var overlayRef = useRef();\n\n  var _useCustom = useCustom('Picker', overrideLocale),\n      locale = _useCustom.locale;\n\n  var _useControlled = useControlled(valueProp, defaultValue || []),\n      value = _useControlled[0],\n      setValue = _useControlled[1]; // Used to hover the focuse item  when trigger `onKeydown`\n\n\n  var _useFocusItemValue = useFocusItemValue(value === null || value === void 0 ? void 0 : value[0], {\n    data: data,\n    valueKey: valueKey,\n    target: function target() {\n      return overlayRef.current;\n    }\n  }),\n      focusItemValue = _useFocusItemValue.focusItemValue,\n      setFocusItemValue = _useFocusItemValue.setFocusItemValue,\n      onFocusItem = _useFocusItemValue.onKeyDown;\n\n  var handleSearchCallback = useCallback(function (searchKeyword, filteredData, event) {\n    var _filteredData$;\n\n    // The first option after filtering is the focus.\n    setFocusItemValue(filteredData === null || filteredData === void 0 ? void 0 : (_filteredData$ = filteredData[0]) === null || _filteredData$ === void 0 ? void 0 : _filteredData$[valueKey]);\n    onSearch === null || onSearch === void 0 ? void 0 : onSearch(searchKeyword, event);\n  }, [setFocusItemValue, onSearch, valueKey]); // Use search keywords to filter options.\n\n  var _useSearch = useSearch({\n    labelKey: labelKey,\n    data: data,\n    searchBy: searchBy,\n    callback: handleSearchCallback\n  }),\n      searchKeyword = _useSearch.searchKeyword,\n      filteredData = _useSearch.filteredData,\n      setSearchKeyword = _useSearch.setSearchKeyword,\n      handleSearch = _useSearch.handleSearch,\n      checkShouldDisplay = _useSearch.checkShouldDisplay; // Use component active state to support keyboard events.\n\n\n  var _useState = useState(false),\n      active = _useState[0],\n      setActive = _useState[1]; // A list of shortcut options.\n  // when opened again, the selected options are displayed at the top.\n\n\n  var _useState2 = useState([]),\n      stickyItems = _useState2[0],\n      setStickyItems = _useState2[1];\n\n  var initStickyItems = function initStickyItems() {\n    if (!sticky) {\n      return;\n    }\n\n    var nextStickyItems = [];\n\n    if (data && value.length) {\n      nextStickyItems = data.filter(function (item) {\n        return value.some(function (v) {\n          return v === item[valueKey];\n        });\n      });\n    }\n\n    setStickyItems(nextStickyItems);\n  };\n\n  var handleChangeValue = useCallback(function (value, event) {\n    onChange === null || onChange === void 0 ? void 0 : onChange(value, event);\n  }, [onChange]);\n  var handleClean = useCallback(function (event) {\n    if (disabled || !cleanable) {\n      return;\n    }\n\n    setValue([]);\n    handleChangeValue([], event);\n  }, [disabled, cleanable, setValue, handleChangeValue]);\n\n  var handleMenuPressEnter = function handleMenuPressEnter(event) {\n    var nextValue = clone(value);\n\n    if (!focusItemValue) {\n      return;\n    }\n\n    if (!nextValue.some(function (v) {\n      return shallowEqual(v, focusItemValue);\n    })) {\n      nextValue.push(focusItemValue);\n    } else {\n      remove(nextValue, function (itemVal) {\n        return shallowEqual(itemVal, focusItemValue);\n      });\n    }\n\n    var focusItem = data.find(function (item) {\n      return shallowEqual(item === null || item === void 0 ? void 0 : item[valueKey], focusItemValue);\n    });\n    setValue(nextValue);\n    handleSelect(nextValue, focusItem, event);\n    handleChangeValue(nextValue, event);\n  };\n\n  var onPickerKeyDown = useToggleKeyDownEvent(_extends({\n    toggle: !focusItemValue || !active,\n    triggerRef: triggerRef,\n    targetRef: targetRef,\n    overlayRef: overlayRef,\n    active: active,\n    onExit: handleClean,\n    onMenuKeyDown: onFocusItem,\n    onMenuPressEnter: handleMenuPressEnter,\n    onClose: function onClose() {\n      setFocusItemValue(null);\n    }\n  }, rest));\n  var handleSelect = useCallback(function (nextItemValue, item, event) {\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(nextItemValue, item, event);\n  }, [onSelect]);\n  var handleItemSelect = useCallback(function (nextItemValue, item, event, checked) {\n    var nextValue = clone(value);\n\n    if (checked) {\n      nextValue.push(nextItemValue);\n    } else {\n      remove(nextValue, function (itemVal) {\n        return shallowEqual(itemVal, nextItemValue);\n      });\n    }\n\n    setValue(nextValue);\n    setFocusItemValue(nextItemValue);\n    handleSelect(nextValue, item, event);\n    handleChangeValue(nextValue, event);\n  }, [value, setValue, handleSelect, handleChangeValue, setFocusItemValue]);\n  var handleEntered = useCallback(function () {\n    setActive(true);\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n  }, [onOpen]);\n  var handleExited = useCallback(function () {\n    setSearchKeyword('');\n    setFocusItemValue(null);\n    setActive(false);\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n  }, [onClose, setFocusItemValue, setSearchKeyword]);\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef,\n    targetRef: targetRef\n  });\n  var selectedItems = data.filter(function (item) {\n    return value === null || value === void 0 ? void 0 : value.some(function (val) {\n      return shallowEqual(item[valueKey], val);\n    });\n  }) || [];\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   */\n\n  var hasValue = selectedItems.length > 0 || (value === null || value === void 0 ? void 0 : value.length) > 0 && isFunction(renderValue);\n\n  var _useClassNames = useClassNames(classPrefix),\n      prefix = _useClassNames.prefix,\n      merge = _useClassNames.merge;\n\n  var selectedElement = placeholder;\n\n  if (selectedItems.length > 0) {\n    selectedElement = /*#__PURE__*/React.createElement(SelectedElement, {\n      selectedItems: selectedItems,\n      countable: countable,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      prefix: prefix\n    });\n  }\n\n  if ((value === null || value === void 0 ? void 0 : value.length) > 0 && isFunction(renderValue)) {\n    selectedElement = renderValue(value, selectedItems, selectedElement); // If renderValue returns null or undefined, hasValue is false.\n\n    if (isNil(selectedElement)) {\n      hasValue = false;\n    }\n  }\n\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var left = positionProps.left,\n        top = positionProps.top,\n        className = positionProps.className;\n    var classes = merge(className, menuClassName, prefix('check-menu'));\n\n    var styles = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n\n    var items = filteredData;\n    var filteredStickyItems = [];\n\n    if (stickyItems) {\n      filteredStickyItems = filterNodesOfTree(stickyItems, function (item) {\n        return checkShouldDisplay(item);\n      });\n      items = filterNodesOfTree(data, function (item) {\n        return checkShouldDisplay(item) && !stickyItems.some(function (v) {\n          return v[valueKey] === item[valueKey];\n        });\n      });\n    } // Create a tree structure data when set `groupBy`\n\n\n    if (groupBy) {\n      items = getDataGroupBy(items, groupBy, sort);\n    } else if (typeof sort === 'function') {\n      items = items.sort(sort(false));\n    }\n\n    var menu = items.length || filteredStickyItems.length ? /*#__PURE__*/React.createElement(DropdownMenu, {\n      id: id ? id + \"-listbox\" : undefined,\n      listProps: listProps,\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      renderMenuGroup: renderMenuGroup,\n      renderMenuItem: renderMenuItem,\n      maxHeight: menuMaxHeight,\n      classPrefix: 'picker-check-menu',\n      dropdownMenuItemAs: DropdownMenuItem,\n      activeItemValues: value,\n      focusItemValue: focusItemValue,\n      data: [].concat(filteredStickyItems, items),\n      group: !isUndefined(groupBy),\n      onSelect: handleItemSelect,\n      onGroupTitleClick: onGroupTitleClick,\n      virtualized: virtualized\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix(_templateObject())\n    }, locale === null || locale === void 0 ? void 0 : locale.noResultsText);\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      ref: mergeRefs(overlayRef, speakerRef),\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: styles,\n      onKeyDown: onPickerKeyDown,\n      target: triggerRef\n    }, searchable && /*#__PURE__*/React.createElement(SearchBar, {\n      placeholder: locale === null || locale === void 0 ? void 0 : locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeyword\n    }), renderMenu ? renderMenu(menu) : menu, renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n    hasValue: hasValue,\n    name: 'check'\n  })),\n      classes = _usePickerClassName[0],\n      usedClassNamePropKeys = _usePickerClassName[1];\n\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    pickerProps: pick(props, pickTriggerPropKeys),\n    ref: triggerRef,\n    placement: placement,\n    onEnter: createChainedFunction(initStickyItems, onEnter),\n    onEntered: createChainedFunction(handleEntered, onEntered),\n    onExited: createChainedFunction(handleExited, onExited),\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys)), {\n    id: id,\n    ref: targetRef,\n    disabled: disabled,\n    onClean: createChainedFunction(handleClean, onClean),\n    onKeyDown: onPickerKeyDown,\n    as: toggleAs,\n    cleanable: cleanable && !disabled,\n    hasValue: hasValue,\n    active: active,\n    placement: placement,\n    inputValue: value\n  }), selectedElement || (locale === null || locale === void 0 ? void 0 : locale.placeholder))));\n});\nCheckPicker.displayName = 'CheckPicker';\nCheckPicker.defaultProps = defaultProps;\nCheckPicker.propTypes = _extends({}, listPickerPropTypes, {\n  locale: PropTypes.any,\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  menuAutoWidth: PropTypes.bool,\n  menuMaxHeight: PropTypes.number,\n  renderMenu: PropTypes.func,\n  renderMenuItem: PropTypes.func,\n  renderMenuGroup: PropTypes.func,\n  onSelect: PropTypes.func,\n  onGroupTitleClick: PropTypes.func,\n  onSearch: PropTypes.func,\n  groupBy: PropTypes.any,\n  sort: PropTypes.func,\n  searchable: PropTypes.bool,\n  countable: PropTypes.bool,\n  sticky: PropTypes.bool,\n  virtualized: PropTypes.bool,\n  searchBy: PropTypes.func\n});\nexport default CheckPicker;"]},"metadata":{},"sourceType":"module"}