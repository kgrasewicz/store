{"ast":null,"code":"var _jsxFileName = \"C:\\\\Programowanie\\\\store\\\\src\\\\Paginate.js\";\nimport React, { Component, Fragment } from \"react\";\nimport PropTypes from 'prop-types';\nimport _ from \"lodash\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LEFT_PAGE = 'LEFT';\nconst RIGHT_PAGE = 'RIGHT';\n\nclass Pagination extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidUpdate = (prevProps, prevState) => {\n      if (prevProps.totalRecords !== this.props.totalRecords) {\n        this.totalRecords = this.props.totalRecords;\n        this.totalPages = Math.ceil(this.totalRecords / this.pageLimit);\n        console.log(this.totalPages);\n      }\n    };\n\n    this.fetchPageNumbers = () => {\n      const totalPages = this.totalPages;\n      const currentPage = this.state.currentPage;\n      const pageNeighbours = this.pageNeighbours;\n      /**\r\n       * totalNumbers: the total page numbers to show on the control\r\n       * totalBlocks: totalNumbers + 2 to cover for the left(<) and right(>) controls\r\n       */\n\n      const totalNumbers = this.pageNeighbours * 2 + 3;\n      const totalBlocks = totalNumbers + 2;\n\n      if (totalPages > totalBlocks) {\n        const startPage = Math.max(2, currentPage - pageNeighbours);\n        const endPage = Math.min(totalPages - 1, currentPage + pageNeighbours);\n\n        let pages = _.range(startPage, endPage);\n        /**\r\n         * hasLeftSpill: has hidden pages to the left\r\n         * hasRightSpill: has hidden pages to the right\r\n         * spillOffset: number of hidden pages either to the left or to the right\r\n         */\n\n\n        const hasLeftSpill = startPage > 2;\n        const hasRightSpill = totalPages - endPage > 1;\n        const spillOffset = totalNumbers - (pages.length + 1);\n\n        switch (true) {\n          // handle: (1) < {5 6} [7] {8 9} (10)\n          case hasLeftSpill && !hasRightSpill:\n            {\n              const extraPages = _.range(startPage - spillOffset, startPage - 1);\n\n              pages = [LEFT_PAGE, ...extraPages, ...pages];\n              break;\n            }\n          // handle: (1) {2 3} [4] {5 6} > (10)\n\n          case !hasLeftSpill && hasRightSpill:\n            {\n              const extraPages = _.range(endPage + 1, endPage + spillOffset);\n\n              pages = [...pages, ...extraPages, RIGHT_PAGE];\n              break;\n            }\n          // handle: (1) < {4 5} [6] {7 8} > (10)\n\n          case hasLeftSpill && hasRightSpill:\n          default:\n            {\n              pages = [LEFT_PAGE, ...pages, RIGHT_PAGE];\n              break;\n            }\n        }\n\n        return [1, ...pages, totalPages];\n      }\n\n      return _.range(1, totalPages);\n    };\n\n    this.gotoPage = page => {\n      const {\n        onPageChanged = f => f\n      } = this.props;\n      const currentPage = Math.max(0, Math.min(page, this.totalPages));\n      const paginationData = {\n        currentPage,\n        totalPages: this.totalPages,\n        pageLimit: this.pageLimit,\n        totalRecords: this.totalRecords\n      };\n      this.setState({\n        currentPage\n      }, () => onPageChanged(paginationData));\n    };\n\n    this.handleClick = page => evt => {\n      this.gotoPage(page);\n    };\n\n    this.handleMoveLeft = evt => {\n      this.gotoPage(this.state.currentPage - this.pageNeighbours * 2 - 1);\n    };\n\n    this.handleMoveRight = evt => {\n      this.gotoPage(this.state.currentPage + this.pageNeighbours * 2 + 1);\n    };\n\n    const {\n      totalRecords = null,\n      pageLimit = 30,\n      pageNeighbours: _pageNeighbours = 0\n    } = props;\n    this.pageLimit = typeof pageLimit === 'number' ? pageLimit : 30;\n    this.totalRecords = typeof totalRecords === 'number' ? totalRecords : 0; // pageNeighbours can be: 0, 1 or 2\n\n    this.pageNeighbours = typeof _pageNeighbours === 'number' ? Math.max(0, Math.min(_pageNeighbours, 2)) : 0;\n    this.totalPages = Math.ceil(this.totalRecords / this.pageLimit);\n    this.state = {\n      currentPage: 1\n    };\n  }\n\n  render() {\n    if (!this.totalRecords || this.totalPages === 1) return null;\n    const {\n      currentPage\n    } = this.state;\n    const pages = this.fetchPageNumbers();\n    return /*#__PURE__*/_jsxDEV(Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pagination-container\",\n        \"aria-label\": \"Pagination\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"pagination\",\n          children: pages.map((page, index) => {\n            if (page === LEFT_PAGE) return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"page-item previous\",\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"page-link link-2 previous\",\n                href: \"#\",\n                \"aria-label\": \"Previous\",\n                onClick: this.handleMoveLeft,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  \"aria-hidden\": \"true\",\n                  children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: \"\\xAB\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 109,\n                    columnNumber: 50\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"sr-only\",\n                  children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: \"Previous\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 110,\n                    columnNumber: 51\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 23\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 21\n            }, this);\n            if (page === RIGHT_PAGE) return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"page-item next\",\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"page-link link-2 next\",\n                href: \"#\",\n                \"aria-label\": \"Next\",\n                onClick: this.handleMoveRight,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  \"aria-hidden\": \"true\",\n                  children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: \"\\xBB\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 118,\n                    columnNumber: 50\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"sr-only\",\n                  children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: \"Next\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 119,\n                    columnNumber: 51\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 23\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 21\n            }, this);\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: `page-item${currentPage === page ? ' active' : ''}`,\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"page-link link-2\",\n                href: \"#\",\n                onClick: this.handleClick(page),\n                children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: page\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 99\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 23\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 21\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }, this);\n  }\n\n  componentDidMount() {\n    this.gotoPage(1);\n  }\n\n}\n\nPagination.propTypes = {\n  totalRecords: PropTypes.number.isRequired,\n  pageLimit: PropTypes.number,\n  pageNeighbours: PropTypes.number,\n  onPageChanged: PropTypes.func\n};\nexport default Pagination;","map":{"version":3,"sources":["C:/Programowanie/store/src/Paginate.js"],"names":["React","Component","Fragment","PropTypes","_","LEFT_PAGE","RIGHT_PAGE","Pagination","constructor","props","componentDidUpdate","prevProps","prevState","totalRecords","totalPages","Math","ceil","pageLimit","console","log","fetchPageNumbers","currentPage","state","pageNeighbours","totalNumbers","totalBlocks","startPage","max","endPage","min","pages","range","hasLeftSpill","hasRightSpill","spillOffset","length","extraPages","gotoPage","page","onPageChanged","f","paginationData","setState","handleClick","evt","handleMoveLeft","handleMoveRight","render","map","index","componentDidMount","propTypes","number","isRequired","func"],"mappings":"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","sourcesContent":["\r\nimport React, { Component, Fragment } from \"react\";\r\nimport PropTypes from 'prop-types';  \r\nimport _ from \"lodash\"\r\n\r\n\r\nconst LEFT_PAGE = 'LEFT';\r\nconst RIGHT_PAGE = 'RIGHT';\r\n\r\n\r\n\r\nclass Pagination extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      const { totalRecords = null, pageLimit = 30, pageNeighbours = 0 } = props;\r\n  \r\n      this.pageLimit = typeof pageLimit === 'number' ? pageLimit : 30;\r\n      this.totalRecords = typeof totalRecords === 'number' ? totalRecords : 0;\r\n  \r\n      // pageNeighbours can be: 0, 1 or 2\r\n      this.pageNeighbours = typeof pageNeighbours === 'number'\r\n        ? Math.max(0, Math.min(pageNeighbours, 2))\r\n        : 0;\r\n  \r\n      this.totalPages = Math.ceil(this.totalRecords / this.pageLimit);\r\n  \r\n      this.state = { currentPage: 1 };\r\n    }\r\n\r\n\r\n    componentDidUpdate = (prevProps, prevState) => {\r\n      if (prevProps.totalRecords !== this.props.totalRecords) {\r\n        this.totalRecords = this.props.totalRecords\r\n        this.totalPages = Math.ceil(this.totalRecords / this.pageLimit)\r\n        console.log(this.totalPages)\r\n    }\r\n  }\r\n\r\n    fetchPageNumbers = () => {\r\n        const totalPages = this.totalPages;\r\n        const currentPage = this.state.currentPage;\r\n        const pageNeighbours = this.pageNeighbours;\r\n    \r\n        /**\r\n         * totalNumbers: the total page numbers to show on the control\r\n         * totalBlocks: totalNumbers + 2 to cover for the left(<) and right(>) controls\r\n         */\r\n        const totalNumbers = (this.pageNeighbours * 2) + 3;\r\n        const totalBlocks = totalNumbers + 2;\r\n    \r\n        if (totalPages > totalBlocks) {\r\n          const startPage = Math.max(2, currentPage - pageNeighbours);\r\n          const endPage = Math.min(totalPages - 1, currentPage + pageNeighbours);\r\n          let pages = _.range(startPage, endPage);\r\n    \r\n          /**\r\n           * hasLeftSpill: has hidden pages to the left\r\n           * hasRightSpill: has hidden pages to the right\r\n           * spillOffset: number of hidden pages either to the left or to the right\r\n           */\r\n          const hasLeftSpill = startPage > 2;\r\n          const hasRightSpill = (totalPages - endPage) > 1;\r\n          const spillOffset = totalNumbers - (pages.length + 1);\r\n    \r\n          switch (true) {\r\n            // handle: (1) < {5 6} [7] {8 9} (10)\r\n            case (hasLeftSpill && !hasRightSpill): {\r\n              const extraPages = _.range(startPage - spillOffset, startPage - 1);\r\n              pages = [LEFT_PAGE, ...extraPages, ...pages];\r\n              break;\r\n            }\r\n    \r\n            // handle: (1) {2 3} [4] {5 6} > (10)\r\n            case (!hasLeftSpill && hasRightSpill): {\r\n              const extraPages = _.range(endPage + 1, endPage + spillOffset);\r\n              pages = [...pages, ...extraPages, RIGHT_PAGE];\r\n              break;\r\n            }\r\n    \r\n            // handle: (1) < {4 5} [6] {7 8} > (10)\r\n            case (hasLeftSpill && hasRightSpill):\r\n            default: {\r\n              pages = [LEFT_PAGE, ...pages, RIGHT_PAGE];\r\n              break;\r\n            }\r\n          }\r\n    \r\n          return [1, ...pages, totalPages];\r\n        }\r\n    \r\n        return _.range(1, totalPages);\r\n      }\r\n\r\n      render() {\r\n        if (!this.totalRecords || this.totalPages === 1) return null;\r\n    \r\n        const { currentPage } = this.state;\r\n        const pages = this.fetchPageNumbers();\r\n    \r\n        return (\r\n          <Fragment>\r\n            <div className=\"pagination-container\"  aria-label=\"Pagination\">\r\n              <ul className=\"pagination\">\r\n                { pages.map((page, index) => {\r\n    \r\n                  if (page === LEFT_PAGE) return (\r\n                    <li key={index} className=\"page-item previous\">\r\n                      <a className=\"page-link link-2 previous\" href=\"#\" aria-label=\"Previous\" onClick={this.handleMoveLeft}>\r\n                        <span aria-hidden=\"true\"><h3>&laquo;</h3></span>\r\n                        <span className=\"sr-only\"><h3>Previous</h3></span>\r\n                      </a>\r\n                    </li>\r\n                  );\r\n    \r\n                  if (page === RIGHT_PAGE) return (\r\n                    <li key={index} className=\"page-item next\">\r\n                      <a className=\"page-link link-2 next\" href=\"#\" aria-label=\"Next\" onClick={this.handleMoveRight}>\r\n                        <span aria-hidden=\"true\"><h3>&raquo;</h3></span>\r\n                        <span className=\"sr-only\"><h3>Next</h3></span>\r\n                      </a>\r\n                    </li>\r\n                  );\r\n    \r\n                  return (\r\n                    <li key={index} className={`page-item${ currentPage === page ? ' active' : ''}`}>\r\n                      <a className=\"page-link link-2\" href=\"#\" onClick={ this.handleClick(page) }><h3>{ page }</h3></a>\r\n                    </li>\r\n                  );\r\n    \r\n                }) }\r\n    \r\n              </ul>\r\n            </div>\r\n          </Fragment>\r\n        );\r\n\r\n        \r\n      }\r\n\r\n      componentDidMount() {\r\n    this.gotoPage(1);\r\n  }\r\n\r\n  gotoPage = page => {\r\n    const { onPageChanged = f => f } = this.props;\r\n    const currentPage = Math.max(0, Math.min(page, this.totalPages));\r\n    const paginationData = {\r\n      currentPage,\r\n      totalPages: this.totalPages,\r\n      pageLimit: this.pageLimit,\r\n      totalRecords: this.totalRecords\r\n    };\r\n\r\n    this.setState({ currentPage }, () => onPageChanged(paginationData));\r\n  }\r\n\r\n  handleClick = page => evt => {\r\n\r\n    this.gotoPage(page);\r\n  }\r\n\r\n  handleMoveLeft = evt => {\r\n\r\n    this.gotoPage(this.state.currentPage - (this.pageNeighbours * 2) - 1);\r\n  }\r\n\r\n  handleMoveRight = evt => {\r\n\r\n    this.gotoPage(this.state.currentPage + (this.pageNeighbours * 2) + 1);\r\n  }\r\n    \r\n  }\r\n  \r\n  Pagination.propTypes = {\r\n    totalRecords: PropTypes.number.isRequired,\r\n    pageLimit: PropTypes.number,\r\n    pageNeighbours: PropTypes.number,\r\n    onPageChanged: PropTypes.func,\r\n  };\r\n\r\n  \r\n  \r\n  export default Pagination;"]},"metadata":{},"sourceType":"module"}