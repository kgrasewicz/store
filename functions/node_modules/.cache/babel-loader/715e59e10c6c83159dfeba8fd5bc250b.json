{"ast":null,"code":"import React, { useState, useEffect, useRef, useMemo, useCallback, useImperativeHandle } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport helper from '../DOMHelper';\nimport positionUtils from './positionUtils';\nimport { getDOMNode } from '../utils';\nvar defaultProps = {\n  containerPadding: 0,\n  placement: 'right'\n};\n\nvar usePosition = function usePosition(props, ref) {\n  var placement = props.placement,\n      preventOverflow = props.preventOverflow,\n      containerPadding = props.containerPadding,\n      container = props.container,\n      triggerTarget = props.triggerTarget;\n  var containerRef = useRef();\n  var containerScrollListenerRef = useRef();\n  var lastTargetRef = useRef();\n  var defaultPosition = {\n    positionLeft: 0,\n    positionTop: 0,\n    arrowOffsetLeft: null,\n    arrowOffsetTop: null\n  };\n\n  var _useState = useState(defaultPosition),\n      position = _useState[0],\n      setPosition = _useState[1];\n\n  var utils = useMemo(function () {\n    return positionUtils({\n      placement: placement,\n      preventOverflow: preventOverflow,\n      padding: containerPadding\n    });\n  }, [placement, preventOverflow, containerPadding]);\n  var updatePosition = useCallback(function (placementChanged) {\n    if (placementChanged === void 0) {\n      placementChanged = true;\n    }\n\n    if (!(triggerTarget === null || triggerTarget === void 0 ? void 0 : triggerTarget.current)) {\n      return;\n    }\n\n    var targetElement = getDOMNode(triggerTarget);\n\n    if (!helper.isElement(targetElement)) {\n      throw new Error('`target` should return an HTMLElement');\n    }\n    /**\n     * If the target and placement do not change, the position is not updated.\n     */\n\n\n    if (targetElement === lastTargetRef.current && !placementChanged) {\n      return;\n    }\n\n    var overlay = getDOMNode(ref.current);\n    var containerElement = helper.getContainer(typeof container === 'function' ? container() : container, helper.ownerDocument(ref.current).body);\n    setPosition(utils.calcOverlayPosition(overlay, targetElement, containerElement));\n    containerRef.current = containerElement;\n    lastTargetRef.current = targetElement;\n  }, [container, ref, triggerTarget, utils]);\n  useEffect(function () {\n    updatePosition(false);\n\n    if (containerRef.current && preventOverflow) {\n      var _containerRef$current;\n\n      containerScrollListenerRef.current = helper.on(((_containerRef$current = containerRef.current) === null || _containerRef$current === void 0 ? void 0 : _containerRef$current.tagName) === 'BODY' ? window : containerRef.current, 'scroll', function () {\n        return updatePosition();\n      });\n    }\n\n    return function () {\n      var _containerScrollListe;\n\n      lastTargetRef.current = null;\n      (_containerScrollListe = containerScrollListenerRef.current) === null || _containerScrollListe === void 0 ? void 0 : _containerScrollListe.off();\n    };\n  }, [preventOverflow, updatePosition]);\n  useEffect(function () {\n    return updatePosition();\n  }, [updatePosition, placement]);\n  return [position, updatePosition];\n};\n\nvar Position = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var children = props.children,\n      className = props.className;\n  var childRef = React.useRef();\n\n  var _usePosition = usePosition(props, childRef),\n      position = _usePosition[0],\n      updatePosition = _usePosition[1];\n\n  var positionClassName = position.positionClassName,\n      arrowOffsetLeft = position.arrowOffsetLeft,\n      arrowOffsetTop = position.arrowOffsetTop,\n      positionLeft = position.positionLeft,\n      positionTop = position.positionTop;\n  useImperativeHandle(ref, function () {\n    return {\n      get child() {\n        return childRef.current;\n      },\n\n      updatePosition: updatePosition\n    };\n  });\n\n  if (typeof children === 'function') {\n    var childProps = {\n      className: classNames(className, positionClassName),\n      arrowOffsetLeft: arrowOffsetLeft,\n      arrowOffsetTop: arrowOffsetTop,\n      left: positionLeft,\n      top: positionTop\n    };\n    return children(childProps, childRef);\n  }\n\n  return children;\n});\nPosition.displayName = 'Position';\nPosition.defaultProps = defaultProps;\nPosition.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.func,\n  container: PropTypes.oneOfType([PropTypes.func, PropTypes.any]),\n  containerPadding: PropTypes.number,\n  placement: PropTypes.any,\n  preventOverflow: PropTypes.bool,\n  triggerTarget: PropTypes.any\n};\nexport default Position;","map":{"version":3,"sources":["C:/Programowanie/store/node_modules/rsuite/es/Overlay/Position.js"],"names":["React","useState","useEffect","useRef","useMemo","useCallback","useImperativeHandle","PropTypes","classNames","helper","positionUtils","getDOMNode","defaultProps","containerPadding","placement","usePosition","props","ref","preventOverflow","container","triggerTarget","containerRef","containerScrollListenerRef","lastTargetRef","defaultPosition","positionLeft","positionTop","arrowOffsetLeft","arrowOffsetTop","_useState","position","setPosition","utils","padding","updatePosition","placementChanged","current","targetElement","isElement","Error","overlay","containerElement","getContainer","ownerDocument","body","calcOverlayPosition","_containerRef$current","on","tagName","window","_containerScrollListe","off","Position","forwardRef","children","className","childRef","_usePosition","positionClassName","child","childProps","left","top","displayName","propTypes","string","func","oneOfType","any","number","bool"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, useMemo, useCallback, useImperativeHandle } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport helper from '../DOMHelper';\nimport positionUtils from './positionUtils';\nimport { getDOMNode } from '../utils';\nvar defaultProps = {\n  containerPadding: 0,\n  placement: 'right'\n};\n\nvar usePosition = function usePosition(props, ref) {\n  var placement = props.placement,\n      preventOverflow = props.preventOverflow,\n      containerPadding = props.containerPadding,\n      container = props.container,\n      triggerTarget = props.triggerTarget;\n  var containerRef = useRef();\n  var containerScrollListenerRef = useRef();\n  var lastTargetRef = useRef();\n  var defaultPosition = {\n    positionLeft: 0,\n    positionTop: 0,\n    arrowOffsetLeft: null,\n    arrowOffsetTop: null\n  };\n\n  var _useState = useState(defaultPosition),\n      position = _useState[0],\n      setPosition = _useState[1];\n\n  var utils = useMemo(function () {\n    return positionUtils({\n      placement: placement,\n      preventOverflow: preventOverflow,\n      padding: containerPadding\n    });\n  }, [placement, preventOverflow, containerPadding]);\n  var updatePosition = useCallback(function (placementChanged) {\n    if (placementChanged === void 0) {\n      placementChanged = true;\n    }\n\n    if (!(triggerTarget === null || triggerTarget === void 0 ? void 0 : triggerTarget.current)) {\n      return;\n    }\n\n    var targetElement = getDOMNode(triggerTarget);\n\n    if (!helper.isElement(targetElement)) {\n      throw new Error('`target` should return an HTMLElement');\n    }\n    /**\n     * If the target and placement do not change, the position is not updated.\n     */\n\n\n    if (targetElement === lastTargetRef.current && !placementChanged) {\n      return;\n    }\n\n    var overlay = getDOMNode(ref.current);\n    var containerElement = helper.getContainer(typeof container === 'function' ? container() : container, helper.ownerDocument(ref.current).body);\n    setPosition(utils.calcOverlayPosition(overlay, targetElement, containerElement));\n    containerRef.current = containerElement;\n    lastTargetRef.current = targetElement;\n  }, [container, ref, triggerTarget, utils]);\n  useEffect(function () {\n    updatePosition(false);\n\n    if (containerRef.current && preventOverflow) {\n      var _containerRef$current;\n\n      containerScrollListenerRef.current = helper.on(((_containerRef$current = containerRef.current) === null || _containerRef$current === void 0 ? void 0 : _containerRef$current.tagName) === 'BODY' ? window : containerRef.current, 'scroll', function () {\n        return updatePosition();\n      });\n    }\n\n    return function () {\n      var _containerScrollListe;\n\n      lastTargetRef.current = null;\n      (_containerScrollListe = containerScrollListenerRef.current) === null || _containerScrollListe === void 0 ? void 0 : _containerScrollListe.off();\n    };\n  }, [preventOverflow, updatePosition]);\n  useEffect(function () {\n    return updatePosition();\n  }, [updatePosition, placement]);\n  return [position, updatePosition];\n};\n\nvar Position = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var children = props.children,\n      className = props.className;\n  var childRef = React.useRef();\n\n  var _usePosition = usePosition(props, childRef),\n      position = _usePosition[0],\n      updatePosition = _usePosition[1];\n\n  var positionClassName = position.positionClassName,\n      arrowOffsetLeft = position.arrowOffsetLeft,\n      arrowOffsetTop = position.arrowOffsetTop,\n      positionLeft = position.positionLeft,\n      positionTop = position.positionTop;\n  useImperativeHandle(ref, function () {\n    return {\n      get child() {\n        return childRef.current;\n      },\n\n      updatePosition: updatePosition\n    };\n  });\n\n  if (typeof children === 'function') {\n    var childProps = {\n      className: classNames(className, positionClassName),\n      arrowOffsetLeft: arrowOffsetLeft,\n      arrowOffsetTop: arrowOffsetTop,\n      left: positionLeft,\n      top: positionTop\n    };\n    return children(childProps, childRef);\n  }\n\n  return children;\n});\nPosition.displayName = 'Position';\nPosition.defaultProps = defaultProps;\nPosition.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.func,\n  container: PropTypes.oneOfType([PropTypes.func, PropTypes.any]),\n  containerPadding: PropTypes.number,\n  placement: PropTypes.any,\n  preventOverflow: PropTypes.bool,\n  triggerTarget: PropTypes.any\n};\nexport default Position;"]},"metadata":{},"sourceType":"module"}