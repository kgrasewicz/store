{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useState, useRef, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport pick from 'lodash/pick';\nimport Input from '../Input';\nimport { useClassNames, useControlled, PLACEMENT, mergeRefs } from '../utils';\nimport { animationPropTypes } from '../Animation/utils';\nimport { PickerToggleTrigger, onMenuKeyDown, DropdownMenu, DropdownMenuItem, PickerOverlay, useFocusItemValue, usePublicMethods, pickTriggerPropKeys } from '../Picker';\nimport { transformData, shouldDisplay } from './utils';\nvar defaultProps = {\n  as: 'div',\n  classPrefix: 'auto-complete',\n  defaultValue: '',\n  placement: 'bottomStart',\n  selectOnEnter: true\n};\nvar AutoComplete = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var Component = props.as,\n      disabled = props.disabled,\n      className = props.className,\n      placement = props.placement,\n      selectOnEnter = props.selectOnEnter,\n      classPrefix = props.classPrefix,\n      defaultValue = props.defaultValue,\n      data = props.data,\n      valueProp = props.value,\n      open = props.open,\n      style = props.style,\n      menuClassName = props.menuClassName,\n      id = props.id,\n      renderMenu = props.renderMenu,\n      renderMenuItem = props.renderMenuItem,\n      onSelect = props.onSelect,\n      filterBy = props.filterBy,\n      onKeyDown = props.onKeyDown,\n      onChange = props.onChange,\n      onClose = props.onClose,\n      onOpen = props.onOpen,\n      onFocus = props.onFocus,\n      onBlur = props.onBlur,\n      onMenuFocus = props.onMenuFocus,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"disabled\", \"className\", \"placement\", \"selectOnEnter\", \"classPrefix\", \"defaultValue\", \"data\", \"value\", \"open\", \"style\", \"menuClassName\", \"id\", \"renderMenu\", \"renderMenuItem\", \"onSelect\", \"filterBy\", \"onKeyDown\", \"onChange\", \"onClose\", \"onOpen\", \"onFocus\", \"onBlur\", \"onMenuFocus\"]);\n\n  var datalist = transformData(data);\n\n  var _useControlled = useControlled(valueProp, defaultValue),\n      value = _useControlled[0],\n      setValue = _useControlled[1];\n\n  var _useState = useState(false),\n      focus = _useState[0],\n      setFocus = _useState[1];\n\n  var items = (datalist === null || datalist === void 0 ? void 0 : datalist.filter(shouldDisplay(filterBy, value))) || [];\n  var hasItems = items.length > 0;\n  var overlayRef = useRef(null); // Used to hover the focuse item  when trigger `onKeydown`\n\n  var _useFocusItemValue = useFocusItemValue(value, {\n    data: datalist,\n    callback: onMenuFocus,\n    target: function target() {\n      return overlayRef.current;\n    }\n  }),\n      focusItemValue = _useFocusItemValue.focusItemValue,\n      setFocusItemValue = _useFocusItemValue.setFocusItemValue,\n      handleKeyDown = _useFocusItemValue.onKeyDown;\n\n  var handleKeyDownEvent = function handleKeyDownEvent(event) {\n    if (!overlayRef.current) {\n      return;\n    }\n\n    onMenuKeyDown(event, {\n      enter: selectOnEnter ? selectFocusMenuItem : undefined,\n      esc: handleClose\n    });\n    handleKeyDown(event);\n    onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(event);\n  };\n\n  var selectFocusMenuItem = function selectFocusMenuItem(event) {\n    if (!focusItemValue) {\n      return;\n    }\n\n    var focusItem = datalist.find(function (item) {\n      return (item === null || item === void 0 ? void 0 : item.value) === focusItemValue;\n    });\n    setValue(focusItemValue);\n    setFocusItemValue(focusItemValue);\n    handleSelect(focusItem, event);\n\n    if (value !== focusItemValue) {\n      handleChangeValue(focusItemValue, event);\n    }\n\n    handleClose();\n  };\n\n  var handleSelect = useCallback(function (item, event) {\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(item.value, item, event);\n  }, [onSelect]);\n  var handleChangeValue = useCallback(function (value, event) {\n    onChange === null || onChange === void 0 ? void 0 : onChange(value, event);\n  }, [onChange]);\n\n  var handleChange = function handleChange(value, event) {\n    setFocusItemValue('');\n    setValue(value);\n    setFocus(true);\n    handleChangeValue(value, event);\n  };\n\n  var handleClose = useCallback(function () {\n    setFocus(false);\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n  }, [onClose]);\n  var handleOpen = useCallback(function () {\n    setFocus(true);\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n  }, [onOpen]);\n  var handleItemSelect = useCallback(function (nextItemValue, item, event) {\n    setValue(nextItemValue);\n    setFocusItemValue(nextItemValue);\n    handleSelect(item, event);\n\n    if (value !== nextItemValue) {\n      handleChangeValue(nextItemValue, event);\n    }\n\n    handleClose();\n  }, [value, setValue, handleSelect, handleChangeValue, handleClose, setFocusItemValue]);\n  var handleInputFocus = useCallback(function (event) {\n    onFocus === null || onFocus === void 0 ? void 0 : onFocus(event);\n    handleOpen();\n  }, [onFocus, handleOpen]);\n  var handleInputBlur = useCallback(function (event) {\n    setTimeout(handleClose, 300);\n    onBlur === null || onBlur === void 0 ? void 0 : onBlur(event);\n  }, [onBlur, handleClose]);\n\n  var _useClassNames = useClassNames(classPrefix),\n      withClassPrefix = _useClassNames.withClassPrefix,\n      merge = _useClassNames.merge;\n\n  var classes = merge(className, withClassPrefix({\n    disabled: disabled\n  }));\n  var triggerRef = useRef();\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef\n  });\n\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var left = positionProps.left,\n        top = positionProps.top,\n        className = positionProps.className;\n    var styles = {\n      left: left,\n      top: top\n    };\n    var menu = /*#__PURE__*/React.createElement(DropdownMenu, {\n      id: id ? id + \"-listbox\" : undefined,\n      classPrefix: \"auto-complete-menu\",\n      dropdownMenuItemClassPrefix: \"auto-complete-item\",\n      dropdownMenuItemAs: DropdownMenuItem,\n      focusItemValue: focusItemValue,\n      onSelect: handleItemSelect,\n      renderMenuItem: renderMenuItem,\n      data: items,\n      className: menuClassName\n    });\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      ref: mergeRefs(overlayRef, speakerRef),\n      style: styles,\n      className: className,\n      onKeyDown: handleKeyDownEvent,\n      target: triggerRef\n    }, renderMenu ? renderMenu(menu) : menu);\n  };\n\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    ref: triggerRef,\n    placement: placement,\n    pickerProps: pick(props, pickTriggerPropKeys),\n    trigger: ['click', 'focus'],\n    open: open || focus && hasItems,\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style\n  }, /*#__PURE__*/React.createElement(Input, _extends({}, rest, {\n    id: id,\n    disabled: disabled,\n    value: value,\n    onBlur: handleInputBlur,\n    onFocus: handleInputFocus,\n    onChange: handleChange,\n    onKeyDown: handleKeyDownEvent\n  }))));\n});\nAutoComplete.displayName = 'AutoComplete';\nAutoComplete.defaultProps = defaultProps;\nAutoComplete.propTypes = _extends({}, animationPropTypes, {\n  data: PropTypes.array,\n  disabled: PropTypes.bool,\n  onSelect: PropTypes.func,\n  onChange: PropTypes.func,\n  classPrefix: PropTypes.string,\n  value: PropTypes.string,\n  defaultValue: PropTypes.string,\n  className: PropTypes.string,\n  menuClassName: PropTypes.string,\n  placement: PropTypes.oneOf(PLACEMENT),\n  onFocus: PropTypes.func,\n  onMenuFocus: PropTypes.func,\n  onBlur: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderMenuItem: PropTypes.func,\n  style: PropTypes.object,\n  open: PropTypes.bool,\n  selectOnEnter: PropTypes.bool,\n  filterBy: PropTypes.func\n});\nexport default AutoComplete;","map":{"version":3,"sources":["C:/Programowanie/store/node_modules/rsuite/es/AutoComplete/AutoComplete.js"],"names":["_extends","_objectWithoutPropertiesLoose","React","useState","useRef","useCallback","PropTypes","pick","Input","useClassNames","useControlled","PLACEMENT","mergeRefs","animationPropTypes","PickerToggleTrigger","onMenuKeyDown","DropdownMenu","DropdownMenuItem","PickerOverlay","useFocusItemValue","usePublicMethods","pickTriggerPropKeys","transformData","shouldDisplay","defaultProps","as","classPrefix","defaultValue","placement","selectOnEnter","AutoComplete","forwardRef","props","ref","Component","disabled","className","data","valueProp","value","open","style","menuClassName","id","renderMenu","renderMenuItem","onSelect","filterBy","onKeyDown","onChange","onClose","onOpen","onFocus","onBlur","onMenuFocus","rest","datalist","_useControlled","setValue","_useState","focus","setFocus","items","filter","hasItems","length","overlayRef","_useFocusItemValue","callback","target","current","focusItemValue","setFocusItemValue","handleKeyDown","handleKeyDownEvent","event","enter","selectFocusMenuItem","undefined","esc","handleClose","focusItem","find","item","handleSelect","handleChangeValue","handleChange","handleOpen","handleItemSelect","nextItemValue","handleInputFocus","handleInputBlur","setTimeout","_useClassNames","withClassPrefix","merge","classes","triggerRef","renderDropdownMenu","positionProps","speakerRef","left","top","styles","menu","createElement","dropdownMenuItemClassPrefix","dropdownMenuItemAs","pickerProps","trigger","speaker","displayName","propTypes","array","bool","func","string","oneOf","object"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useState, useRef, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport pick from 'lodash/pick';\nimport Input from '../Input';\nimport { useClassNames, useControlled, PLACEMENT, mergeRefs } from '../utils';\nimport { animationPropTypes } from '../Animation/utils';\nimport { PickerToggleTrigger, onMenuKeyDown, DropdownMenu, DropdownMenuItem, PickerOverlay, useFocusItemValue, usePublicMethods, pickTriggerPropKeys } from '../Picker';\nimport { transformData, shouldDisplay } from './utils';\nvar defaultProps = {\n  as: 'div',\n  classPrefix: 'auto-complete',\n  defaultValue: '',\n  placement: 'bottomStart',\n  selectOnEnter: true\n};\nvar AutoComplete = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var Component = props.as,\n      disabled = props.disabled,\n      className = props.className,\n      placement = props.placement,\n      selectOnEnter = props.selectOnEnter,\n      classPrefix = props.classPrefix,\n      defaultValue = props.defaultValue,\n      data = props.data,\n      valueProp = props.value,\n      open = props.open,\n      style = props.style,\n      menuClassName = props.menuClassName,\n      id = props.id,\n      renderMenu = props.renderMenu,\n      renderMenuItem = props.renderMenuItem,\n      onSelect = props.onSelect,\n      filterBy = props.filterBy,\n      onKeyDown = props.onKeyDown,\n      onChange = props.onChange,\n      onClose = props.onClose,\n      onOpen = props.onOpen,\n      onFocus = props.onFocus,\n      onBlur = props.onBlur,\n      onMenuFocus = props.onMenuFocus,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"disabled\", \"className\", \"placement\", \"selectOnEnter\", \"classPrefix\", \"defaultValue\", \"data\", \"value\", \"open\", \"style\", \"menuClassName\", \"id\", \"renderMenu\", \"renderMenuItem\", \"onSelect\", \"filterBy\", \"onKeyDown\", \"onChange\", \"onClose\", \"onOpen\", \"onFocus\", \"onBlur\", \"onMenuFocus\"]);\n\n  var datalist = transformData(data);\n\n  var _useControlled = useControlled(valueProp, defaultValue),\n      value = _useControlled[0],\n      setValue = _useControlled[1];\n\n  var _useState = useState(false),\n      focus = _useState[0],\n      setFocus = _useState[1];\n\n  var items = (datalist === null || datalist === void 0 ? void 0 : datalist.filter(shouldDisplay(filterBy, value))) || [];\n  var hasItems = items.length > 0;\n  var overlayRef = useRef(null); // Used to hover the focuse item  when trigger `onKeydown`\n\n  var _useFocusItemValue = useFocusItemValue(value, {\n    data: datalist,\n    callback: onMenuFocus,\n    target: function target() {\n      return overlayRef.current;\n    }\n  }),\n      focusItemValue = _useFocusItemValue.focusItemValue,\n      setFocusItemValue = _useFocusItemValue.setFocusItemValue,\n      handleKeyDown = _useFocusItemValue.onKeyDown;\n\n  var handleKeyDownEvent = function handleKeyDownEvent(event) {\n    if (!overlayRef.current) {\n      return;\n    }\n\n    onMenuKeyDown(event, {\n      enter: selectOnEnter ? selectFocusMenuItem : undefined,\n      esc: handleClose\n    });\n    handleKeyDown(event);\n    onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(event);\n  };\n\n  var selectFocusMenuItem = function selectFocusMenuItem(event) {\n    if (!focusItemValue) {\n      return;\n    }\n\n    var focusItem = datalist.find(function (item) {\n      return (item === null || item === void 0 ? void 0 : item.value) === focusItemValue;\n    });\n    setValue(focusItemValue);\n    setFocusItemValue(focusItemValue);\n    handleSelect(focusItem, event);\n\n    if (value !== focusItemValue) {\n      handleChangeValue(focusItemValue, event);\n    }\n\n    handleClose();\n  };\n\n  var handleSelect = useCallback(function (item, event) {\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(item.value, item, event);\n  }, [onSelect]);\n  var handleChangeValue = useCallback(function (value, event) {\n    onChange === null || onChange === void 0 ? void 0 : onChange(value, event);\n  }, [onChange]);\n\n  var handleChange = function handleChange(value, event) {\n    setFocusItemValue('');\n    setValue(value);\n    setFocus(true);\n    handleChangeValue(value, event);\n  };\n\n  var handleClose = useCallback(function () {\n    setFocus(false);\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n  }, [onClose]);\n  var handleOpen = useCallback(function () {\n    setFocus(true);\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n  }, [onOpen]);\n  var handleItemSelect = useCallback(function (nextItemValue, item, event) {\n    setValue(nextItemValue);\n    setFocusItemValue(nextItemValue);\n    handleSelect(item, event);\n\n    if (value !== nextItemValue) {\n      handleChangeValue(nextItemValue, event);\n    }\n\n    handleClose();\n  }, [value, setValue, handleSelect, handleChangeValue, handleClose, setFocusItemValue]);\n  var handleInputFocus = useCallback(function (event) {\n    onFocus === null || onFocus === void 0 ? void 0 : onFocus(event);\n    handleOpen();\n  }, [onFocus, handleOpen]);\n  var handleInputBlur = useCallback(function (event) {\n    setTimeout(handleClose, 300);\n    onBlur === null || onBlur === void 0 ? void 0 : onBlur(event);\n  }, [onBlur, handleClose]);\n\n  var _useClassNames = useClassNames(classPrefix),\n      withClassPrefix = _useClassNames.withClassPrefix,\n      merge = _useClassNames.merge;\n\n  var classes = merge(className, withClassPrefix({\n    disabled: disabled\n  }));\n  var triggerRef = useRef();\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef\n  });\n\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var left = positionProps.left,\n        top = positionProps.top,\n        className = positionProps.className;\n    var styles = {\n      left: left,\n      top: top\n    };\n    var menu = /*#__PURE__*/React.createElement(DropdownMenu, {\n      id: id ? id + \"-listbox\" : undefined,\n      classPrefix: \"auto-complete-menu\",\n      dropdownMenuItemClassPrefix: \"auto-complete-item\",\n      dropdownMenuItemAs: DropdownMenuItem,\n      focusItemValue: focusItemValue,\n      onSelect: handleItemSelect,\n      renderMenuItem: renderMenuItem,\n      data: items,\n      className: menuClassName\n    });\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      ref: mergeRefs(overlayRef, speakerRef),\n      style: styles,\n      className: className,\n      onKeyDown: handleKeyDownEvent,\n      target: triggerRef\n    }, renderMenu ? renderMenu(menu) : menu);\n  };\n\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    ref: triggerRef,\n    placement: placement,\n    pickerProps: pick(props, pickTriggerPropKeys),\n    trigger: ['click', 'focus'],\n    open: open || focus && hasItems,\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style\n  }, /*#__PURE__*/React.createElement(Input, _extends({}, rest, {\n    id: id,\n    disabled: disabled,\n    value: value,\n    onBlur: handleInputBlur,\n    onFocus: handleInputFocus,\n    onChange: handleChange,\n    onKeyDown: handleKeyDownEvent\n  }))));\n});\nAutoComplete.displayName = 'AutoComplete';\nAutoComplete.defaultProps = defaultProps;\nAutoComplete.propTypes = _extends({}, animationPropTypes, {\n  data: PropTypes.array,\n  disabled: PropTypes.bool,\n  onSelect: PropTypes.func,\n  onChange: PropTypes.func,\n  classPrefix: PropTypes.string,\n  value: PropTypes.string,\n  defaultValue: PropTypes.string,\n  className: PropTypes.string,\n  menuClassName: PropTypes.string,\n  placement: PropTypes.oneOf(PLACEMENT),\n  onFocus: PropTypes.func,\n  onMenuFocus: PropTypes.func,\n  onBlur: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderMenuItem: PropTypes.func,\n  style: PropTypes.object,\n  open: PropTypes.bool,\n  selectOnEnter: PropTypes.bool,\n  filterBy: PropTypes.func\n});\nexport default AutoComplete;"]},"metadata":{},"sourceType":"module"}