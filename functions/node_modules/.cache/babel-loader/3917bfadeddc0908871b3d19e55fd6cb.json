{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { getPosition, scrollTop } from 'dom-lib';\nimport partial from 'lodash/partial';\nimport camelCase from 'lodash/camelCase';\nimport isNumber from 'lodash/isNumber';\nimport { DateUtils, scrollTopAnimation, TimeZone, useClassNames } from '../utils';\nimport { useCalendarContext } from './CalendarContext';\nvar defaultProps = {\n  classPrefix: 'calendar-time-dropdown',\n  as: 'div'\n};\n/**\n * Get the effective range of hours, minutes and seconds\n * @param meridian\n */\n\nexport function getRanges(meridian) {\n  return {\n    hours: {\n      start: 0,\n      end: meridian ? 11 : 23\n    },\n    minutes: {\n      start: 0,\n      end: 59\n    },\n    seconds: {\n      start: 0,\n      end: 59\n    }\n  };\n}\n/**\n * Convert the 24-hour clock to the 12-hour clock\n * @param hours\n */\n\nexport function getMeridianHours(hours) {\n  return hours >= 12 ? hours - 12 : hours;\n}\n\nvar getTime = function getTime(props) {\n  var format = props.format,\n      timeZone = props.timeZone,\n      date = props.date,\n      showMeridian = props.showMeridian;\n  var time = date || TimeZone.zonedDate(timeZone);\n  var nextTime = {};\n\n  if (!format) {\n    return nextTime;\n  }\n\n  if (/(H|h)/.test(format)) {\n    var hours = DateUtils.getHours(time);\n    nextTime.hours = showMeridian ? getMeridianHours(hours) : hours;\n  }\n\n  if (/m/.test(format)) {\n    nextTime.minutes = DateUtils.getMinutes(time);\n  }\n\n  if (/s/.test(format)) {\n    nextTime.seconds = DateUtils.getSeconds(time);\n  }\n\n  return nextTime;\n};\n\nvar scrollTo = function scrollTo(time, row) {\n  if (!row) {\n    return;\n  }\n\n  Object.entries(time).forEach(function (_ref) {\n    var type = _ref[0],\n        value = _ref[1];\n    var container = row.querySelector(\"[data-type=\\\"\" + type + \"\\\"]\");\n    var node = container === null || container === void 0 ? void 0 : container.querySelector(\"[data-key=\\\"\" + type + \"-\" + value + \"\\\"]\");\n\n    if (node && container) {\n      var _getPosition = getPosition(node, container),\n          top = _getPosition.top;\n\n      scrollTopAnimation(container, top, scrollTop(container) !== 0);\n    }\n  });\n};\n\nvar TimeDropdown = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var Component = props.as,\n      className = props.className,\n      classPrefix = props.classPrefix,\n      show = props.show,\n      showMeridian = props.showMeridian,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"className\", \"classPrefix\", \"show\", \"showMeridian\"]);\n\n  var _useCalendarContext = useCalendarContext(),\n      locale = _useCalendarContext.locale,\n      format = _useCalendarContext.format,\n      timeZone = _useCalendarContext.timeZone,\n      date = _useCalendarContext.date,\n      onSelect = _useCalendarContext.onChangePageTime;\n\n  var rowRef = useRef(null);\n  useEffect(function () {\n    var time = getTime({\n      format: format,\n      timeZone: timeZone,\n      date: date,\n      showMeridian: showMeridian\n    }); // The currently selected time scrolls to the visible range.\n\n    show && scrollTo(time, rowRef.current);\n  }, [date, format, show, showMeridian, timeZone]);\n\n  var handleClick = function handleClick(type, d, event) {\n    var nextDate = date || new Date();\n\n    switch (type) {\n      case 'hours':\n        nextDate = DateUtils.setHours(date, d);\n        break;\n\n      case 'minutes':\n        nextDate = DateUtils.setMinutes(date, d);\n        break;\n\n      case 'seconds':\n        nextDate = DateUtils.setSeconds(date, d);\n        break;\n    }\n\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(nextDate, event);\n  };\n\n  var _useClassNames = useClassNames(classPrefix),\n      prefix = _useClassNames.prefix,\n      rootPrefix = _useClassNames.rootPrefix,\n      merge = _useClassNames.merge;\n\n  var renderColumn = function renderColumn(type, active) {\n    if (!isNumber(active)) {\n      return null;\n    }\n\n    var _getRanges$type = getRanges(showMeridian)[type],\n        start = _getRanges$type.start,\n        end = _getRanges$type.end;\n    var items = [];\n    var hideFunc = props[camelCase(\"hide_\" + type)];\n    var disabledFunc = props[camelCase(\"disabled_\" + type)];\n\n    for (var i = start; i <= end; i += 1) {\n      if (!(hideFunc === null || hideFunc === void 0 ? void 0 : hideFunc(i, date))) {\n        var disabled = disabledFunc === null || disabledFunc === void 0 ? void 0 : disabledFunc(i, date);\n        var itemClasses = prefix('cell', {\n          'cell-active': active === i,\n          'cell-disabled': disabled\n        });\n        items.push( /*#__PURE__*/React.createElement(\"li\", {\n          key: i,\n          role: \"menuitem\"\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          role: \"button\",\n          className: itemClasses,\n          tabIndex: -1,\n          \"data-key\": type + \"-\" + i,\n          onClick: !disabled ? partial(handleClick, type, i) : null\n        }, showMeridian && type === 'hours' && i === 0 ? '12' : i)));\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('column'),\n      role: \"listitem\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('column-title')\n    }, locale === null || locale === void 0 ? void 0 : locale[type]), /*#__PURE__*/React.createElement(\"ul\", {\n      \"data-type\": type,\n      role: \"menu\"\n    }, items));\n  };\n\n  var time = getTime({\n    format: format,\n    timeZone: timeZone,\n    date: date,\n    showMeridian: showMeridian\n  });\n  var classes = merge(className, rootPrefix(classPrefix));\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    role: \"list\"\n  }, DateUtils.omitHideDisabledProps(rest), {\n    ref: ref,\n    className: classes\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: prefix('content')\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: prefix('row'),\n    ref: rowRef\n  }, renderColumn('hours', time.hours), renderColumn('minutes', time.minutes), renderColumn('seconds', time.seconds))));\n});\nTimeDropdown.displayName = 'TimeDropdown';\nTimeDropdown.defaultProps = defaultProps;\nTimeDropdown.propTypes = {\n  show: PropTypes.bool,\n  showMeridian: PropTypes.bool,\n  className: PropTypes.string,\n  classPrefix: PropTypes.string,\n  disabledDate: PropTypes.func,\n  disabledHours: PropTypes.func,\n  disabledMinutes: PropTypes.func,\n  disabledSeconds: PropTypes.func,\n  hideHours: PropTypes.func,\n  hideMinutes: PropTypes.func,\n  hideSeconds: PropTypes.func\n};\nexport default TimeDropdown;","map":{"version":3,"sources":["C:/Programowanie/store/node_modules/rsuite/es/Calendar/TimeDropdown.js"],"names":["_extends","_objectWithoutPropertiesLoose","React","useEffect","useRef","PropTypes","getPosition","scrollTop","partial","camelCase","isNumber","DateUtils","scrollTopAnimation","TimeZone","useClassNames","useCalendarContext","defaultProps","classPrefix","as","getRanges","meridian","hours","start","end","minutes","seconds","getMeridianHours","getTime","props","format","timeZone","date","showMeridian","time","zonedDate","nextTime","test","getHours","getMinutes","getSeconds","scrollTo","row","Object","entries","forEach","_ref","type","value","container","querySelector","node","_getPosition","top","TimeDropdown","forwardRef","ref","Component","className","show","rest","_useCalendarContext","locale","onSelect","onChangePageTime","rowRef","current","handleClick","d","event","nextDate","Date","setHours","setMinutes","setSeconds","_useClassNames","prefix","rootPrefix","merge","renderColumn","active","_getRanges$type","items","hideFunc","disabledFunc","i","disabled","itemClasses","push","createElement","key","role","tabIndex","onClick","classes","omitHideDisabledProps","displayName","propTypes","bool","string","disabledDate","func","disabledHours","disabledMinutes","disabledSeconds","hideHours","hideMinutes","hideSeconds"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { getPosition, scrollTop } from 'dom-lib';\nimport partial from 'lodash/partial';\nimport camelCase from 'lodash/camelCase';\nimport isNumber from 'lodash/isNumber';\nimport { DateUtils, scrollTopAnimation, TimeZone, useClassNames } from '../utils';\nimport { useCalendarContext } from './CalendarContext';\nvar defaultProps = {\n  classPrefix: 'calendar-time-dropdown',\n  as: 'div'\n};\n\n/**\n * Get the effective range of hours, minutes and seconds\n * @param meridian\n */\nexport function getRanges(meridian) {\n  return {\n    hours: {\n      start: 0,\n      end: meridian ? 11 : 23\n    },\n    minutes: {\n      start: 0,\n      end: 59\n    },\n    seconds: {\n      start: 0,\n      end: 59\n    }\n  };\n}\n/**\n * Convert the 24-hour clock to the 12-hour clock\n * @param hours\n */\n\nexport function getMeridianHours(hours) {\n  return hours >= 12 ? hours - 12 : hours;\n}\n\nvar getTime = function getTime(props) {\n  var format = props.format,\n      timeZone = props.timeZone,\n      date = props.date,\n      showMeridian = props.showMeridian;\n  var time = date || TimeZone.zonedDate(timeZone);\n  var nextTime = {};\n\n  if (!format) {\n    return nextTime;\n  }\n\n  if (/(H|h)/.test(format)) {\n    var hours = DateUtils.getHours(time);\n    nextTime.hours = showMeridian ? getMeridianHours(hours) : hours;\n  }\n\n  if (/m/.test(format)) {\n    nextTime.minutes = DateUtils.getMinutes(time);\n  }\n\n  if (/s/.test(format)) {\n    nextTime.seconds = DateUtils.getSeconds(time);\n  }\n\n  return nextTime;\n};\n\nvar scrollTo = function scrollTo(time, row) {\n  if (!row) {\n    return;\n  }\n\n  Object.entries(time).forEach(function (_ref) {\n    var type = _ref[0],\n        value = _ref[1];\n    var container = row.querySelector(\"[data-type=\\\"\" + type + \"\\\"]\");\n    var node = container === null || container === void 0 ? void 0 : container.querySelector(\"[data-key=\\\"\" + type + \"-\" + value + \"\\\"]\");\n\n    if (node && container) {\n      var _getPosition = getPosition(node, container),\n          top = _getPosition.top;\n\n      scrollTopAnimation(container, top, scrollTop(container) !== 0);\n    }\n  });\n};\n\nvar TimeDropdown = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var Component = props.as,\n      className = props.className,\n      classPrefix = props.classPrefix,\n      show = props.show,\n      showMeridian = props.showMeridian,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"className\", \"classPrefix\", \"show\", \"showMeridian\"]);\n\n  var _useCalendarContext = useCalendarContext(),\n      locale = _useCalendarContext.locale,\n      format = _useCalendarContext.format,\n      timeZone = _useCalendarContext.timeZone,\n      date = _useCalendarContext.date,\n      onSelect = _useCalendarContext.onChangePageTime;\n\n  var rowRef = useRef(null);\n  useEffect(function () {\n    var time = getTime({\n      format: format,\n      timeZone: timeZone,\n      date: date,\n      showMeridian: showMeridian\n    }); // The currently selected time scrolls to the visible range.\n\n    show && scrollTo(time, rowRef.current);\n  }, [date, format, show, showMeridian, timeZone]);\n\n  var handleClick = function handleClick(type, d, event) {\n    var nextDate = date || new Date();\n\n    switch (type) {\n      case 'hours':\n        nextDate = DateUtils.setHours(date, d);\n        break;\n\n      case 'minutes':\n        nextDate = DateUtils.setMinutes(date, d);\n        break;\n\n      case 'seconds':\n        nextDate = DateUtils.setSeconds(date, d);\n        break;\n    }\n\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(nextDate, event);\n  };\n\n  var _useClassNames = useClassNames(classPrefix),\n      prefix = _useClassNames.prefix,\n      rootPrefix = _useClassNames.rootPrefix,\n      merge = _useClassNames.merge;\n\n  var renderColumn = function renderColumn(type, active) {\n    if (!isNumber(active)) {\n      return null;\n    }\n\n    var _getRanges$type = getRanges(showMeridian)[type],\n        start = _getRanges$type.start,\n        end = _getRanges$type.end;\n    var items = [];\n    var hideFunc = props[camelCase(\"hide_\" + type)];\n    var disabledFunc = props[camelCase(\"disabled_\" + type)];\n\n    for (var i = start; i <= end; i += 1) {\n      if (!(hideFunc === null || hideFunc === void 0 ? void 0 : hideFunc(i, date))) {\n        var disabled = disabledFunc === null || disabledFunc === void 0 ? void 0 : disabledFunc(i, date);\n        var itemClasses = prefix('cell', {\n          'cell-active': active === i,\n          'cell-disabled': disabled\n        });\n        items.push( /*#__PURE__*/React.createElement(\"li\", {\n          key: i,\n          role: \"menuitem\"\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          role: \"button\",\n          className: itemClasses,\n          tabIndex: -1,\n          \"data-key\": type + \"-\" + i,\n          onClick: !disabled ? partial(handleClick, type, i) : null\n        }, showMeridian && type === 'hours' && i === 0 ? '12' : i)));\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('column'),\n      role: \"listitem\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('column-title')\n    }, locale === null || locale === void 0 ? void 0 : locale[type]), /*#__PURE__*/React.createElement(\"ul\", {\n      \"data-type\": type,\n      role: \"menu\"\n    }, items));\n  };\n\n  var time = getTime({\n    format: format,\n    timeZone: timeZone,\n    date: date,\n    showMeridian: showMeridian\n  });\n  var classes = merge(className, rootPrefix(classPrefix));\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    role: \"list\"\n  }, DateUtils.omitHideDisabledProps(rest), {\n    ref: ref,\n    className: classes\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: prefix('content')\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: prefix('row'),\n    ref: rowRef\n  }, renderColumn('hours', time.hours), renderColumn('minutes', time.minutes), renderColumn('seconds', time.seconds))));\n});\nTimeDropdown.displayName = 'TimeDropdown';\nTimeDropdown.defaultProps = defaultProps;\nTimeDropdown.propTypes = {\n  show: PropTypes.bool,\n  showMeridian: PropTypes.bool,\n  className: PropTypes.string,\n  classPrefix: PropTypes.string,\n  disabledDate: PropTypes.func,\n  disabledHours: PropTypes.func,\n  disabledMinutes: PropTypes.func,\n  disabledSeconds: PropTypes.func,\n  hideHours: PropTypes.func,\n  hideMinutes: PropTypes.func,\n  hideSeconds: PropTypes.func\n};\nexport default TimeDropdown;"]},"metadata":{},"sourceType":"module"}