{"ast":null,"code":"import _classCallCheck from\"C:/Programowanie/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Programowanie/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Programowanie/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Programowanie/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import{NavLink}from\"react-router-dom\";import FetchProductImg from\"../../Components/Shop/FetchProductImg\";import $ from\"jquery\";import Promocode from\"../../Components/Shop/Promocode\";import{values}from\"lodash\";import session from\"express-session\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Cart=/*#__PURE__*/function(_Component){_inherits(Cart,_Component);var _super=_createSuper(Cart);function Cart(props){var _this;_classCallCheck(this,Cart);_this=_super.call(this,props);_this._isMounted=false;_this.componentDidMount=function(){_this._isMounted=true;_this.fetchData();_this.handlePromocode(\"\");};_this.componentDidUpdate=function(prevProps,prevState){if(prevState.cart!==_this.state.cart){console.log(prevState.cart);console.log(_this.state.cart);_this._isMounted=true;_this.fetchData();_this.sendGetRequest();_this._isMounted=false;}};_this.sendGetRequest=function(){_this._isMounted=true;axios.get(\"/api/users/getUser\",{withCredentials:true}).then(function(response){if(response.data==\"\"){_this.setState({path:\"/shop/cart/login\"});}else{_this.setState({path:\"/shop/cart/checkout/1\"});}}).catch(function(error){console.log(error);});};_this.fetchData=function(){axios.get(\"/api/cart\").then(function(response){if(_this._isMounted){_this.setState({cart:response.data});$(\".items-counter\").text(response.data.itemsTotal);console.log(response);}}).catch(function(error){console.log(error);});};_this.emptyCart=function(){_this._isMounted=true;axios.delete(\"/api/cart/empty-cart\").then(function(response){if(response.data!=null&&response.data<1){response.data=response.data;}else{response.data=false;}_this.setState({cart:response.data});console.log(response);}).catch(function(error){console.log(error);});console.log(\"empty clicked\");};_this.alterItemQuantity=function(productId,size,quantity){_this._isMounted=true;axios.post(\"/api/cart\",{productId:productId,size:size,quantity:quantity}).then(function(response){console.log(response);_this.fetchData();},function(error){console.log(error);});};_this.handleQuantityChange=function(productId,size,quantity,currentQuantity){var alteredQuantity=currentQuantity===1&&quantity===-1?0:quantity;_this.alterItemQuantity(productId,size,alteredQuantity);};_this.handlePromocode=function(errorDisplay){if(!sessionStorage.code&&document.querySelector(\".cart-container__table__code input\")&&errorDisplay===\"active\"){sessionStorage.setItem(\"code\",document.querySelector(\".cart-container__table__code input\").value);}if(sessionStorage.code){document.querySelector(\".cart-container__table__code input\").disabled=true;document.querySelector(\".cart-container__table__code input\").value=sessionStorage.code;$(\".cart-container__table__code\").addClass(\"active\");}var code=sessionStorage.code;axios.get(\"/api/coupons/\"+code).then(function(response){console.log(_this.state.cart.items.length);for(var i=0;i<_this.state.cart.items.length;i++){if(response.data[0].products==\"*\"||response.data[0].products.findIndex(function(x){return x=_this.state.cart.items[i].model;})>-1){_this._isMounted=true;axios.post(\"/api/cart\",{productId:_this.state.cart.items[i].productId,size:_this.state.cart.items[i].size,quantity:-2,discount:response.data[0].discount_percent==null?response.data[0].discount_abs:response.data[0].discount_percent*_this.state.cart.items[i].price/100}).then(function(response){console.log(response);_this.fetchData();$(\".cart-container__table__code\").addClass(errorDisplay);},function(error){console.log(error);});}}$(\".cart-container__table__code__error\").removeClass(errorDisplay);}).catch(function(error){$(\".cart-container__table__code__error\").addClass(errorDisplay);sessionStorage.removeItem(\"code\");document.querySelector(\".cart-container__table__code input\").disabled=false;$(\".cart-container__table__code\").removeClass(errorDisplay);});};_this.state={cart:[],discount:null,path:\"/shop/cart/login\"};_this.props=props;return _this;}_createClass(Cart,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._isMounted=false;}},{key:\"render\",value:function render(){var _this2=this;var CartMapping=function CartMapping(){var cart={};if(_this2.state.cart!=null&&_this2.state.cart.length<1){_this2.state.cart=false;}if(_this2.state.cart){cart=_this2.state.cart.items.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{className:\"cart-container__table__products__item\",children:[/*#__PURE__*/_jsxs(NavLink,{to:\"/shop/\"+item.category+\"/\"+item.productId,children:[/*#__PURE__*/_jsx(FetchProductImg,{className:item.model,link:item.model}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container__table__products__item__info\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"cart__name\",children:item.productName}),/*#__PURE__*/_jsxs(\"h3\",{className:\"cart__model\",children:[\"Model: \",item.model]}),/*#__PURE__*/_jsxs(\"h3\",{className:\"cart__size\",children:[\"Size: \",item.size]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart__quantityHandler\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"cart__quantityHandler__add\",onClick:function onClick(){return _this2.handleQuantityChange(item.productId,item.size,1,item.quantity);},children:/*#__PURE__*/_jsx(\"h4\",{children:\"+\"})}),/*#__PURE__*/_jsx(\"h2\",{type:\"text\",className:\"cart__qty\",children:item.quantity}),/*#__PURE__*/_jsx(\"button\",{className:\"cart__quantityHandler__deduct\",onClick:function onClick(){return _this2.handleQuantityChange(item.productId,item.size,-1,item.quantity);},children:/*#__PURE__*/_jsx(\"h4\",{children:\"-\"})})]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"cart__total\",children:[item.price,\" PLN\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"cart__exit\",onClick:function onClick(){return _this2.alterItemQuantity(item.productId,item.size,0);},children:/*#__PURE__*/_jsx(\"h2\",{children:\"\\u2A09\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-container__table__products__item__line\"})]},item.productId+item.size);});}else{cart=/*#__PURE__*/_jsx(\"li\",{className:\"cart-container__table__products__item__line__empty\",children:\"The cart is empty\"});}return cart;};return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container__tooltip\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"cart\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"cart-container__tooltip__icons\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"active\",children:/*#__PURE__*/_jsxs(\"svg\",{version:\"1.1\",className:\"cart__icon\",xmlns:\"http://www.w3.org/2000/svg\",x:\"0px\",y:\"0px\",viewBox:\"0 0 512 512\",enableBackground:\"new 0 0 512 512;\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M151.1,332.1L151.1,332.1C151.1,332.1,151.2,332.1,151.1,332.1l249.2,0c6.1,0,11.5-4.1,13.2-10l55-192.4\\r c1.2-4.1,0.4-8.6-2.2-12c-2.6-3.4-6.7-5.5-11-5.5H119.4L109.6,68c-1.4-6.3-7-10.8-13.4-10.8H13.7C6.2,57.3,0,63.4,0,71\\r s6.2,13.7,13.7,13.7h71.4c1.7,7.8,47,211.5,49.6,223.2c-14.6,6.3-24.8,20.9-24.8,37.8c0,22.7,18.5,41.2,41.2,41.2h249.2\\r c7.6,0,13.7-6.2,13.7-13.7c0-7.6-6.2-13.7-13.7-13.7H151.1c-7.6,0-13.7-6.2-13.7-13.7C137.4,338.2,143.5,332.1,151.1,332.1z\\r M437,139.7l-47.1,164.9H162.2l-36.6-164.9H437z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M137.4,428.2c0,22.7,18.5,41.2,41.2,41.2s41.2-18.5,41.2-41.2S201.4,387,178.6,387S137.4,405.5,137.4,428.2z M178.6,414.5\\r c7.6,0,13.7,6.2,13.7,13.7c0,7.6-6.2,13.7-13.7,13.7c-7.6,0-13.7-6.2-13.7-13.7C164.9,420.7,171,414.5,178.6,414.5z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M331.6,428.2c0,22.7,18.5,41.2,41.2,41.2c22.7,0,41.2-18.5,41.2-41.2S395.5,387,372.8,387\\r C350.1,387,331.6,405.5,331.6,428.2z M372.8,414.5c7.6,0,13.7,6.2,13.7,13.7c0,7.6-6.2,13.7-13.7,13.7c-7.6,0-13.7-6.2-13.7-13.7\\r C359.1,420.7,365.2,414.5,372.8,414.5z\"})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"svg\",{version:\"1.1\",className:\"cart__icon\",xmlns:\"http://www.w3.org/2000/svg\",x:\"0px\",y:\"0px\",viewBox:\"0 0 512 512\",enableBackground:\"new 0 0 512 512;\",children:[/*#__PURE__*/_jsx(\"g\",{children:/*#__PURE__*/_jsx(\"path\",{d:\"M256,4.3c-97.6,0-177,79.4-177,177c0,33,9.1,65.2,26.4,93.1l140.5,226.4c2.7,4.3,7.4,7,12.5,7c0,0,0.1,0,0.1,0\\r c5.1,0,9.9-2.8,12.5-7.2L408,271.9c16.3-27.3,25-58.7,25-90.7C433,83.7,353.6,4.3,256,4.3z M382.7,256.8L258.2,464.6L130.5,258.8\\r c-14.4-23.2-22.2-50-22.2-77.5c0-81.3,66.4-147.7,147.7-147.7s147.6,66.4,147.6,147.7C403.6,207.9,396.3,234.1,382.7,256.8z\"})}),/*#__PURE__*/_jsx(\"g\",{children:/*#__PURE__*/_jsx(\"path\",{d:\"M256,92.8c-48.8,0-88.5,39.7-88.5,88.5c0,48.5,39.1,88.5,88.5,88.5c50.1,0,88.5-40.5,88.5-88.5\\r C344.5,132.5,304.8,92.8,256,92.8z M256,240.5c-32.7,0-59.2-26.6-59.2-59.2c0-32.5,26.7-59.2,59.2-59.2s59.1,26.7,59.1,59.2\\r C315.1,213.4,289.2,240.5,256,240.5z\"})})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"svg\",{version:\"1.1\",className:\"cart__icon\",xmlns:\"http://www.w3.org/2000/svg\",x:\"0px\",y:\"0px\",viewBox:\"0 0 512 512\",enableBackground:\"new 0 0 512 512;\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M507.8,284.6C507.8,284.6,507.8,284.6,507.8,284.6L412.4,45.2c-2-5.1-7.8-7.6-12.9-5.5c0,0,0,0,0,0l-386.8,154\\r c-1.6,0.7-2.9,1.8-4,3.2c-3.2,1.7-5.2,5-5.3,8.6v257.7c0,5.5,4.4,9.9,9.9,9.9h416.4c5.5,0,9.9-4.4,9.9-9.9V322.4l62.6-24.9\\r C507.3,295.4,509.8,289.7,507.8,284.6z M419.9,453.2H23.3V215.3h396.5V453.2z M168.9,195.6l166-66.1\\r c14.8,15.6,35.3,24.4,56.8,24.5l16.6,41.6H168.9z M439.7,301.1v-95.7c0-5.5-4.4-9.9-9.9-9.9h-0.2l-21-52.8\\r c-0.2-0.4-0.5-0.9-0.8-1.2c-1.1-4.8-5.5-8-10.4-7.6c-20,1.8-39.6-6.6-52-22.4c-3.1-3.8-8.5-4.8-12.7-2.2\\r c-0.5,0.1-0.9,0.1-1.4,0.3l-202.6,80.7c-2.5,1-4.4,2.9-5.4,5.3H61.7l336-133.8l88,221L439.7,301.1z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M50.2,386.3c19.2,5.7,34.3,20.7,40,40c1.3,4.2,5.1,7.1,9.5,7.1c0.5,0,1-0.1,1.5-0.2c0.4,0.1,0.9,0.2,1.4,0.3h237.9\\r c0.4-0.1,0.8-0.1,1.2-0.2c5,1.2,9.9-1.8,11.1-6.8c0,0,0,0,0-0.1c5.7-19.3,20.8-34.3,40-40c4.7-1.4,7.6-6.1,6.8-10.9\\r c0.1-0.5,0.2-1,0.3-1.5v-79.3c-0.1-0.5-0.2-1-0.3-1.5c0.8-4.8-2.1-9.5-6.8-10.9c-19.3-5.7-34.3-20.8-40-40\\r c-1.4-4.7-6.1-7.6-11-6.8c-0.5-0.1-0.9-0.2-1.4-0.3H102.6c-0.5,0.1-1,0.2-1.5,0.3c-4.8-0.8-9.5,2.1-10.9,6.8\\r c-5.7,19.3-20.8,34.3-40,40c-4.7,1.4-7.6,6.1-6.8,10.9c-0.1,0.5-0.2,1-0.3,1.5v79.3c0.1,0.5,0.1,0.9,0.3,1.4\\r C42.6,380.2,45.5,384.9,50.2,386.3z M63,298.7c19.9-8,35.7-23.8,43.7-43.7h229.9c8,19.9,23.8,35.7,43.7,43.7v71.3\\r c-19.9,8-35.7,23.8-43.7,43.7H106.7c-8-19.9-23.8-35.7-43.7-43.7V298.7z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M221.6,393.8c32.9,0,59.5-26.6,59.5-59.5s-26.6-59.5-59.5-59.5s-59.5,26.6-59.5,59.5\\r C162.1,367.1,188.8,393.7,221.6,393.8z M221.6,294.6c21.9,0,39.7,17.8,39.7,39.7c0,21.9-17.8,39.7-39.7,39.7\\r s-39.7-17.8-39.7-39.7C181.9,312.4,199.7,294.6,221.6,294.6z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M112.5,349.2c8.2,0,14.9-6.7,14.9-14.9s-6.7-14.9-14.9-14.9s-14.9,6.7-14.9,14.9C97.7,342.5,104.3,349.2,112.5,349.2z\\r M112.5,329.3c2.7,0,5,2.2,5,5c0,2.7-2.2,5-5,5c-2.7,0-5-2.2-5-5C107.6,331.6,109.8,329.3,112.5,329.3z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M330.6,349.2c8.2,0,14.9-6.7,14.9-14.9s-6.7-14.9-14.9-14.9s-14.9,6.7-14.9,14.9C315.8,342.5,322.4,349.2,330.6,349.2z\\r M330.6,329.3c2.7,0,5,2.2,5,5c0,2.7-2.2,5-5,5s-5-2.2-5-5C325.7,331.6,327.9,329.3,330.6,329.3z\"})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container__table\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"cart-container__table__legend\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"cart-container__table__legend__item\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Item\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"cart-container__table__legend__quantity\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Quantity\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"cart-container__table__legend__subtotal\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Price\"})})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"cart-container__table__products\",children:/*#__PURE__*/_jsx(CartMapping,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container__table__summary\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"cart-container__table__summary__title\",children:\"Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container__table__subtotal\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"cart-container__table__subtotal__title\",children:\"Subtotal\"}),/*#__PURE__*/_jsxs(\"h3\",{className:\"cart-container__table__subtotal__value\",children:[this.state.cart.subTotal||0,\" PLN\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container__table__discount \"+(this.state.cart.discountTotal===0||!this.state.cart?\"empty\":\"\"),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"cart-container__table__discount__title\",children:\"Discount\"}),/*#__PURE__*/_jsxs(\"h3\",{className:\"cart-container__table__discount__value \",children:[!this.state.cart?0:this.state.cart.discountTotal,\" PLN\"]})]}),/*#__PURE__*/_jsx(Promocode,{codeHandler:function codeHandler(){return _this2.handlePromocode(\"active\");}}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container__table__total\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"cart-container__table__total__title\",children:\"Total\"}),/*#__PURE__*/_jsxs(\"h2\",{className:\"cart-container__table__total__items\",children:[this.state.cart.itemsTotal||0,\" \",this.state.cart.itemsTotal==1?\"item\":\"items\"]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"cart-container__table__total__value\",children:[this.state.cart.subTotal+this.state.cart.discountTotal||0,\" PLN\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container__table__buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"cart-container__table__buttons__continue-shopping\",children:/*#__PURE__*/_jsx(NavLink,{to:\"/shop/all\",children:\"Continue shopping\"})}),/*#__PURE__*/_jsx(NavLink,{to:this.state.path,children:/*#__PURE__*/_jsx(\"button\",{className:\"cart-container__table__buttons__checkout\",children:\"Proceed to checkout\"})})]})]})]})]});}}]);return Cart;}(Component);export default Cart;","map":{"version":3,"sources":["C:/Programowanie/store/src/Containers/Shop/Cart.js"],"names":["React","Component","axios","NavLink","FetchProductImg","$","Promocode","values","session","Cart","props","_isMounted","componentDidMount","fetchData","handlePromocode","componentDidUpdate","prevProps","prevState","cart","state","console","log","sendGetRequest","get","withCredentials","then","response","data","setState","path","catch","error","text","itemsTotal","emptyCart","delete","alterItemQuantity","productId","size","quantity","post","handleQuantityChange","currentQuantity","alteredQuantity","errorDisplay","sessionStorage","code","document","querySelector","setItem","value","disabled","addClass","items","length","i","products","findIndex","x","model","discount","discount_percent","discount_abs","price","removeClass","removeItem","CartMapping","map","item","category","productName","subTotal","discountTotal"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport FetchProductImg from \"../../Components/Shop/FetchProductImg\";\r\nimport $ from \"jquery\";\r\nimport Promocode from \"../../Components/Shop/Promocode\";\r\nimport { values } from \"lodash\";\r\nimport session from \"express-session\";\r\n\r\nclass Cart extends Component {\r\n  _isMounted = false;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      cart: [],\r\n      discount: null,\r\n      path: \"/shop/cart/login\"\r\n    };\r\n\r\n    this.props = props;\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this._isMounted = true;\r\n    this.fetchData();\r\n    this.handlePromocode(\"\")\r\n    \r\n\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  componentDidUpdate = (prevProps, prevState) => {\r\n    if (prevState.cart !== this.state.cart) {\r\n      console.log(prevState.cart);\r\n      console.log(this.state.cart);\r\n      this._isMounted = true;\r\n      this.fetchData();\r\n      this.sendGetRequest()\r\n      this._isMounted = false;\r\n    }\r\n  };\r\n\r\n  sendGetRequest = () => {\r\n    this._isMounted = true;\r\n    axios\r\n      .get(\"/api/users/getUser\", {withCredentials: true})\r\n      .then((response) => {\r\n        if (response.data == \"\") {\r\n          this.setState({path: \"/shop/cart/login\"})\r\n        } else {\r\n          this.setState({path: \"/shop/cart/checkout/1\"})\r\n        }\r\n\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  fetchData = () => {\r\n    axios\r\n      .get(\"/api/cart\")\r\n      .then((response) => {\r\n        if (this._isMounted) {\r\n          this.setState({\r\n            cart: response.data,\r\n          });\r\n\r\n          $(\".items-counter\").text(response.data.itemsTotal);\r\n\r\n          console.log(response);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  emptyCart = () => {\r\n    this._isMounted = true;\r\n\r\n    axios\r\n      .delete(\"/api/cart/empty-cart\")\r\n      .then((response) => {\r\n        if (response.data != null && response.data < 1) {\r\n          response.data = response.data;\r\n        } else {\r\n          response.data = false;\r\n        }\r\n\r\n        this.setState({\r\n          cart: response.data,\r\n        });\r\n\r\n        console.log(response);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n\r\n    console.log(\"empty clicked\");\r\n  };\r\n\r\n  alterItemQuantity = (productId, size, quantity) => {\r\n    this._isMounted = true;\r\n\r\n    axios\r\n      .post(\"/api/cart\", {\r\n        productId: productId,\r\n        size: size,\r\n        quantity: quantity,\r\n      })\r\n      .then(\r\n        (response) => {\r\n          console.log(response);\r\n          this.fetchData();\r\n        },\r\n        (error) => {\r\n          console.log(error);\r\n        }\r\n      );\r\n  };\r\n\r\n  handleQuantityChange = (productId, size, quantity, currentQuantity) => {\r\n    const alteredQuantity =\r\n      currentQuantity === 1 && quantity === -1 ? 0 : quantity;\r\n\r\n    this.alterItemQuantity(productId, size, alteredQuantity);\r\n  };\r\n\r\n  handlePromocode = (errorDisplay) => {\r\n\r\n    if (!sessionStorage.code && document.querySelector(\".cart-container__table__code input\") && errorDisplay === \"active\") {\r\n      sessionStorage.setItem(\"code\", document.querySelector(\".cart-container__table__code input\").value)\r\n      \r\n\r\n    }\r\n\r\n    if (sessionStorage.code) {\r\n      document.querySelector(\".cart-container__table__code input\").disabled = true;\r\n      document.querySelector(\".cart-container__table__code input\").value = sessionStorage.code\r\n      $(\".cart-container__table__code\").addClass(\"active\")\r\n    }\r\n\r\n    \r\n    let code = sessionStorage.code\r\n    \r\n\r\n    axios\r\n      .get(\"/api/coupons/\" + code)\r\n      .then((response) => {\r\n        console.log(this.state.cart.items.length)\r\n        for (var i = 0; i < this.state.cart.items.length; i++) {\r\n          if (\r\n            response.data[0].products == \"*\" ||\r\n            response.data[0].products.findIndex(\r\n              (x) => (x = this.state.cart.items[i].model)\r\n            ) > -1\r\n          ) {\r\n\r\n            this._isMounted = true;\r\n            axios\r\n              .post(\"/api/cart\", {\r\n                productId: this.state.cart.items[i].productId,\r\n                size: this.state.cart.items[i].size,\r\n                quantity: -2,\r\n                discount: response.data[0].discount_percent == null ? response.data[0].discount_abs : response.data[0].discount_percent*this.state.cart.items[i].price/100\r\n              })\r\n              .then(\r\n                (response) => {\r\n                  console.log(response);\r\n                  this.fetchData();\r\n\r\n                  \r\n                    $(\".cart-container__table__code\").addClass(errorDisplay)\r\n                  \r\n                },\r\n                (error) => {\r\n                  console.log(error);\r\n                }\r\n              );\r\n          }\r\n        }\r\n        \r\n        \r\n        \r\n        \r\n        $(\".cart-container__table__code__error\").removeClass(errorDisplay)\r\n\r\n      })\r\n      .catch((error) => {\r\n        $(\".cart-container__table__code__error\").addClass(errorDisplay)\r\n        sessionStorage.removeItem(\"code\")\r\n        document.querySelector(\".cart-container__table__code input\").disabled = false;\r\n        $(\".cart-container__table__code\").removeClass(errorDisplay)\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const CartMapping = () => {\r\n      let cart = {};\r\n\r\n      if (this.state.cart != null && this.state.cart.length < 1) {\r\n        this.state.cart = false;\r\n      }\r\n\r\n      if (this.state.cart) {\r\n        cart = this.state.cart.items.map((item) => (\r\n          <li\r\n            className=\"cart-container__table__products__item\"\r\n            key={item.productId + item.size}\r\n          >\r\n            <NavLink to={\"/shop/\" + item.category + \"/\" + item.productId}>\r\n              <FetchProductImg className={item.model} link={item.model} />\r\n              <div className=\"cart-container__table__products__item__info\">\r\n                <h2 className=\"cart__name\">{item.productName}</h2>\r\n                <h3 className=\"cart__model\">Model: {item.model}</h3>\r\n                <h3 className=\"cart__size\">Size: {item.size}</h3>\r\n              </div>\r\n            </NavLink>\r\n            <div className=\"cart__quantityHandler\">\r\n              <button\r\n                className=\"cart__quantityHandler__add\"\r\n                onClick={() =>\r\n                  this.handleQuantityChange(\r\n                    item.productId,\r\n                    item.size,\r\n                    1,\r\n                    item.quantity\r\n                  )\r\n                }\r\n              >\r\n                <h4>+</h4>\r\n              </button>\r\n              <h2 type=\"text\" className=\"cart__qty\">\r\n                {item.quantity}\r\n              </h2>\r\n              <button\r\n                className=\"cart__quantityHandler__deduct\"\r\n                onClick={() =>\r\n                  this.handleQuantityChange(\r\n                    item.productId,\r\n                    item.size,\r\n                    -1,\r\n                    item.quantity\r\n                  )\r\n                }\r\n              >\r\n                <h4>-</h4>\r\n              </button>\r\n            </div>\r\n            <h4 className=\"cart__total\">{item.price} PLN</h4>\r\n            <button\r\n              className=\"cart__exit\"\r\n              onClick={() =>\r\n                this.alterItemQuantity(item.productId, item.size, 0)\r\n              }\r\n            >\r\n              <h2>⨉</h2>\r\n            </button>\r\n            <div className=\"cart-container__table__products__item__line\"></div>\r\n          </li>\r\n        ));\r\n      } else {\r\n        cart = (\r\n          <li className=\"cart-container__table__products__item__line__empty\">\r\n            The cart is empty\r\n          </li>\r\n        );\r\n      }\r\n\r\n      return cart;\r\n    };\r\n\r\n    return (\r\n      <div className=\"cart-container\">\r\n        <div className=\"cart-container__tooltip\">\r\n          <h1>cart</h1>\r\n          <ul className=\"cart-container__tooltip__icons\">\r\n            <li className=\"active\">\r\n              <svg\r\n                version=\"1.1\"\r\n                className=\"cart__icon\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                x=\"0px\"\r\n                y=\"0px\"\r\n                viewBox=\"0 0 512 512\"\r\n                enableBackground=\"new 0 0 512 512;\"\r\n              >\r\n                <path\r\n                  d=\"M151.1,332.1L151.1,332.1C151.1,332.1,151.2,332.1,151.1,332.1l249.2,0c6.1,0,11.5-4.1,13.2-10l55-192.4\r\n\tc1.2-4.1,0.4-8.6-2.2-12c-2.6-3.4-6.7-5.5-11-5.5H119.4L109.6,68c-1.4-6.3-7-10.8-13.4-10.8H13.7C6.2,57.3,0,63.4,0,71\r\n\ts6.2,13.7,13.7,13.7h71.4c1.7,7.8,47,211.5,49.6,223.2c-14.6,6.3-24.8,20.9-24.8,37.8c0,22.7,18.5,41.2,41.2,41.2h249.2\r\n\tc7.6,0,13.7-6.2,13.7-13.7c0-7.6-6.2-13.7-13.7-13.7H151.1c-7.6,0-13.7-6.2-13.7-13.7C137.4,338.2,143.5,332.1,151.1,332.1z\r\n\t M437,139.7l-47.1,164.9H162.2l-36.6-164.9H437z\"\r\n                />\r\n                <path\r\n                  d=\"M137.4,428.2c0,22.7,18.5,41.2,41.2,41.2s41.2-18.5,41.2-41.2S201.4,387,178.6,387S137.4,405.5,137.4,428.2z M178.6,414.5\r\n\tc7.6,0,13.7,6.2,13.7,13.7c0,7.6-6.2,13.7-13.7,13.7c-7.6,0-13.7-6.2-13.7-13.7C164.9,420.7,171,414.5,178.6,414.5z\"\r\n                />\r\n                <path\r\n                  d=\"M331.6,428.2c0,22.7,18.5,41.2,41.2,41.2c22.7,0,41.2-18.5,41.2-41.2S395.5,387,372.8,387\r\n\tC350.1,387,331.6,405.5,331.6,428.2z M372.8,414.5c7.6,0,13.7,6.2,13.7,13.7c0,7.6-6.2,13.7-13.7,13.7c-7.6,0-13.7-6.2-13.7-13.7\r\n\tC359.1,420.7,365.2,414.5,372.8,414.5z\"\r\n                />\r\n              </svg>\r\n            </li>\r\n            <li>\r\n              <svg\r\n                version=\"1.1\"\r\n                className=\"cart__icon\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                x=\"0px\"\r\n                y=\"0px\"\r\n                viewBox=\"0 0 512 512\"\r\n                enableBackground=\"new 0 0 512 512;\"\r\n              >\r\n                <g>\r\n                  <path\r\n                    d=\"M256,4.3c-97.6,0-177,79.4-177,177c0,33,9.1,65.2,26.4,93.1l140.5,226.4c2.7,4.3,7.4,7,12.5,7c0,0,0.1,0,0.1,0\r\n\t\t\t\tc5.1,0,9.9-2.8,12.5-7.2L408,271.9c16.3-27.3,25-58.7,25-90.7C433,83.7,353.6,4.3,256,4.3z M382.7,256.8L258.2,464.6L130.5,258.8\r\n\t\t\t\tc-14.4-23.2-22.2-50-22.2-77.5c0-81.3,66.4-147.7,147.7-147.7s147.6,66.4,147.6,147.7C403.6,207.9,396.3,234.1,382.7,256.8z\"\r\n                  />\r\n                </g>\r\n\r\n                <g>\r\n                  <path\r\n                    d=\"M256,92.8c-48.8,0-88.5,39.7-88.5,88.5c0,48.5,39.1,88.5,88.5,88.5c50.1,0,88.5-40.5,88.5-88.5\r\n\t\t\t\tC344.5,132.5,304.8,92.8,256,92.8z M256,240.5c-32.7,0-59.2-26.6-59.2-59.2c0-32.5,26.7-59.2,59.2-59.2s59.1,26.7,59.1,59.2\r\n\t\t\t\tC315.1,213.4,289.2,240.5,256,240.5z\"\r\n                  />\r\n                </g>\r\n              </svg>\r\n            </li>\r\n            <li>\r\n              <svg\r\n                version=\"1.1\"\r\n                className=\"cart__icon\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                x=\"0px\"\r\n                y=\"0px\"\r\n                viewBox=\"0 0 512 512\"\r\n                enableBackground=\"new 0 0 512 512;\"\r\n              >\r\n                <path\r\n                  d=\"M507.8,284.6C507.8,284.6,507.8,284.6,507.8,284.6L412.4,45.2c-2-5.1-7.8-7.6-12.9-5.5c0,0,0,0,0,0l-386.8,154\r\n\t\t\t\tc-1.6,0.7-2.9,1.8-4,3.2c-3.2,1.7-5.2,5-5.3,8.6v257.7c0,5.5,4.4,9.9,9.9,9.9h416.4c5.5,0,9.9-4.4,9.9-9.9V322.4l62.6-24.9\r\n\t\t\t\tC507.3,295.4,509.8,289.7,507.8,284.6z M419.9,453.2H23.3V215.3h396.5V453.2z M168.9,195.6l166-66.1\r\n\t\t\t\tc14.8,15.6,35.3,24.4,56.8,24.5l16.6,41.6H168.9z M439.7,301.1v-95.7c0-5.5-4.4-9.9-9.9-9.9h-0.2l-21-52.8\r\n\t\t\t\tc-0.2-0.4-0.5-0.9-0.8-1.2c-1.1-4.8-5.5-8-10.4-7.6c-20,1.8-39.6-6.6-52-22.4c-3.1-3.8-8.5-4.8-12.7-2.2\r\n\t\t\t\tc-0.5,0.1-0.9,0.1-1.4,0.3l-202.6,80.7c-2.5,1-4.4,2.9-5.4,5.3H61.7l336-133.8l88,221L439.7,301.1z\"\r\n                />\r\n                <path\r\n                  d=\"M50.2,386.3c19.2,5.7,34.3,20.7,40,40c1.3,4.2,5.1,7.1,9.5,7.1c0.5,0,1-0.1,1.5-0.2c0.4,0.1,0.9,0.2,1.4,0.3h237.9\r\n\t\t\t\tc0.4-0.1,0.8-0.1,1.2-0.2c5,1.2,9.9-1.8,11.1-6.8c0,0,0,0,0-0.1c5.7-19.3,20.8-34.3,40-40c4.7-1.4,7.6-6.1,6.8-10.9\r\n\t\t\t\tc0.1-0.5,0.2-1,0.3-1.5v-79.3c-0.1-0.5-0.2-1-0.3-1.5c0.8-4.8-2.1-9.5-6.8-10.9c-19.3-5.7-34.3-20.8-40-40\r\n\t\t\t\tc-1.4-4.7-6.1-7.6-11-6.8c-0.5-0.1-0.9-0.2-1.4-0.3H102.6c-0.5,0.1-1,0.2-1.5,0.3c-4.8-0.8-9.5,2.1-10.9,6.8\r\n\t\t\t\tc-5.7,19.3-20.8,34.3-40,40c-4.7,1.4-7.6,6.1-6.8,10.9c-0.1,0.5-0.2,1-0.3,1.5v79.3c0.1,0.5,0.1,0.9,0.3,1.4\r\n\t\t\t\tC42.6,380.2,45.5,384.9,50.2,386.3z M63,298.7c19.9-8,35.7-23.8,43.7-43.7h229.9c8,19.9,23.8,35.7,43.7,43.7v71.3\r\n\t\t\t\tc-19.9,8-35.7,23.8-43.7,43.7H106.7c-8-19.9-23.8-35.7-43.7-43.7V298.7z\"\r\n                />\r\n                <path\r\n                  d=\"M221.6,393.8c32.9,0,59.5-26.6,59.5-59.5s-26.6-59.5-59.5-59.5s-59.5,26.6-59.5,59.5\r\n\t\t\t\tC162.1,367.1,188.8,393.7,221.6,393.8z M221.6,294.6c21.9,0,39.7,17.8,39.7,39.7c0,21.9-17.8,39.7-39.7,39.7\r\n\t\t\t\ts-39.7-17.8-39.7-39.7C181.9,312.4,199.7,294.6,221.6,294.6z\"\r\n                />\r\n                <path\r\n                  d=\"M112.5,349.2c8.2,0,14.9-6.7,14.9-14.9s-6.7-14.9-14.9-14.9s-14.9,6.7-14.9,14.9C97.7,342.5,104.3,349.2,112.5,349.2z\r\n\t\t\t\t M112.5,329.3c2.7,0,5,2.2,5,5c0,2.7-2.2,5-5,5c-2.7,0-5-2.2-5-5C107.6,331.6,109.8,329.3,112.5,329.3z\"\r\n                />\r\n                <path\r\n                  d=\"M330.6,349.2c8.2,0,14.9-6.7,14.9-14.9s-6.7-14.9-14.9-14.9s-14.9,6.7-14.9,14.9C315.8,342.5,322.4,349.2,330.6,349.2z\r\n\t\t\t\t M330.6,329.3c2.7,0,5,2.2,5,5c0,2.7-2.2,5-5,5s-5-2.2-5-5C325.7,331.6,327.9,329.3,330.6,329.3z\"\r\n                />\r\n              </svg>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div className=\"cart-container__table\">\r\n          <ul className=\"cart-container__table__legend\">\r\n            <li className=\"cart-container__table__legend__item\">\r\n              <h3>Item</h3>\r\n            </li>\r\n            <li className=\"cart-container__table__legend__quantity\">\r\n              <h3>Quantity</h3>\r\n            </li>\r\n            <li className=\"cart-container__table__legend__subtotal\">\r\n              <h3>Price</h3>\r\n            </li>\r\n          </ul>\r\n          <ul className=\"cart-container__table__products\">{<CartMapping />}</ul>\r\n\r\n          <div className=\"cart-container__table__summary\">\r\n            <h4 className=\"cart-container__table__summary__title\">Summary</h4>\r\n\r\n            <div className=\"cart-container__table__subtotal\">\r\n              <h3 className=\"cart-container__table__subtotal__title\">\r\n                Subtotal\r\n              </h3>\r\n\r\n              <h3 className=\"cart-container__table__subtotal__value\">\r\n                {this.state.cart.subTotal || 0} PLN\r\n              </h3>\r\n            </div>\r\n\r\n            <div className={\"cart-container__table__discount \" + ((this.state.cart.discountTotal === 0 || !this.state.cart) ? \"empty\" : \"\")}>\r\n              <h3 className=\"cart-container__table__discount__title\">\r\n                Discount\r\n              </h3>\r\n              <h3 className=\"cart-container__table__discount__value \">\r\n              {!this.state.cart ? 0 : this.state.cart.discountTotal} PLN\r\n              </h3>\r\n              \r\n            </div>\r\n            <Promocode codeHandler={() => this.handlePromocode(\"active\")} />\r\n            <div className=\"cart-container__table__total\">\r\n              <h2 className=\"cart-container__table__total__title\">Total</h2>\r\n              <h2 className=\"cart-container__table__total__items\">\r\n                {this.state.cart.itemsTotal || 0}{\" \"}\r\n                {this.state.cart.itemsTotal == 1 ? \"item\" : \"items\"}\r\n              </h2>\r\n              <h4 className=\"cart-container__table__total__value\">\r\n                {this.state.cart.subTotal + this.state.cart.discountTotal || 0} PLN\r\n              </h4>\r\n            </div>\r\n            <div className=\"cart-container__table__buttons\">\r\n              <button className=\"cart-container__table__buttons__continue-shopping\">\r\n                <NavLink to=\"/shop/all\">Continue shopping</NavLink>\r\n              </button>\r\n              <NavLink to={this.state.path}>\r\n              <button className=\"cart-container__table__buttons__checkout\">\r\n                Proceed to checkout \r\n              </button></NavLink>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Cart;\r\n"]},"metadata":{},"sourceType":"module"}