{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useRef, useState, useCallback, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport omit from 'lodash/omit';\nimport pick from 'lodash/pick';\nimport isNil from 'lodash/isNil';\nimport isFunction from 'lodash/isFunction';\nimport shallowEqual from '../utils/shallowEqual';\nimport DropdownMenu from './DropdownMenu';\nimport { findNodeOfTree, flattenTree, getNodeParents } from '../utils/treeUtils';\nimport { usePaths } from './utils';\nimport { getSafeRegExpString, createChainedFunction, mergeRefs, useControlled, useCustom, useClassNames } from '../utils';\nimport { PickerToggle, PickerOverlay, SearchBar, PickerToggleTrigger, usePickerClassName, usePublicMethods, useToggleKeyDownEvent, useFocusItemValue, pickTriggerPropKeys, omitTriggerPropKeys, listPickerPropTypes } from '../Picker';\nvar defaultProps = {\n  as: 'div',\n  classPrefix: 'picker',\n  cleanable: true,\n  placement: 'bottomStart',\n  appearance: 'default',\n  data: [],\n  disabledItemValues: [],\n  childrenKey: 'children',\n  valueKey: 'value',\n  labelKey: 'label',\n  searchable: true\n};\nvar Cascader = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var Component = props.as,\n      data = props.data,\n      classPrefix = props.classPrefix,\n      childrenKey = props.childrenKey,\n      valueKey = props.valueKey,\n      labelKey = props.labelKey,\n      defaultValue = props.defaultValue,\n      placeholder = props.placeholder,\n      disabled = props.disabled,\n      disabledItemValues = props.disabledItemValues,\n      cleanable = props.cleanable,\n      overrideLocale = props.locale,\n      toggleAs = props.toggleAs,\n      style = props.style,\n      valueProp = props.value,\n      inline = props.inline,\n      menuClassName = props.menuClassName,\n      menuStyle = props.menuStyle,\n      menuWidth = props.menuWidth,\n      menuHeight = props.menuHeight,\n      searchable = props.searchable,\n      parentSelectable = props.parentSelectable,\n      placement = props.placement,\n      id = props.id,\n      renderMenuItem = props.renderMenuItem,\n      renderValue = props.renderValue,\n      renderMenu = props.renderMenu,\n      renderExtraFooter = props.renderExtraFooter,\n      onEnter = props.onEnter,\n      onExited = props.onExited,\n      onClean = props.onClean,\n      onChange = props.onChange,\n      onSelect = props.onSelect,\n      onSearch = props.onSearch,\n      onClose = props.onClose,\n      onOpen = props.onOpen,\n      getChildren = props.getChildren,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"classPrefix\", \"childrenKey\", \"valueKey\", \"labelKey\", \"defaultValue\", \"placeholder\", \"disabled\", \"disabledItemValues\", \"cleanable\", \"locale\", \"toggleAs\", \"style\", \"value\", \"inline\", \"menuClassName\", \"menuStyle\", \"menuWidth\", \"menuHeight\", \"searchable\", \"parentSelectable\", \"placement\", \"id\", \"renderMenuItem\", \"renderValue\", \"renderMenu\", \"renderExtraFooter\", \"onEnter\", \"onExited\", \"onClean\", \"onChange\", \"onSelect\", \"onSearch\", \"onClose\", \"onOpen\", \"getChildren\"]); // Use component active state to support keyboard events.\n\n\n  var _useState = useState(false),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  var _useState2 = useState(flattenTree(data)),\n      flattenData = _useState2[0],\n      setFlattenData = _useState2[1];\n\n  var triggerRef = useRef();\n  var overlayRef = useRef();\n  var targetRef = useRef();\n\n  var _useControlled = useControlled(valueProp, defaultValue),\n      value = _useControlled[0],\n      setValue = _useControlled[1];\n\n  var _usePaths = usePaths({\n    data: data,\n    valueKey: valueKey,\n    childrenKey: childrenKey,\n    value: value\n  }),\n      selectedPaths = _usePaths.selectedPaths,\n      valueToPaths = _usePaths.valueToPaths,\n      columnData = _usePaths.columnData,\n      addColumn = _usePaths.addColumn,\n      setValueToPaths = _usePaths.setValueToPaths,\n      setColumnData = _usePaths.setColumnData,\n      setSelectedPaths = _usePaths.setSelectedPaths,\n      enforceUpdate = _usePaths.enforceUpdate;\n\n  useEffect(function () {\n    setFlattenData(flattenTree(data));\n  }, [data]);\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef,\n    targetRef: targetRef\n  });\n\n  var _useCustom = useCustom('Picker', overrideLocale),\n      locale = _useCustom.locale,\n      rtl = _useCustom.rtl;\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   */\n\n\n  var hasValue = valueToPaths.length > 0 || !isNil(value) && isFunction(renderValue);\n\n  var _useClassNames = useClassNames(classPrefix),\n      prefix = _useClassNames.prefix,\n      merge = _useClassNames.merge;\n\n  var _useState3 = useState(''),\n      searchKeyword = _useState3[0],\n      setSearchKeyword = _useState3[1];\n\n  var someKeyword = useCallback(function (item, keyword) {\n    if (item[labelKey].match(new RegExp(getSafeRegExpString(keyword || searchKeyword), 'i'))) {\n      return true;\n    }\n\n    if (item.parent && someKeyword(item.parent)) {\n      return true;\n    }\n\n    return false;\n  }, [labelKey, searchKeyword]);\n  var getSearchResult = useCallback(function (keyword) {\n    var items = [];\n    var result = flattenData.filter(function (item) {\n      if (item[childrenKey]) {\n        return false;\n      }\n\n      return someKeyword(item, keyword);\n    });\n\n    for (var i = 0; i < result.length; i++) {\n      items.push(result[i]); // A maximum of 100 search results are returned.\n\n      if (i === 99) {\n        return items;\n      }\n    }\n\n    return items;\n  }, [childrenKey, flattenData, someKeyword]); // Used to hover the focuse item  when trigger `onKeydown`\n\n  var _useFocusItemValue = useFocusItemValue(value, {\n    rtl: rtl,\n    data: flattenData,\n    valueKey: valueKey,\n    defaultLayer: (valueToPaths === null || valueToPaths === void 0 ? void 0 : valueToPaths.length) ? valueToPaths.length - 1 : 0,\n    target: function target() {\n      return overlayRef.current;\n    },\n    callback: useCallback(function (value) {\n      enforceUpdate(value, true);\n    }, [enforceUpdate])\n  }),\n      focusItemValue = _useFocusItemValue.focusItemValue,\n      setFocusItemValue = _useFocusItemValue.setFocusItemValue,\n      setLayer = _useFocusItemValue.setLayer,\n      setKeys = _useFocusItemValue.setKeys,\n      onFocusItem = _useFocusItemValue.onKeyDown;\n\n  var handleSearch = useCallback(function (value, event) {\n    var items = getSearchResult(value);\n    setSearchKeyword(value);\n    onSearch === null || onSearch === void 0 ? void 0 : onSearch(value, event);\n\n    if (items === null || items === void 0 ? void 0 : items[0]) {\n      setFocusItemValue(items === null || items === void 0 ? void 0 : items[0]);\n      setLayer(0);\n      setKeys([]);\n    }\n  }, [getSearchResult, onSearch, setFocusItemValue, setKeys, setLayer]);\n  var handleEntered = useCallback(function () {\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    setActive(true);\n  }, [onOpen]);\n  var handleExited = useCallback(function () {\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n    setActive(false);\n    setSearchKeyword('');\n  }, [onClose]);\n  var handleClose = useCallback(function () {\n    var _triggerRef$current;\n\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : _triggerRef$current.close();\n  }, [triggerRef]);\n  var handleClean = useCallback(function (event) {\n    if (disabled) {\n      return;\n    }\n\n    setColumnData([data]);\n    setValue(null);\n    setSelectedPaths([]);\n    setValueToPaths([]);\n    onChange === null || onChange === void 0 ? void 0 : onChange(null, event);\n  }, [data, disabled, onChange, setSelectedPaths, setColumnData, setValueToPaths, setValue]);\n  var handleMenuPressEnter = useCallback(function (event) {\n    var focusItem = findNodeOfTree(data, function (item) {\n      return item[valueKey] === focusItemValue;\n    });\n    var isLeafNode = focusItem && !focusItem[childrenKey];\n\n    if (isLeafNode) {\n      setValue(focusItemValue);\n      setValueToPaths(selectedPaths);\n\n      if (selectedPaths.length) {\n        setLayer(selectedPaths.length - 1);\n      }\n\n      if (!shallowEqual(value, focusItemValue)) {\n        onChange === null || onChange === void 0 ? void 0 : onChange(focusItemValue, event);\n      }\n\n      handleClose();\n    }\n  }, [childrenKey, data, focusItemValue, handleClose, onChange, selectedPaths, setLayer, setValue, setValueToPaths, value, valueKey]);\n  var onPickerKeyDown = useToggleKeyDownEvent(_extends({\n    toggle: !focusItemValue || !active,\n    triggerRef: triggerRef,\n    targetRef: targetRef,\n    overlayRef: overlayRef,\n    active: active,\n    onExit: handleClean,\n    onMenuKeyDown: onFocusItem,\n    onMenuPressEnter: handleMenuPressEnter\n  }, rest));\n\n  var handleSelect = function handleSelect(node, cascadeData, cascadePaths, isLeafNode, event) {\n    var _node$children, _triggerRef$current2;\n\n    var nextValue = node[valueKey];\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, cascadePaths, event);\n    setSelectedPaths(cascadePaths);\n    setColumnData(cascadeData); // Lazy load node's children\n\n    if (typeof getChildren === 'function' && ((_node$children = node.children) === null || _node$children === void 0 ? void 0 : _node$children.length) === 0) {\n      node.loading = true;\n      var children = getChildren(node);\n\n      if (children instanceof Promise) {\n        children.then(function (data) {\n          node.loading = false;\n          node[childrenKey] = data;\n          addColumn(data, cascadePaths.length);\n        });\n      } else {\n        node.loading = false;\n        node[childrenKey] = children;\n        addColumn(children, cascadePaths.length);\n      }\n    }\n\n    if (isLeafNode) {\n      // Determines whether the option is a leaf node, and if so, closes the picker.\n      handleClose(); // Update the selected path to the value path.\n      // That is, the selected path will be displayed on the button after clicking the child node.\n\n      setValueToPaths(cascadePaths);\n      setValue(nextValue);\n\n      if (!shallowEqual(value, nextValue)) {\n        onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n      }\n\n      return;\n    }\n    /** When the parent is optional, the value and the displayed path are updated. */\n\n\n    if (parentSelectable && !shallowEqual(value, nextValue)) {\n      setValue(nextValue);\n      onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n      setValueToPaths(cascadePaths);\n    } // Update menu position\n\n\n    (_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : _triggerRef$current2.updatePosition();\n  };\n  /**\n   * The search structure option is processed after being selected.\n   */\n\n\n  var handleSearchRowSelect = function handleSearchRowSelect(node, nodes, event) {\n    var nextValue = node[valueKey];\n    handleClose();\n    setSearchKeyword('');\n    setValue(nextValue);\n    setValueToPaths(nodes);\n    enforceUpdate(nextValue);\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, null, event);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n  };\n\n  var renderSearchRow = function renderSearchRow(item, key) {\n    var regx = new RegExp(getSafeRegExpString(searchKeyword), 'ig');\n    var nodes = getNodeParents(item);\n    nodes.push(item);\n    var formattedNodes = nodes.map(function (node) {\n      var _extends2;\n\n      var labelElements = [];\n      var a = node[labelKey].split(regx);\n      var b = node[labelKey].match(regx);\n\n      for (var i = 0; i < a.length; i++) {\n        labelElements.push(a[i]);\n\n        if (b && b[i]) {\n          labelElements.push( /*#__PURE__*/React.createElement(\"strong\", {\n            key: i\n          }, b[i]));\n        }\n      }\n\n      return _extends({}, node, (_extends2 = {}, _extends2[labelKey] = labelElements, _extends2));\n    });\n    var disabled = disabledItemValues.some(function (value) {\n      return formattedNodes.some(function (node) {\n        return node[valueKey] === value;\n      });\n    });\n    var itemClasses = prefix('cascader-row', {\n      'cascader-row-disabled': disabled,\n      'cascader-row-focus': item[valueKey] === focusItemValue\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: key,\n      \"aria-disabled\": disabled,\n      \"data-key\": item[valueKey],\n      className: itemClasses,\n      onClick: function onClick(event) {\n        if (!disabled) {\n          handleSearchRowSelect(item, nodes, event);\n        }\n      }\n    }, formattedNodes.map(function (node, index) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        key: \"col-\" + index,\n        className: prefix('cascader-col')\n      }, node[labelKey]);\n    }));\n  };\n\n  var renderSearchResultPanel = function renderSearchResultPanel() {\n    if (searchKeyword === '') {\n      return null;\n    }\n\n    var items = getSearchResult();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('cascader-search-panel'),\n      \"data-layer\": 0\n    }, items.length ? items.map(renderSearchRow) : /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('none')\n    }, locale.noResultsText));\n  };\n\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var _ref = positionProps || {},\n        left = _ref.left,\n        top = _ref.top,\n        className = _ref.className;\n\n    var styles = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n\n    var classes = merge(className, menuClassName, prefix('cascader-menu', {\n      inline: inline\n    }));\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      ref: mergeRefs(overlayRef, speakerRef),\n      className: classes,\n      style: styles,\n      target: triggerRef,\n      onKeyDown: onPickerKeyDown\n    }, searchable && /*#__PURE__*/React.createElement(SearchBar, {\n      placeholder: locale === null || locale === void 0 ? void 0 : locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeyword\n    }), renderSearchResultPanel(), searchKeyword === '' && /*#__PURE__*/React.createElement(DropdownMenu, {\n      id: id ? id + \"-listbox\" : undefined,\n      menuWidth: menuWidth,\n      menuHeight: menuHeight,\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      classPrefix: 'picker-cascader-menu',\n      cascadeData: columnData,\n      cascadePaths: selectedPaths,\n      activeItemValue: value,\n      loadingText: locale === null || locale === void 0 ? void 0 : locale.loading,\n      onSelect: handleSelect,\n      renderMenu: renderMenu,\n      renderMenuItem: renderMenuItem\n    }), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  var selectedElement = placeholder;\n\n  if (valueToPaths.length > 0) {\n    selectedElement = [];\n    valueToPaths.forEach(function (item, index) {\n      var key = item[valueKey] || item[labelKey];\n      selectedElement.push( /*#__PURE__*/React.createElement(\"span\", {\n        key: key\n      }, item[labelKey]));\n\n      if (index < valueToPaths.length - 1) {\n        selectedElement.push( /*#__PURE__*/React.createElement(\"span\", {\n          className: \"separator\",\n          key: key + \"-separator\"\n        }, ' / '));\n      }\n    });\n  }\n\n  if (!isNil(value) && isFunction(renderValue)) {\n    selectedElement = renderValue(value, valueToPaths, selectedElement); // If renderValue returns null or undefined, hasValue is false.\n\n    if (isNil(selectedElement)) {\n      hasValue = false;\n    }\n  }\n\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n    hasValue: hasValue,\n    name: 'cascader'\n  })),\n      classes = _usePickerClassName[0],\n      usedClassNamePropKeys = _usePickerClassName[1];\n\n  if (inline) {\n    return renderDropdownMenu();\n  }\n\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    pickerProps: pick(props, pickTriggerPropKeys),\n    ref: triggerRef,\n    placement: placement,\n    onEntered: createChainedFunction(handleEntered, onEnter),\n    onExited: createChainedFunction(handleExited, onExited),\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys)), {\n    id: id,\n    ref: targetRef,\n    as: toggleAs,\n    disabled: disabled,\n    onClean: createChainedFunction(handleClean, onClean),\n    onKeyDown: onPickerKeyDown,\n    cleanable: cleanable && !disabled,\n    hasValue: hasValue,\n    active: active,\n    placement: placement,\n    inputValue: value\n  }), selectedElement || (locale === null || locale === void 0 ? void 0 : locale.placeholder))));\n});\nCascader.displayName = 'Cascader';\nCascader.defaultProps = defaultProps;\nCascader.propTypes = _extends({}, listPickerPropTypes, {\n  disabledItemValues: PropTypes.array,\n  locale: PropTypes.any,\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  renderMenu: PropTypes.func,\n  onSelect: PropTypes.func,\n  onSearch: PropTypes.func,\n  cleanable: PropTypes.bool,\n  renderMenuItem: PropTypes.func,\n  menuWidth: PropTypes.number,\n  menuHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  searchable: PropTypes.bool,\n  inline: PropTypes.bool,\n  parentSelectable: PropTypes.bool\n});\nexport default Cascader;","map":{"version":3,"sources":["C:/Programowanie/store/node_modules/rsuite/es/Cascader/Cascader.js"],"names":["_extends","_objectWithoutPropertiesLoose","React","useRef","useState","useCallback","useEffect","PropTypes","omit","pick","isNil","isFunction","shallowEqual","DropdownMenu","findNodeOfTree","flattenTree","getNodeParents","usePaths","getSafeRegExpString","createChainedFunction","mergeRefs","useControlled","useCustom","useClassNames","PickerToggle","PickerOverlay","SearchBar","PickerToggleTrigger","usePickerClassName","usePublicMethods","useToggleKeyDownEvent","useFocusItemValue","pickTriggerPropKeys","omitTriggerPropKeys","listPickerPropTypes","defaultProps","as","classPrefix","cleanable","placement","appearance","data","disabledItemValues","childrenKey","valueKey","labelKey","searchable","Cascader","forwardRef","props","ref","Component","defaultValue","placeholder","disabled","overrideLocale","locale","toggleAs","style","valueProp","value","inline","menuClassName","menuStyle","menuWidth","menuHeight","parentSelectable","id","renderMenuItem","renderValue","renderMenu","renderExtraFooter","onEnter","onExited","onClean","onChange","onSelect","onSearch","onClose","onOpen","getChildren","rest","_useState","active","setActive","_useState2","flattenData","setFlattenData","triggerRef","overlayRef","targetRef","_useControlled","setValue","_usePaths","selectedPaths","valueToPaths","columnData","addColumn","setValueToPaths","setColumnData","setSelectedPaths","enforceUpdate","_useCustom","rtl","hasValue","length","_useClassNames","prefix","merge","_useState3","searchKeyword","setSearchKeyword","someKeyword","item","keyword","match","RegExp","parent","getSearchResult","items","result","filter","i","push","_useFocusItemValue","defaultLayer","target","current","callback","focusItemValue","setFocusItemValue","setLayer","setKeys","onFocusItem","onKeyDown","handleSearch","event","handleEntered","handleExited","handleClose","_triggerRef$current","close","handleClean","handleMenuPressEnter","focusItem","isLeafNode","onPickerKeyDown","toggle","onExit","onMenuKeyDown","onMenuPressEnter","handleSelect","node","cascadeData","cascadePaths","_node$children","_triggerRef$current2","nextValue","children","loading","Promise","then","updatePosition","handleSearchRowSelect","nodes","renderSearchRow","key","regx","formattedNodes","map","_extends2","labelElements","a","split","b","createElement","some","itemClasses","className","onClick","index","renderSearchResultPanel","noResultsText","renderDropdownMenu","positionProps","speakerRef","_ref","left","top","styles","classes","searchPlaceholder","undefined","activeItemValue","loadingText","selectedElement","forEach","_usePickerClassName","name","usedClassNamePropKeys","pickerProps","onEntered","speaker","concat","inputValue","displayName","propTypes","array","any","oneOf","func","bool","number","oneOfType","string"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,oCAArB;AACA,OAAOC,6BAAP,MAA0C,yDAA1C;AACA,OAAOC,KAAP,IAAgBC,MAAhB,EAAwBC,QAAxB,EAAkCC,WAAlC,EAA+CC,SAA/C,QAAgE,OAAhE;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,KAAP,MAAkB,cAAlB;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,SAASC,cAAT,EAAyBC,WAAzB,EAAsCC,cAAtC,QAA4D,oBAA5D;AACA,SAASC,QAAT,QAAyB,SAAzB;AACA,SAASC,mBAAT,EAA8BC,qBAA9B,EAAqDC,SAArD,EAAgEC,aAAhE,EAA+EC,SAA/E,EAA0FC,aAA1F,QAA+G,UAA/G;AACA,SAASC,YAAT,EAAuBC,aAAvB,EAAsCC,SAAtC,EAAiDC,mBAAjD,EAAsEC,kBAAtE,EAA0FC,gBAA1F,EAA4GC,qBAA5G,EAAmIC,iBAAnI,EAAsJC,mBAAtJ,EAA2KC,mBAA3K,EAAgMC,mBAAhM,QAA2N,WAA3N;AACA,IAAIC,YAAY,GAAG;AACjBC,EAAAA,EAAE,EAAE,KADa;AAEjBC,EAAAA,WAAW,EAAE,QAFI;AAGjBC,EAAAA,SAAS,EAAE,IAHM;AAIjBC,EAAAA,SAAS,EAAE,aAJM;AAKjBC,EAAAA,UAAU,EAAE,SALK;AAMjBC,EAAAA,IAAI,EAAE,EANW;AAOjBC,EAAAA,kBAAkB,EAAE,EAPH;AAQjBC,EAAAA,WAAW,EAAE,UARI;AASjBC,EAAAA,QAAQ,EAAE,OATO;AAUjBC,EAAAA,QAAQ,EAAE,OAVO;AAWjBC,EAAAA,UAAU,EAAE;AAXK,CAAnB;AAaA,IAAIC,QAAQ,GAAG,aAAa7C,KAAK,CAAC8C,UAAN,CAAiB,UAAUC,KAAV,EAAiBC,GAAjB,EAAsB;AACjE,MAAIC,SAAS,GAAGF,KAAK,CAACb,EAAtB;AAAA,MACIK,IAAI,GAAGQ,KAAK,CAACR,IADjB;AAAA,MAEIJ,WAAW,GAAGY,KAAK,CAACZ,WAFxB;AAAA,MAGIM,WAAW,GAAGM,KAAK,CAACN,WAHxB;AAAA,MAIIC,QAAQ,GAAGK,KAAK,CAACL,QAJrB;AAAA,MAKIC,QAAQ,GAAGI,KAAK,CAACJ,QALrB;AAAA,MAMIO,YAAY,GAAGH,KAAK,CAACG,YANzB;AAAA,MAOIC,WAAW,GAAGJ,KAAK,CAACI,WAPxB;AAAA,MAQIC,QAAQ,GAAGL,KAAK,CAACK,QARrB;AAAA,MASIZ,kBAAkB,GAAGO,KAAK,CAACP,kBAT/B;AAAA,MAUIJ,SAAS,GAAGW,KAAK,CAACX,SAVtB;AAAA,MAWIiB,cAAc,GAAGN,KAAK,CAACO,MAX3B;AAAA,MAYIC,QAAQ,GAAGR,KAAK,CAACQ,QAZrB;AAAA,MAaIC,KAAK,GAAGT,KAAK,CAACS,KAblB;AAAA,MAcIC,SAAS,GAAGV,KAAK,CAACW,KAdtB;AAAA,MAeIC,MAAM,GAAGZ,KAAK,CAACY,MAfnB;AAAA,MAgBIC,aAAa,GAAGb,KAAK,CAACa,aAhB1B;AAAA,MAiBIC,SAAS,GAAGd,KAAK,CAACc,SAjBtB;AAAA,MAkBIC,SAAS,GAAGf,KAAK,CAACe,SAlBtB;AAAA,MAmBIC,UAAU,GAAGhB,KAAK,CAACgB,UAnBvB;AAAA,MAoBInB,UAAU,GAAGG,KAAK,CAACH,UApBvB;AAAA,MAqBIoB,gBAAgB,GAAGjB,KAAK,CAACiB,gBArB7B;AAAA,MAsBI3B,SAAS,GAAGU,KAAK,CAACV,SAtBtB;AAAA,MAuBI4B,EAAE,GAAGlB,KAAK,CAACkB,EAvBf;AAAA,MAwBIC,cAAc,GAAGnB,KAAK,CAACmB,cAxB3B;AAAA,MAyBIC,WAAW,GAAGpB,KAAK,CAACoB,WAzBxB;AAAA,MA0BIC,UAAU,GAAGrB,KAAK,CAACqB,UA1BvB;AAAA,MA2BIC,iBAAiB,GAAGtB,KAAK,CAACsB,iBA3B9B;AAAA,MA4BIC,OAAO,GAAGvB,KAAK,CAACuB,OA5BpB;AAAA,MA6BIC,QAAQ,GAAGxB,KAAK,CAACwB,QA7BrB;AAAA,MA8BIC,OAAO,GAAGzB,KAAK,CAACyB,OA9BpB;AAAA,MA+BIC,QAAQ,GAAG1B,KAAK,CAAC0B,QA/BrB;AAAA,MAgCIC,QAAQ,GAAG3B,KAAK,CAAC2B,QAhCrB;AAAA,MAiCIC,QAAQ,GAAG5B,KAAK,CAAC4B,QAjCrB;AAAA,MAkCIC,OAAO,GAAG7B,KAAK,CAAC6B,OAlCpB;AAAA,MAmCIC,MAAM,GAAG9B,KAAK,CAAC8B,MAnCnB;AAAA,MAoCIC,WAAW,GAAG/B,KAAK,CAAC+B,WApCxB;AAAA,MAqCIC,IAAI,GAAGhF,6BAA6B,CAACgD,KAAD,EAAQ,CAAC,IAAD,EAAO,MAAP,EAAe,aAAf,EAA8B,aAA9B,EAA6C,UAA7C,EAAyD,UAAzD,EAAqE,cAArE,EAAqF,aAArF,EAAoG,UAApG,EAAgH,oBAAhH,EAAsI,WAAtI,EAAmJ,QAAnJ,EAA6J,UAA7J,EAAyK,OAAzK,EAAkL,OAAlL,EAA2L,QAA3L,EAAqM,eAArM,EAAsN,WAAtN,EAAmO,WAAnO,EAAgP,YAAhP,EAA8P,YAA9P,EAA4Q,kBAA5Q,EAAgS,WAAhS,EAA6S,IAA7S,EAAmT,gBAAnT,EAAqU,aAArU,EAAoV,YAApV,EAAkW,mBAAlW,EAAuX,SAAvX,EAAkY,UAAlY,EAA8Y,SAA9Y,EAAyZ,UAAzZ,EAAqa,UAAra,EAAib,UAAjb,EAA6b,SAA7b,EAAwc,QAAxc,EAAkd,aAAld,CAAR,CArCxC,CADiE,CAsCkd;;;AAGnhB,MAAIiC,SAAS,GAAG9E,QAAQ,CAAC,KAAD,CAAxB;AAAA,MACI+E,MAAM,GAAGD,SAAS,CAAC,CAAD,CADtB;AAAA,MAEIE,SAAS,GAAGF,SAAS,CAAC,CAAD,CAFzB;;AAIA,MAAIG,UAAU,GAAGjF,QAAQ,CAACW,WAAW,CAAC0B,IAAD,CAAZ,CAAzB;AAAA,MACI6C,WAAW,GAAGD,UAAU,CAAC,CAAD,CAD5B;AAAA,MAEIE,cAAc,GAAGF,UAAU,CAAC,CAAD,CAF/B;;AAIA,MAAIG,UAAU,GAAGrF,MAAM,EAAvB;AACA,MAAIsF,UAAU,GAAGtF,MAAM,EAAvB;AACA,MAAIuF,SAAS,GAAGvF,MAAM,EAAtB;;AAEA,MAAIwF,cAAc,GAAGtE,aAAa,CAACsC,SAAD,EAAYP,YAAZ,CAAlC;AAAA,MACIQ,KAAK,GAAG+B,cAAc,CAAC,CAAD,CAD1B;AAAA,MAEIC,QAAQ,GAAGD,cAAc,CAAC,CAAD,CAF7B;;AAIA,MAAIE,SAAS,GAAG5E,QAAQ,CAAC;AACvBwB,IAAAA,IAAI,EAAEA,IADiB;AAEvBG,IAAAA,QAAQ,EAAEA,QAFa;AAGvBD,IAAAA,WAAW,EAAEA,WAHU;AAIvBiB,IAAAA,KAAK,EAAEA;AAJgB,GAAD,CAAxB;AAAA,MAMIkC,aAAa,GAAGD,SAAS,CAACC,aAN9B;AAAA,MAOIC,YAAY,GAAGF,SAAS,CAACE,YAP7B;AAAA,MAQIC,UAAU,GAAGH,SAAS,CAACG,UAR3B;AAAA,MASIC,SAAS,GAAGJ,SAAS,CAACI,SAT1B;AAAA,MAUIC,eAAe,GAAGL,SAAS,CAACK,eAVhC;AAAA,MAWIC,aAAa,GAAGN,SAAS,CAACM,aAX9B;AAAA,MAYIC,gBAAgB,GAAGP,SAAS,CAACO,gBAZjC;AAAA,MAaIC,aAAa,GAAGR,SAAS,CAACQ,aAb9B;;AAeA/F,EAAAA,SAAS,CAAC,YAAY;AACpBiF,IAAAA,cAAc,CAACxE,WAAW,CAAC0B,IAAD,CAAZ,CAAd;AACD,GAFQ,EAEN,CAACA,IAAD,CAFM,CAAT;AAGAZ,EAAAA,gBAAgB,CAACqB,GAAD,EAAM;AACpBsC,IAAAA,UAAU,EAAEA,UADQ;AAEpBC,IAAAA,UAAU,EAAEA,UAFQ;AAGpBC,IAAAA,SAAS,EAAEA;AAHS,GAAN,CAAhB;;AAMA,MAAIY,UAAU,GAAGhF,SAAS,CAAC,QAAD,EAAWiC,cAAX,CAA1B;AAAA,MACIC,MAAM,GAAG8C,UAAU,CAAC9C,MADxB;AAAA,MAEI+C,GAAG,GAAGD,UAAU,CAACC,GAFrB;AAGA;AACF;AACA;AACA;;;AAGE,MAAIC,QAAQ,GAAGT,YAAY,CAACU,MAAb,GAAsB,CAAtB,IAA2B,CAAC/F,KAAK,CAACkD,KAAD,CAAN,IAAiBjD,UAAU,CAAC0D,WAAD,CAArE;;AAEA,MAAIqC,cAAc,GAAGnF,aAAa,CAACc,WAAD,CAAlC;AAAA,MACIsE,MAAM,GAAGD,cAAc,CAACC,MAD5B;AAAA,MAEIC,KAAK,GAAGF,cAAc,CAACE,KAF3B;;AAIA,MAAIC,UAAU,GAAGzG,QAAQ,CAAC,EAAD,CAAzB;AAAA,MACI0G,aAAa,GAAGD,UAAU,CAAC,CAAD,CAD9B;AAAA,MAEIE,gBAAgB,GAAGF,UAAU,CAAC,CAAD,CAFjC;;AAIA,MAAIG,WAAW,GAAG3G,WAAW,CAAC,UAAU4G,IAAV,EAAgBC,OAAhB,EAAyB;AACrD,QAAID,IAAI,CAACpE,QAAD,CAAJ,CAAesE,KAAf,CAAqB,IAAIC,MAAJ,CAAWlG,mBAAmB,CAACgG,OAAO,IAAIJ,aAAZ,CAA9B,EAA0D,GAA1D,CAArB,CAAJ,EAA0F;AACxF,aAAO,IAAP;AACD;;AAED,QAAIG,IAAI,CAACI,MAAL,IAAeL,WAAW,CAACC,IAAI,CAACI,MAAN,CAA9B,EAA6C;AAC3C,aAAO,IAAP;AACD;;AAED,WAAO,KAAP;AACD,GAV4B,EAU1B,CAACxE,QAAD,EAAWiE,aAAX,CAV0B,CAA7B;AAWA,MAAIQ,eAAe,GAAGjH,WAAW,CAAC,UAAU6G,OAAV,EAAmB;AACnD,QAAIK,KAAK,GAAG,EAAZ;AACA,QAAIC,MAAM,GAAGlC,WAAW,CAACmC,MAAZ,CAAmB,UAAUR,IAAV,EAAgB;AAC9C,UAAIA,IAAI,CAACtE,WAAD,CAAR,EAAuB;AACrB,eAAO,KAAP;AACD;;AAED,aAAOqE,WAAW,CAACC,IAAD,EAAOC,OAAP,CAAlB;AACD,KANY,CAAb;;AAQA,SAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,MAAM,CAACf,MAA3B,EAAmCiB,CAAC,EAApC,EAAwC;AACtCH,MAAAA,KAAK,CAACI,IAAN,CAAWH,MAAM,CAACE,CAAD,CAAjB,EADsC,CACf;;AAEvB,UAAIA,CAAC,KAAK,EAAV,EAAc;AACZ,eAAOH,KAAP;AACD;AACF;;AAED,WAAOA,KAAP;AACD,GAnBgC,EAmB9B,CAAC5E,WAAD,EAAc2C,WAAd,EAA2B0B,WAA3B,CAnB8B,CAAjC,CA/GiE,CAkIpB;;AAE7C,MAAIY,kBAAkB,GAAG7F,iBAAiB,CAAC6B,KAAD,EAAQ;AAChD2C,IAAAA,GAAG,EAAEA,GAD2C;AAEhD9D,IAAAA,IAAI,EAAE6C,WAF0C;AAGhD1C,IAAAA,QAAQ,EAAEA,QAHsC;AAIhDiF,IAAAA,YAAY,EAAE,CAAC9B,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAK,KAAK,CAA/C,GAAmD,KAAK,CAAxD,GAA4DA,YAAY,CAACU,MAA1E,IAAoFV,YAAY,CAACU,MAAb,GAAsB,CAA1G,GAA8G,CAJ5E;AAKhDqB,IAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACxB,aAAOrC,UAAU,CAACsC,OAAlB;AACD,KAP+C;AAQhDC,IAAAA,QAAQ,EAAE3H,WAAW,CAAC,UAAUuD,KAAV,EAAiB;AACrCyC,MAAAA,aAAa,CAACzC,KAAD,EAAQ,IAAR,CAAb;AACD,KAFoB,EAElB,CAACyC,aAAD,CAFkB;AAR2B,GAAR,CAA1C;AAAA,MAYI4B,cAAc,GAAGL,kBAAkB,CAACK,cAZxC;AAAA,MAaIC,iBAAiB,GAAGN,kBAAkB,CAACM,iBAb3C;AAAA,MAcIC,QAAQ,GAAGP,kBAAkB,CAACO,QAdlC;AAAA,MAeIC,OAAO,GAAGR,kBAAkB,CAACQ,OAfjC;AAAA,MAgBIC,WAAW,GAAGT,kBAAkB,CAACU,SAhBrC;;AAkBA,MAAIC,YAAY,GAAGlI,WAAW,CAAC,UAAUuD,KAAV,EAAiB4E,KAAjB,EAAwB;AACrD,QAAIjB,KAAK,GAAGD,eAAe,CAAC1D,KAAD,CAA3B;AACAmD,IAAAA,gBAAgB,CAACnD,KAAD,CAAhB;AACAiB,IAAAA,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACjB,KAAD,EAAQ4E,KAAR,CAA5D;;AAEA,QAAIjB,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAAC,CAAD,CAAvD,EAA4D;AAC1DW,MAAAA,iBAAiB,CAACX,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAAC,CAAD,CAApD,CAAjB;AACAY,MAAAA,QAAQ,CAAC,CAAD,CAAR;AACAC,MAAAA,OAAO,CAAC,EAAD,CAAP;AACD;AACF,GAV6B,EAU3B,CAACd,eAAD,EAAkBzC,QAAlB,EAA4BqD,iBAA5B,EAA+CE,OAA/C,EAAwDD,QAAxD,CAV2B,CAA9B;AAWA,MAAIM,aAAa,GAAGpI,WAAW,CAAC,YAAY;AAC1C0E,IAAAA,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuC,KAAK,CAA5C,GAAgDA,MAAM,EAAtD;AACAK,IAAAA,SAAS,CAAC,IAAD,CAAT;AACD,GAH8B,EAG5B,CAACL,MAAD,CAH4B,CAA/B;AAIA,MAAI2D,YAAY,GAAGrI,WAAW,CAAC,YAAY;AACzCyE,IAAAA,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,EAAzD;AACAM,IAAAA,SAAS,CAAC,KAAD,CAAT;AACA2B,IAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACD,GAJ6B,EAI3B,CAACjC,OAAD,CAJ2B,CAA9B;AAKA,MAAI6D,WAAW,GAAGtI,WAAW,CAAC,YAAY;AACxC,QAAIuI,mBAAJ;;AAEA,KAACA,mBAAmB,GAAGpD,UAAU,CAACuC,OAAlC,MAA+C,IAA/C,IAAuDa,mBAAmB,KAAK,KAAK,CAApF,GAAwF,KAAK,CAA7F,GAAiGA,mBAAmB,CAACC,KAApB,EAAjG;AACD,GAJ4B,EAI1B,CAACrD,UAAD,CAJ0B,CAA7B;AAKA,MAAIsD,WAAW,GAAGzI,WAAW,CAAC,UAAUmI,KAAV,EAAiB;AAC7C,QAAIlF,QAAJ,EAAc;AACZ;AACD;;AAED6C,IAAAA,aAAa,CAAC,CAAC1D,IAAD,CAAD,CAAb;AACAmD,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACAQ,IAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACAF,IAAAA,eAAe,CAAC,EAAD,CAAf;AACAvB,IAAAA,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAAC,IAAD,EAAO6D,KAAP,CAA5D;AACD,GAV4B,EAU1B,CAAC/F,IAAD,EAAOa,QAAP,EAAiBqB,QAAjB,EAA2ByB,gBAA3B,EAA6CD,aAA7C,EAA4DD,eAA5D,EAA6EN,QAA7E,CAV0B,CAA7B;AAWA,MAAImD,oBAAoB,GAAG1I,WAAW,CAAC,UAAUmI,KAAV,EAAiB;AACtD,QAAIQ,SAAS,GAAGlI,cAAc,CAAC2B,IAAD,EAAO,UAAUwE,IAAV,EAAgB;AACnD,aAAOA,IAAI,CAACrE,QAAD,CAAJ,KAAmBqF,cAA1B;AACD,KAF6B,CAA9B;AAGA,QAAIgB,UAAU,GAAGD,SAAS,IAAI,CAACA,SAAS,CAACrG,WAAD,CAAxC;;AAEA,QAAIsG,UAAJ,EAAgB;AACdrD,MAAAA,QAAQ,CAACqC,cAAD,CAAR;AACA/B,MAAAA,eAAe,CAACJ,aAAD,CAAf;;AAEA,UAAIA,aAAa,CAACW,MAAlB,EAA0B;AACxB0B,QAAAA,QAAQ,CAACrC,aAAa,CAACW,MAAd,GAAuB,CAAxB,CAAR;AACD;;AAED,UAAI,CAAC7F,YAAY,CAACgD,KAAD,EAAQqE,cAAR,CAAjB,EAA0C;AACxCtD,QAAAA,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACsD,cAAD,EAAiBO,KAAjB,CAA5D;AACD;;AAEDG,MAAAA,WAAW;AACZ;AACF,GApBqC,EAoBnC,CAAChG,WAAD,EAAcF,IAAd,EAAoBwF,cAApB,EAAoCU,WAApC,EAAiDhE,QAAjD,EAA2DmB,aAA3D,EAA0EqC,QAA1E,EAAoFvC,QAApF,EAA8FM,eAA9F,EAA+GtC,KAA/G,EAAsHhB,QAAtH,CApBmC,CAAtC;AAqBA,MAAIsG,eAAe,GAAGpH,qBAAqB,CAAC9B,QAAQ,CAAC;AACnDmJ,IAAAA,MAAM,EAAE,CAAClB,cAAD,IAAmB,CAAC9C,MADuB;AAEnDK,IAAAA,UAAU,EAAEA,UAFuC;AAGnDE,IAAAA,SAAS,EAAEA,SAHwC;AAInDD,IAAAA,UAAU,EAAEA,UAJuC;AAKnDN,IAAAA,MAAM,EAAEA,MAL2C;AAMnDiE,IAAAA,MAAM,EAAEN,WAN2C;AAOnDO,IAAAA,aAAa,EAAEhB,WAPoC;AAQnDiB,IAAAA,gBAAgB,EAAEP;AARiC,GAAD,EASjD9D,IATiD,CAAT,CAA3C;;AAWA,MAAIsE,YAAY,GAAG,SAASA,YAAT,CAAsBC,IAAtB,EAA4BC,WAA5B,EAAyCC,YAAzC,EAAuDT,UAAvD,EAAmET,KAAnE,EAA0E;AAC3F,QAAImB,cAAJ,EAAoBC,oBAApB;;AAEA,QAAIC,SAAS,GAAGL,IAAI,CAAC5G,QAAD,CAApB;AACAgC,IAAAA,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAAC4E,IAAD,EAAOE,YAAP,EAAqBlB,KAArB,CAA5D;AACApC,IAAAA,gBAAgB,CAACsD,YAAD,CAAhB;AACAvD,IAAAA,aAAa,CAACsD,WAAD,CAAb,CAN2F,CAM/D;;AAE5B,QAAI,OAAOzE,WAAP,KAAuB,UAAvB,IAAqC,CAAC,CAAC2E,cAAc,GAAGH,IAAI,CAACM,QAAvB,MAAqC,IAArC,IAA6CH,cAAc,KAAK,KAAK,CAArE,GAAyE,KAAK,CAA9E,GAAkFA,cAAc,CAAClD,MAAlG,MAA8G,CAAvJ,EAA0J;AACxJ+C,MAAAA,IAAI,CAACO,OAAL,GAAe,IAAf;AACA,UAAID,QAAQ,GAAG9E,WAAW,CAACwE,IAAD,CAA1B;;AAEA,UAAIM,QAAQ,YAAYE,OAAxB,EAAiC;AAC/BF,QAAAA,QAAQ,CAACG,IAAT,CAAc,UAAUxH,IAAV,EAAgB;AAC5B+G,UAAAA,IAAI,CAACO,OAAL,GAAe,KAAf;AACAP,UAAAA,IAAI,CAAC7G,WAAD,CAAJ,GAAoBF,IAApB;AACAwD,UAAAA,SAAS,CAACxD,IAAD,EAAOiH,YAAY,CAACjD,MAApB,CAAT;AACD,SAJD;AAKD,OAND,MAMO;AACL+C,QAAAA,IAAI,CAACO,OAAL,GAAe,KAAf;AACAP,QAAAA,IAAI,CAAC7G,WAAD,CAAJ,GAAoBmH,QAApB;AACA7D,QAAAA,SAAS,CAAC6D,QAAD,EAAWJ,YAAY,CAACjD,MAAxB,CAAT;AACD;AACF;;AAED,QAAIwC,UAAJ,EAAgB;AACd;AACAN,MAAAA,WAAW,GAFG,CAEC;AACf;;AAEAzC,MAAAA,eAAe,CAACwD,YAAD,CAAf;AACA9D,MAAAA,QAAQ,CAACiE,SAAD,CAAR;;AAEA,UAAI,CAACjJ,YAAY,CAACgD,KAAD,EAAQiG,SAAR,CAAjB,EAAqC;AACnClF,QAAAA,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACkF,SAAD,EAAYrB,KAAZ,CAA5D;AACD;;AAED;AACD;AACD;;;AAGA,QAAItE,gBAAgB,IAAI,CAACtD,YAAY,CAACgD,KAAD,EAAQiG,SAAR,CAArC,EAAyD;AACvDjE,MAAAA,QAAQ,CAACiE,SAAD,CAAR;AACAlF,MAAAA,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACkF,SAAD,EAAYrB,KAAZ,CAA5D;AACAtC,MAAAA,eAAe,CAACwD,YAAD,CAAf;AACD,KA9C0F,CA8CzF;;;AAGF,KAACE,oBAAoB,GAAGpE,UAAU,CAACuC,OAAnC,MAAgD,IAAhD,IAAwD6B,oBAAoB,KAAK,KAAK,CAAtF,GAA0F,KAAK,CAA/F,GAAmGA,oBAAoB,CAACM,cAArB,EAAnG;AACD,GAlDD;AAmDA;AACF;AACA;;;AAGE,MAAIC,qBAAqB,GAAG,SAASA,qBAAT,CAA+BX,IAA/B,EAAqCY,KAArC,EAA4C5B,KAA5C,EAAmD;AAC7E,QAAIqB,SAAS,GAAGL,IAAI,CAAC5G,QAAD,CAApB;AACA+F,IAAAA,WAAW;AACX5B,IAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACAnB,IAAAA,QAAQ,CAACiE,SAAD,CAAR;AACA3D,IAAAA,eAAe,CAACkE,KAAD,CAAf;AACA/D,IAAAA,aAAa,CAACwD,SAAD,CAAb;AACAjF,IAAAA,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAAC4E,IAAD,EAAO,IAAP,EAAahB,KAAb,CAA5D;AACA7D,IAAAA,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACkF,SAAD,EAAYrB,KAAZ,CAA5D;AACD,GATD;;AAWA,MAAI6B,eAAe,GAAG,SAASA,eAAT,CAAyBpD,IAAzB,EAA+BqD,GAA/B,EAAoC;AACxD,QAAIC,IAAI,GAAG,IAAInD,MAAJ,CAAWlG,mBAAmB,CAAC4F,aAAD,CAA9B,EAA+C,IAA/C,CAAX;AACA,QAAIsD,KAAK,GAAGpJ,cAAc,CAACiG,IAAD,CAA1B;AACAmD,IAAAA,KAAK,CAACzC,IAAN,CAAWV,IAAX;AACA,QAAIuD,cAAc,GAAGJ,KAAK,CAACK,GAAN,CAAU,UAAUjB,IAAV,EAAgB;AAC7C,UAAIkB,SAAJ;;AAEA,UAAIC,aAAa,GAAG,EAApB;AACA,UAAIC,CAAC,GAAGpB,IAAI,CAAC3G,QAAD,CAAJ,CAAegI,KAAf,CAAqBN,IAArB,CAAR;AACA,UAAIO,CAAC,GAAGtB,IAAI,CAAC3G,QAAD,CAAJ,CAAesE,KAAf,CAAqBoD,IAArB,CAAR;;AAEA,WAAK,IAAI7C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkD,CAAC,CAACnE,MAAtB,EAA8BiB,CAAC,EAA/B,EAAmC;AACjCiD,QAAAA,aAAa,CAAChD,IAAd,CAAmBiD,CAAC,CAAClD,CAAD,CAApB;;AAEA,YAAIoD,CAAC,IAAIA,CAAC,CAACpD,CAAD,CAAV,EAAe;AACbiD,UAAAA,aAAa,CAAChD,IAAd,EAAoB,aAAazH,KAAK,CAAC6K,aAAN,CAAoB,QAApB,EAA8B;AAC7DT,YAAAA,GAAG,EAAE5C;AADwD,WAA9B,EAE9BoD,CAAC,CAACpD,CAAD,CAF6B,CAAjC;AAGD;AACF;;AAED,aAAO1H,QAAQ,CAAC,EAAD,EAAKwJ,IAAL,GAAYkB,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAAC7H,QAAD,CAAT,GAAsB8H,aAAtC,EAAqDD,SAAjE,EAAf;AACD,KAlBoB,CAArB;AAmBA,QAAIpH,QAAQ,GAAGZ,kBAAkB,CAACsI,IAAnB,CAAwB,UAAUpH,KAAV,EAAiB;AACtD,aAAO4G,cAAc,CAACQ,IAAf,CAAoB,UAAUxB,IAAV,EAAgB;AACzC,eAAOA,IAAI,CAAC5G,QAAD,CAAJ,KAAmBgB,KAA1B;AACD,OAFM,CAAP;AAGD,KAJc,CAAf;AAKA,QAAIqH,WAAW,GAAGtE,MAAM,CAAC,cAAD,EAAiB;AACvC,+BAAyBrD,QADc;AAEvC,4BAAsB2D,IAAI,CAACrE,QAAD,CAAJ,KAAmBqF;AAFF,KAAjB,CAAxB;AAIA,WAAO,aAAa/H,KAAK,CAAC6K,aAAN,CAAoB,KAApB,EAA2B;AAC7CT,MAAAA,GAAG,EAAEA,GADwC;AAE7C,uBAAiBhH,QAF4B;AAG7C,kBAAY2D,IAAI,CAACrE,QAAD,CAH6B;AAI7CsI,MAAAA,SAAS,EAAED,WAJkC;AAK7CE,MAAAA,OAAO,EAAE,SAASA,OAAT,CAAiB3C,KAAjB,EAAwB;AAC/B,YAAI,CAAClF,QAAL,EAAe;AACb6G,UAAAA,qBAAqB,CAAClD,IAAD,EAAOmD,KAAP,EAAc5B,KAAd,CAArB;AACD;AACF;AAT4C,KAA3B,EAUjBgC,cAAc,CAACC,GAAf,CAAmB,UAAUjB,IAAV,EAAgB4B,KAAhB,EAAuB;AAC3C,aAAO,aAAalL,KAAK,CAAC6K,aAAN,CAAoB,MAApB,EAA4B;AAC9CT,QAAAA,GAAG,EAAE,SAASc,KADgC;AAE9CF,QAAAA,SAAS,EAAEvE,MAAM,CAAC,cAAD;AAF6B,OAA5B,EAGjB6C,IAAI,CAAC3G,QAAD,CAHa,CAApB;AAID,KALE,CAViB,CAApB;AAgBD,GAhDD;;AAkDA,MAAIwI,uBAAuB,GAAG,SAASA,uBAAT,GAAmC;AAC/D,QAAIvE,aAAa,KAAK,EAAtB,EAA0B;AACxB,aAAO,IAAP;AACD;;AAED,QAAIS,KAAK,GAAGD,eAAe,EAA3B;AACA,WAAO,aAAapH,KAAK,CAAC6K,aAAN,CAAoB,KAApB,EAA2B;AAC7CG,MAAAA,SAAS,EAAEvE,MAAM,CAAC,uBAAD,CAD4B;AAE7C,oBAAc;AAF+B,KAA3B,EAGjBY,KAAK,CAACd,MAAN,GAAec,KAAK,CAACkD,GAAN,CAAUJ,eAAV,CAAf,GAA4C,aAAanK,KAAK,CAAC6K,aAAN,CAAoB,KAApB,EAA2B;AACrFG,MAAAA,SAAS,EAAEvE,MAAM,CAAC,MAAD;AADoE,KAA3B,EAEzDnD,MAAM,CAAC8H,aAFkD,CAHxC,CAApB;AAMD,GAZD;;AAcA,MAAIC,kBAAkB,GAAG,SAASA,kBAAT,CAA4BC,aAA5B,EAA2CC,UAA3C,EAAuD;AAC9E,QAAIC,IAAI,GAAGF,aAAa,IAAI,EAA5B;AAAA,QACIG,IAAI,GAAGD,IAAI,CAACC,IADhB;AAAA,QAEIC,GAAG,GAAGF,IAAI,CAACE,GAFf;AAAA,QAGIV,SAAS,GAAGQ,IAAI,CAACR,SAHrB;;AAKA,QAAIW,MAAM,GAAG7L,QAAQ,CAAC,EAAD,EAAK+D,SAAL,EAAgB;AACnC4H,MAAAA,IAAI,EAAEA,IAD6B;AAEnCC,MAAAA,GAAG,EAAEA;AAF8B,KAAhB,CAArB;;AAKA,QAAIE,OAAO,GAAGlF,KAAK,CAACsE,SAAD,EAAYpH,aAAZ,EAA2B6C,MAAM,CAAC,eAAD,EAAkB;AACpE9C,MAAAA,MAAM,EAAEA;AAD4D,KAAlB,CAAjC,CAAnB;AAGA,WAAO,aAAa3D,KAAK,CAAC6K,aAAN,CAAoBtJ,aAApB,EAAmC;AACrDyB,MAAAA,GAAG,EAAE9B,SAAS,CAACqE,UAAD,EAAagG,UAAb,CADuC;AAErDP,MAAAA,SAAS,EAAEY,OAF0C;AAGrDpI,MAAAA,KAAK,EAAEmI,MAH8C;AAIrD/D,MAAAA,MAAM,EAAEtC,UAJ6C;AAKrD8C,MAAAA,SAAS,EAAEY;AAL0C,KAAnC,EAMjBpG,UAAU,IAAI,aAAa5C,KAAK,CAAC6K,aAAN,CAAoBrJ,SAApB,EAA+B;AAC3D2B,MAAAA,WAAW,EAAEG,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuC,KAAK,CAA5C,GAAgDA,MAAM,CAACuI,iBADT;AAE3DpH,MAAAA,QAAQ,EAAE4D,YAFiD;AAG3D3E,MAAAA,KAAK,EAAEkD;AAHoD,KAA/B,CANV,EAUhBuE,uBAAuB,EAVP,EAUWvE,aAAa,KAAK,EAAlB,IAAwB,aAAa5G,KAAK,CAAC6K,aAAN,CAAoBlK,YAApB,EAAkC;AACpGsD,MAAAA,EAAE,EAAEA,EAAE,GAAGA,EAAE,GAAG,UAAR,GAAqB6H,SADyE;AAEpGhI,MAAAA,SAAS,EAAEA,SAFyF;AAGpGC,MAAAA,UAAU,EAAEA,UAHwF;AAIpGvB,MAAAA,kBAAkB,EAAEA,kBAJgF;AAKpGE,MAAAA,QAAQ,EAAEA,QAL0F;AAMpGC,MAAAA,QAAQ,EAAEA,QAN0F;AAOpGF,MAAAA,WAAW,EAAEA,WAPuF;AAQpGN,MAAAA,WAAW,EAAE,sBARuF;AASpGoH,MAAAA,WAAW,EAAEzD,UATuF;AAUpG0D,MAAAA,YAAY,EAAE5D,aAVsF;AAWpGmG,MAAAA,eAAe,EAAErI,KAXmF;AAYpGsI,MAAAA,WAAW,EAAE1I,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuC,KAAK,CAA5C,GAAgDA,MAAM,CAACuG,OAZgC;AAapGnF,MAAAA,QAAQ,EAAE2E,YAb0F;AAcpGjF,MAAAA,UAAU,EAAEA,UAdwF;AAepGF,MAAAA,cAAc,EAAEA;AAfoF,KAAlC,CAVhD,EA0BhBG,iBAAiB,KAAK,IAAtB,IAA8BA,iBAAiB,KAAK,KAAK,CAAzD,GAA6D,KAAK,CAAlE,GAAsEA,iBAAiB,EA1BvE,CAApB;AA2BD,GAzCD;;AA2CA,MAAI4H,eAAe,GAAG9I,WAAtB;;AAEA,MAAI0C,YAAY,CAACU,MAAb,GAAsB,CAA1B,EAA6B;AAC3B0F,IAAAA,eAAe,GAAG,EAAlB;AACApG,IAAAA,YAAY,CAACqG,OAAb,CAAqB,UAAUnF,IAAV,EAAgBmE,KAAhB,EAAuB;AAC1C,UAAId,GAAG,GAAGrD,IAAI,CAACrE,QAAD,CAAJ,IAAkBqE,IAAI,CAACpE,QAAD,CAAhC;AACAsJ,MAAAA,eAAe,CAACxE,IAAhB,EAAsB,aAAazH,KAAK,CAAC6K,aAAN,CAAoB,MAApB,EAA4B;AAC7DT,QAAAA,GAAG,EAAEA;AADwD,OAA5B,EAEhCrD,IAAI,CAACpE,QAAD,CAF4B,CAAnC;;AAIA,UAAIuI,KAAK,GAAGrF,YAAY,CAACU,MAAb,GAAsB,CAAlC,EAAqC;AACnC0F,QAAAA,eAAe,CAACxE,IAAhB,EAAsB,aAAazH,KAAK,CAAC6K,aAAN,CAAoB,MAApB,EAA4B;AAC7DG,UAAAA,SAAS,EAAE,WADkD;AAE7DZ,UAAAA,GAAG,EAAEA,GAAG,GAAG;AAFkD,SAA5B,EAGhC,KAHgC,CAAnC;AAID;AACF,KAZD;AAaD;;AAED,MAAI,CAAC5J,KAAK,CAACkD,KAAD,CAAN,IAAiBjD,UAAU,CAAC0D,WAAD,CAA/B,EAA8C;AAC5C8H,IAAAA,eAAe,GAAG9H,WAAW,CAACT,KAAD,EAAQmC,YAAR,EAAsBoG,eAAtB,CAA7B,CAD4C,CACyB;;AAErE,QAAIzL,KAAK,CAACyL,eAAD,CAAT,EAA4B;AAC1B3F,MAAAA,QAAQ,GAAG,KAAX;AACD;AACF;;AAED,MAAI6F,mBAAmB,GAAGzK,kBAAkB,CAAC5B,QAAQ,CAAC,EAAD,EAAKiD,KAAL,EAAY;AAC/DuD,IAAAA,QAAQ,EAAEA,QADqD;AAE/D8F,IAAAA,IAAI,EAAE;AAFyD,GAAZ,CAAT,CAA5C;AAAA,MAIIR,OAAO,GAAGO,mBAAmB,CAAC,CAAD,CAJjC;AAAA,MAKIE,qBAAqB,GAAGF,mBAAmB,CAAC,CAAD,CAL/C;;AAOA,MAAIxI,MAAJ,EAAY;AACV,WAAO0H,kBAAkB,EAAzB;AACD;;AAED,SAAO,aAAarL,KAAK,CAAC6K,aAAN,CAAoBpJ,mBAApB,EAAyC;AAC3D6K,IAAAA,WAAW,EAAE/L,IAAI,CAACwC,KAAD,EAAQjB,mBAAR,CAD0C;AAE3DkB,IAAAA,GAAG,EAAEsC,UAFsD;AAG3DjD,IAAAA,SAAS,EAAEA,SAHgD;AAI3DkK,IAAAA,SAAS,EAAEtL,qBAAqB,CAACsH,aAAD,EAAgBjE,OAAhB,CAJ2B;AAK3DC,IAAAA,QAAQ,EAAEtD,qBAAqB,CAACuH,YAAD,EAAejE,QAAf,CAL4B;AAM3DiI,IAAAA,OAAO,EAAEnB;AANkD,GAAzC,EAOjB,aAAarL,KAAK,CAAC6K,aAAN,CAAoB5H,SAApB,EAA+B;AAC7C+H,IAAAA,SAAS,EAAEY,OADkC;AAE7CpI,IAAAA,KAAK,EAAEA;AAFsC,GAA/B,EAGb,aAAaxD,KAAK,CAAC6K,aAAN,CAAoBvJ,YAApB,EAAkCxB,QAAQ,CAAC,EAAD,EAAKQ,IAAI,CAACyE,IAAD,EAAO,GAAG0H,MAAH,CAAU1K,mBAAV,EAA+BsK,qBAA/B,CAAP,CAAT,EAAwE;AAChIpI,IAAAA,EAAE,EAAEA,EAD4H;AAEhIjB,IAAAA,GAAG,EAAEwC,SAF2H;AAGhItD,IAAAA,EAAE,EAAEqB,QAH4H;AAIhIH,IAAAA,QAAQ,EAAEA,QAJsH;AAKhIoB,IAAAA,OAAO,EAAEvD,qBAAqB,CAAC2H,WAAD,EAAcpE,OAAd,CALkG;AAMhI4D,IAAAA,SAAS,EAAEY,eANqH;AAOhI5G,IAAAA,SAAS,EAAEA,SAAS,IAAI,CAACgB,QAPuG;AAQhIkD,IAAAA,QAAQ,EAAEA,QARsH;AAShIrB,IAAAA,MAAM,EAAEA,MATwH;AAUhI5C,IAAAA,SAAS,EAAEA,SAVqH;AAWhIqK,IAAAA,UAAU,EAAEhJ;AAXoH,GAAxE,CAA1C,EAYZuI,eAAe,KAAK3I,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuC,KAAK,CAA5C,GAAgDA,MAAM,CAACH,WAA5D,CAZH,CAHA,CAPI,CAApB;AAuBD,CArc2B,CAA5B;AAscAN,QAAQ,CAAC8J,WAAT,GAAuB,UAAvB;AACA9J,QAAQ,CAACZ,YAAT,GAAwBA,YAAxB;AACAY,QAAQ,CAAC+J,SAAT,GAAqB9M,QAAQ,CAAC,EAAD,EAAKkC,mBAAL,EAA0B;AACrDQ,EAAAA,kBAAkB,EAAEnC,SAAS,CAACwM,KADuB;AAErDvJ,EAAAA,MAAM,EAAEjD,SAAS,CAACyM,GAFmC;AAGrDxK,EAAAA,UAAU,EAAEjC,SAAS,CAAC0M,KAAV,CAAgB,CAAC,SAAD,EAAY,QAAZ,CAAhB,CAHyC;AAIrD3I,EAAAA,UAAU,EAAE/D,SAAS,CAAC2M,IAJ+B;AAKrDtI,EAAAA,QAAQ,EAAErE,SAAS,CAAC2M,IALiC;AAMrDrI,EAAAA,QAAQ,EAAEtE,SAAS,CAAC2M,IANiC;AAOrD5K,EAAAA,SAAS,EAAE/B,SAAS,CAAC4M,IAPgC;AAQrD/I,EAAAA,cAAc,EAAE7D,SAAS,CAAC2M,IAR2B;AASrDlJ,EAAAA,SAAS,EAAEzD,SAAS,CAAC6M,MATgC;AAUrDnJ,EAAAA,UAAU,EAAE1D,SAAS,CAAC8M,SAAV,CAAoB,CAAC9M,SAAS,CAAC6M,MAAX,EAAmB7M,SAAS,CAAC+M,MAA7B,CAApB,CAVyC;AAWrDxK,EAAAA,UAAU,EAAEvC,SAAS,CAAC4M,IAX+B;AAYrDtJ,EAAAA,MAAM,EAAEtD,SAAS,CAAC4M,IAZmC;AAarDjJ,EAAAA,gBAAgB,EAAE3D,SAAS,CAAC4M;AAbyB,CAA1B,CAA7B;AAeA,eAAepK,QAAf","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useRef, useState, useCallback, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport omit from 'lodash/omit';\nimport pick from 'lodash/pick';\nimport isNil from 'lodash/isNil';\nimport isFunction from 'lodash/isFunction';\nimport shallowEqual from '../utils/shallowEqual';\nimport DropdownMenu from './DropdownMenu';\nimport { findNodeOfTree, flattenTree, getNodeParents } from '../utils/treeUtils';\nimport { usePaths } from './utils';\nimport { getSafeRegExpString, createChainedFunction, mergeRefs, useControlled, useCustom, useClassNames } from '../utils';\nimport { PickerToggle, PickerOverlay, SearchBar, PickerToggleTrigger, usePickerClassName, usePublicMethods, useToggleKeyDownEvent, useFocusItemValue, pickTriggerPropKeys, omitTriggerPropKeys, listPickerPropTypes } from '../Picker';\nvar defaultProps = {\n  as: 'div',\n  classPrefix: 'picker',\n  cleanable: true,\n  placement: 'bottomStart',\n  appearance: 'default',\n  data: [],\n  disabledItemValues: [],\n  childrenKey: 'children',\n  valueKey: 'value',\n  labelKey: 'label',\n  searchable: true\n};\nvar Cascader = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var Component = props.as,\n      data = props.data,\n      classPrefix = props.classPrefix,\n      childrenKey = props.childrenKey,\n      valueKey = props.valueKey,\n      labelKey = props.labelKey,\n      defaultValue = props.defaultValue,\n      placeholder = props.placeholder,\n      disabled = props.disabled,\n      disabledItemValues = props.disabledItemValues,\n      cleanable = props.cleanable,\n      overrideLocale = props.locale,\n      toggleAs = props.toggleAs,\n      style = props.style,\n      valueProp = props.value,\n      inline = props.inline,\n      menuClassName = props.menuClassName,\n      menuStyle = props.menuStyle,\n      menuWidth = props.menuWidth,\n      menuHeight = props.menuHeight,\n      searchable = props.searchable,\n      parentSelectable = props.parentSelectable,\n      placement = props.placement,\n      id = props.id,\n      renderMenuItem = props.renderMenuItem,\n      renderValue = props.renderValue,\n      renderMenu = props.renderMenu,\n      renderExtraFooter = props.renderExtraFooter,\n      onEnter = props.onEnter,\n      onExited = props.onExited,\n      onClean = props.onClean,\n      onChange = props.onChange,\n      onSelect = props.onSelect,\n      onSearch = props.onSearch,\n      onClose = props.onClose,\n      onOpen = props.onOpen,\n      getChildren = props.getChildren,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"classPrefix\", \"childrenKey\", \"valueKey\", \"labelKey\", \"defaultValue\", \"placeholder\", \"disabled\", \"disabledItemValues\", \"cleanable\", \"locale\", \"toggleAs\", \"style\", \"value\", \"inline\", \"menuClassName\", \"menuStyle\", \"menuWidth\", \"menuHeight\", \"searchable\", \"parentSelectable\", \"placement\", \"id\", \"renderMenuItem\", \"renderValue\", \"renderMenu\", \"renderExtraFooter\", \"onEnter\", \"onExited\", \"onClean\", \"onChange\", \"onSelect\", \"onSearch\", \"onClose\", \"onOpen\", \"getChildren\"]); // Use component active state to support keyboard events.\n\n\n  var _useState = useState(false),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  var _useState2 = useState(flattenTree(data)),\n      flattenData = _useState2[0],\n      setFlattenData = _useState2[1];\n\n  var triggerRef = useRef();\n  var overlayRef = useRef();\n  var targetRef = useRef();\n\n  var _useControlled = useControlled(valueProp, defaultValue),\n      value = _useControlled[0],\n      setValue = _useControlled[1];\n\n  var _usePaths = usePaths({\n    data: data,\n    valueKey: valueKey,\n    childrenKey: childrenKey,\n    value: value\n  }),\n      selectedPaths = _usePaths.selectedPaths,\n      valueToPaths = _usePaths.valueToPaths,\n      columnData = _usePaths.columnData,\n      addColumn = _usePaths.addColumn,\n      setValueToPaths = _usePaths.setValueToPaths,\n      setColumnData = _usePaths.setColumnData,\n      setSelectedPaths = _usePaths.setSelectedPaths,\n      enforceUpdate = _usePaths.enforceUpdate;\n\n  useEffect(function () {\n    setFlattenData(flattenTree(data));\n  }, [data]);\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef,\n    targetRef: targetRef\n  });\n\n  var _useCustom = useCustom('Picker', overrideLocale),\n      locale = _useCustom.locale,\n      rtl = _useCustom.rtl;\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   */\n\n\n  var hasValue = valueToPaths.length > 0 || !isNil(value) && isFunction(renderValue);\n\n  var _useClassNames = useClassNames(classPrefix),\n      prefix = _useClassNames.prefix,\n      merge = _useClassNames.merge;\n\n  var _useState3 = useState(''),\n      searchKeyword = _useState3[0],\n      setSearchKeyword = _useState3[1];\n\n  var someKeyword = useCallback(function (item, keyword) {\n    if (item[labelKey].match(new RegExp(getSafeRegExpString(keyword || searchKeyword), 'i'))) {\n      return true;\n    }\n\n    if (item.parent && someKeyword(item.parent)) {\n      return true;\n    }\n\n    return false;\n  }, [labelKey, searchKeyword]);\n  var getSearchResult = useCallback(function (keyword) {\n    var items = [];\n    var result = flattenData.filter(function (item) {\n      if (item[childrenKey]) {\n        return false;\n      }\n\n      return someKeyword(item, keyword);\n    });\n\n    for (var i = 0; i < result.length; i++) {\n      items.push(result[i]); // A maximum of 100 search results are returned.\n\n      if (i === 99) {\n        return items;\n      }\n    }\n\n    return items;\n  }, [childrenKey, flattenData, someKeyword]); // Used to hover the focuse item  when trigger `onKeydown`\n\n  var _useFocusItemValue = useFocusItemValue(value, {\n    rtl: rtl,\n    data: flattenData,\n    valueKey: valueKey,\n    defaultLayer: (valueToPaths === null || valueToPaths === void 0 ? void 0 : valueToPaths.length) ? valueToPaths.length - 1 : 0,\n    target: function target() {\n      return overlayRef.current;\n    },\n    callback: useCallback(function (value) {\n      enforceUpdate(value, true);\n    }, [enforceUpdate])\n  }),\n      focusItemValue = _useFocusItemValue.focusItemValue,\n      setFocusItemValue = _useFocusItemValue.setFocusItemValue,\n      setLayer = _useFocusItemValue.setLayer,\n      setKeys = _useFocusItemValue.setKeys,\n      onFocusItem = _useFocusItemValue.onKeyDown;\n\n  var handleSearch = useCallback(function (value, event) {\n    var items = getSearchResult(value);\n    setSearchKeyword(value);\n    onSearch === null || onSearch === void 0 ? void 0 : onSearch(value, event);\n\n    if (items === null || items === void 0 ? void 0 : items[0]) {\n      setFocusItemValue(items === null || items === void 0 ? void 0 : items[0]);\n      setLayer(0);\n      setKeys([]);\n    }\n  }, [getSearchResult, onSearch, setFocusItemValue, setKeys, setLayer]);\n  var handleEntered = useCallback(function () {\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    setActive(true);\n  }, [onOpen]);\n  var handleExited = useCallback(function () {\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n    setActive(false);\n    setSearchKeyword('');\n  }, [onClose]);\n  var handleClose = useCallback(function () {\n    var _triggerRef$current;\n\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : _triggerRef$current.close();\n  }, [triggerRef]);\n  var handleClean = useCallback(function (event) {\n    if (disabled) {\n      return;\n    }\n\n    setColumnData([data]);\n    setValue(null);\n    setSelectedPaths([]);\n    setValueToPaths([]);\n    onChange === null || onChange === void 0 ? void 0 : onChange(null, event);\n  }, [data, disabled, onChange, setSelectedPaths, setColumnData, setValueToPaths, setValue]);\n  var handleMenuPressEnter = useCallback(function (event) {\n    var focusItem = findNodeOfTree(data, function (item) {\n      return item[valueKey] === focusItemValue;\n    });\n    var isLeafNode = focusItem && !focusItem[childrenKey];\n\n    if (isLeafNode) {\n      setValue(focusItemValue);\n      setValueToPaths(selectedPaths);\n\n      if (selectedPaths.length) {\n        setLayer(selectedPaths.length - 1);\n      }\n\n      if (!shallowEqual(value, focusItemValue)) {\n        onChange === null || onChange === void 0 ? void 0 : onChange(focusItemValue, event);\n      }\n\n      handleClose();\n    }\n  }, [childrenKey, data, focusItemValue, handleClose, onChange, selectedPaths, setLayer, setValue, setValueToPaths, value, valueKey]);\n  var onPickerKeyDown = useToggleKeyDownEvent(_extends({\n    toggle: !focusItemValue || !active,\n    triggerRef: triggerRef,\n    targetRef: targetRef,\n    overlayRef: overlayRef,\n    active: active,\n    onExit: handleClean,\n    onMenuKeyDown: onFocusItem,\n    onMenuPressEnter: handleMenuPressEnter\n  }, rest));\n\n  var handleSelect = function handleSelect(node, cascadeData, cascadePaths, isLeafNode, event) {\n    var _node$children, _triggerRef$current2;\n\n    var nextValue = node[valueKey];\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, cascadePaths, event);\n    setSelectedPaths(cascadePaths);\n    setColumnData(cascadeData); // Lazy load node's children\n\n    if (typeof getChildren === 'function' && ((_node$children = node.children) === null || _node$children === void 0 ? void 0 : _node$children.length) === 0) {\n      node.loading = true;\n      var children = getChildren(node);\n\n      if (children instanceof Promise) {\n        children.then(function (data) {\n          node.loading = false;\n          node[childrenKey] = data;\n          addColumn(data, cascadePaths.length);\n        });\n      } else {\n        node.loading = false;\n        node[childrenKey] = children;\n        addColumn(children, cascadePaths.length);\n      }\n    }\n\n    if (isLeafNode) {\n      // Determines whether the option is a leaf node, and if so, closes the picker.\n      handleClose(); // Update the selected path to the value path.\n      // That is, the selected path will be displayed on the button after clicking the child node.\n\n      setValueToPaths(cascadePaths);\n      setValue(nextValue);\n\n      if (!shallowEqual(value, nextValue)) {\n        onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n      }\n\n      return;\n    }\n    /** When the parent is optional, the value and the displayed path are updated. */\n\n\n    if (parentSelectable && !shallowEqual(value, nextValue)) {\n      setValue(nextValue);\n      onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n      setValueToPaths(cascadePaths);\n    } // Update menu position\n\n\n    (_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : _triggerRef$current2.updatePosition();\n  };\n  /**\n   * The search structure option is processed after being selected.\n   */\n\n\n  var handleSearchRowSelect = function handleSearchRowSelect(node, nodes, event) {\n    var nextValue = node[valueKey];\n    handleClose();\n    setSearchKeyword('');\n    setValue(nextValue);\n    setValueToPaths(nodes);\n    enforceUpdate(nextValue);\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, null, event);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n  };\n\n  var renderSearchRow = function renderSearchRow(item, key) {\n    var regx = new RegExp(getSafeRegExpString(searchKeyword), 'ig');\n    var nodes = getNodeParents(item);\n    nodes.push(item);\n    var formattedNodes = nodes.map(function (node) {\n      var _extends2;\n\n      var labelElements = [];\n      var a = node[labelKey].split(regx);\n      var b = node[labelKey].match(regx);\n\n      for (var i = 0; i < a.length; i++) {\n        labelElements.push(a[i]);\n\n        if (b && b[i]) {\n          labelElements.push( /*#__PURE__*/React.createElement(\"strong\", {\n            key: i\n          }, b[i]));\n        }\n      }\n\n      return _extends({}, node, (_extends2 = {}, _extends2[labelKey] = labelElements, _extends2));\n    });\n    var disabled = disabledItemValues.some(function (value) {\n      return formattedNodes.some(function (node) {\n        return node[valueKey] === value;\n      });\n    });\n    var itemClasses = prefix('cascader-row', {\n      'cascader-row-disabled': disabled,\n      'cascader-row-focus': item[valueKey] === focusItemValue\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: key,\n      \"aria-disabled\": disabled,\n      \"data-key\": item[valueKey],\n      className: itemClasses,\n      onClick: function onClick(event) {\n        if (!disabled) {\n          handleSearchRowSelect(item, nodes, event);\n        }\n      }\n    }, formattedNodes.map(function (node, index) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        key: \"col-\" + index,\n        className: prefix('cascader-col')\n      }, node[labelKey]);\n    }));\n  };\n\n  var renderSearchResultPanel = function renderSearchResultPanel() {\n    if (searchKeyword === '') {\n      return null;\n    }\n\n    var items = getSearchResult();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('cascader-search-panel'),\n      \"data-layer\": 0\n    }, items.length ? items.map(renderSearchRow) : /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('none')\n    }, locale.noResultsText));\n  };\n\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var _ref = positionProps || {},\n        left = _ref.left,\n        top = _ref.top,\n        className = _ref.className;\n\n    var styles = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n\n    var classes = merge(className, menuClassName, prefix('cascader-menu', {\n      inline: inline\n    }));\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      ref: mergeRefs(overlayRef, speakerRef),\n      className: classes,\n      style: styles,\n      target: triggerRef,\n      onKeyDown: onPickerKeyDown\n    }, searchable && /*#__PURE__*/React.createElement(SearchBar, {\n      placeholder: locale === null || locale === void 0 ? void 0 : locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeyword\n    }), renderSearchResultPanel(), searchKeyword === '' && /*#__PURE__*/React.createElement(DropdownMenu, {\n      id: id ? id + \"-listbox\" : undefined,\n      menuWidth: menuWidth,\n      menuHeight: menuHeight,\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      classPrefix: 'picker-cascader-menu',\n      cascadeData: columnData,\n      cascadePaths: selectedPaths,\n      activeItemValue: value,\n      loadingText: locale === null || locale === void 0 ? void 0 : locale.loading,\n      onSelect: handleSelect,\n      renderMenu: renderMenu,\n      renderMenuItem: renderMenuItem\n    }), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  var selectedElement = placeholder;\n\n  if (valueToPaths.length > 0) {\n    selectedElement = [];\n    valueToPaths.forEach(function (item, index) {\n      var key = item[valueKey] || item[labelKey];\n      selectedElement.push( /*#__PURE__*/React.createElement(\"span\", {\n        key: key\n      }, item[labelKey]));\n\n      if (index < valueToPaths.length - 1) {\n        selectedElement.push( /*#__PURE__*/React.createElement(\"span\", {\n          className: \"separator\",\n          key: key + \"-separator\"\n        }, ' / '));\n      }\n    });\n  }\n\n  if (!isNil(value) && isFunction(renderValue)) {\n    selectedElement = renderValue(value, valueToPaths, selectedElement); // If renderValue returns null or undefined, hasValue is false.\n\n    if (isNil(selectedElement)) {\n      hasValue = false;\n    }\n  }\n\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n    hasValue: hasValue,\n    name: 'cascader'\n  })),\n      classes = _usePickerClassName[0],\n      usedClassNamePropKeys = _usePickerClassName[1];\n\n  if (inline) {\n    return renderDropdownMenu();\n  }\n\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    pickerProps: pick(props, pickTriggerPropKeys),\n    ref: triggerRef,\n    placement: placement,\n    onEntered: createChainedFunction(handleEntered, onEnter),\n    onExited: createChainedFunction(handleExited, onExited),\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys)), {\n    id: id,\n    ref: targetRef,\n    as: toggleAs,\n    disabled: disabled,\n    onClean: createChainedFunction(handleClean, onClean),\n    onKeyDown: onPickerKeyDown,\n    cleanable: cleanable && !disabled,\n    hasValue: hasValue,\n    active: active,\n    placement: placement,\n    inputValue: value\n  }), selectedElement || (locale === null || locale === void 0 ? void 0 : locale.placeholder))));\n});\nCascader.displayName = 'Cascader';\nCascader.defaultProps = defaultProps;\nCascader.propTypes = _extends({}, listPickerPropTypes, {\n  disabledItemValues: PropTypes.array,\n  locale: PropTypes.any,\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  renderMenu: PropTypes.func,\n  onSelect: PropTypes.func,\n  onSearch: PropTypes.func,\n  cleanable: PropTypes.bool,\n  renderMenuItem: PropTypes.func,\n  menuWidth: PropTypes.number,\n  menuHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  searchable: PropTypes.bool,\n  inline: PropTypes.bool,\n  parentSelectable: PropTypes.bool\n});\nexport default Cascader;"]},"metadata":{},"sourceType":"module"}