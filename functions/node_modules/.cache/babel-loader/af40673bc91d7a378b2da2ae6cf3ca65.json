{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useState, useRef, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport pick from 'lodash/pick';\nimport omit from 'lodash/omit';\nimport isFunction from 'lodash/isFunction';\nimport isNil from 'lodash/isNil';\nimport DropdownMenu from './DropdownMenu';\nimport Checkbox from '../Checkbox';\nimport { useCascadeValue, useColumnData, useFlattenData, isSomeChildChecked } from './utils';\nimport { getNodeParents, findNodeOfTree } from '../utils/treeUtils';\nimport { getColumnsAndPaths } from '../Cascader/utils';\nimport { createChainedFunction, mergeRefs, getSafeRegExpString, useClassNames, useCustom } from '../utils';\nimport { PickerToggle, PickerOverlay, SearchBar, SelectedElement, PickerToggleTrigger, usePickerClassName, usePublicMethods, useToggleKeyDownEvent, useFocusItemValue, pickTriggerPropKeys, omitTriggerPropKeys, listPickerPropTypes } from '../Picker';\nvar defaultProps = {\n  as: 'div',\n  classPrefix: 'picker',\n  cleanable: true,\n  cascade: true,\n  countable: true,\n  placement: 'bottomStart',\n  appearance: 'default',\n  data: [],\n  disabledItemValues: [],\n  uncheckableItemValues: [],\n  childrenKey: 'children',\n  valueKey: 'value',\n  labelKey: 'label',\n  searchable: true\n};\nvar MultiCascader = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _selectedPaths;\n\n  var Component = props.as,\n      data = props.data,\n      classPrefix = props.classPrefix,\n      defaultValue = props.defaultValue,\n      valueProp = props.value,\n      valueKey = props.valueKey,\n      labelKey = props.labelKey,\n      childrenKey = props.childrenKey,\n      disabled = props.disabled,\n      disabledItemValues = props.disabledItemValues,\n      cleanable = props.cleanable,\n      overrideLocale = props.locale,\n      toggleAs = props.toggleAs,\n      style = props.style,\n      countable = props.countable,\n      cascade = props.cascade,\n      inline = props.inline,\n      placeholder = props.placeholder,\n      placement = props.placement,\n      menuWidth = props.menuWidth,\n      menuHeight = props.menuHeight,\n      menuClassName = props.menuClassName,\n      menuStyle = props.menuStyle,\n      searchable = props.searchable,\n      uncheckableItemValues = props.uncheckableItemValues,\n      id = props.id,\n      getChildren = props.getChildren,\n      renderValue = props.renderValue,\n      renderMenu = props.renderMenu,\n      renderMenuItem = props.renderMenuItem,\n      renderExtraFooter = props.renderExtraFooter,\n      onEnter = props.onEnter,\n      onExited = props.onExited,\n      onClean = props.onClean,\n      onSearch = props.onSearch,\n      onSelect = props.onSelect,\n      onChange = props.onChange,\n      onOpen = props.onOpen,\n      onClose = props.onClose,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"classPrefix\", \"defaultValue\", \"value\", \"valueKey\", \"labelKey\", \"childrenKey\", \"disabled\", \"disabledItemValues\", \"cleanable\", \"locale\", \"toggleAs\", \"style\", \"countable\", \"cascade\", \"inline\", \"placeholder\", \"placement\", \"menuWidth\", \"menuHeight\", \"menuClassName\", \"menuStyle\", \"searchable\", \"uncheckableItemValues\", \"id\", \"getChildren\", \"renderValue\", \"renderMenu\", \"renderMenuItem\", \"renderExtraFooter\", \"onEnter\", \"onExited\", \"onClean\", \"onSearch\", \"onSelect\", \"onChange\", \"onOpen\", \"onClose\"]);\n\n  var itemKeys = {\n    childrenKey: childrenKey,\n    labelKey: labelKey,\n    valueKey: valueKey\n  };\n\n  var _useState = useState(false),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  var _useFlattenData = useFlattenData(data, itemKeys),\n      flattenData = _useFlattenData.flattenData,\n      addFlattenData = _useFlattenData.addFlattenData;\n\n  var _useCascadeValue = useCascadeValue(_extends({}, itemKeys, {\n    uncheckableItemValues: uncheckableItemValues,\n    cascade: cascade,\n    value: valueProp || defaultValue\n  }), flattenData),\n      value = _useCascadeValue.value,\n      setValue = _useCascadeValue.setValue,\n      splitValue = _useCascadeValue.splitValue; // The columns displayed in the cascading panel.\n\n\n  var _useColumnData = useColumnData(flattenData),\n      columnData = _useColumnData.columnData,\n      setColumnData = _useColumnData.setColumnData,\n      addColumn = _useColumnData.addColumn; // The path after cascading data selection.\n\n\n  var _useState2 = useState(),\n      selectedPaths = _useState2[0],\n      setSelectedPaths = _useState2[1];\n\n  var triggerRef = useRef();\n  var overlayRef = useRef();\n  var targetRef = useRef();\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef,\n    targetRef: targetRef\n  });\n\n  var _useCustom = useCustom('Picker', overrideLocale),\n      locale = _useCustom.locale,\n      rtl = _useCustom.rtl;\n\n  var selectedItems = flattenData.filter(function (item) {\n    return value.some(function (v) {\n      return v === item[valueKey];\n    });\n  }) || []; // Used to hover the focuse item  when trigger `onKeydown`\n\n  var _useFocusItemValue = useFocusItemValue(selectedPaths === null || selectedPaths === void 0 ? void 0 : (_selectedPaths = selectedPaths[selectedPaths.length - 1]) === null || _selectedPaths === void 0 ? void 0 : _selectedPaths[valueKey], {\n    rtl: rtl,\n    data: flattenData,\n    valueKey: valueKey,\n    defaultLayer: (selectedPaths === null || selectedPaths === void 0 ? void 0 : selectedPaths.length) ? selectedPaths.length - 1 : 0,\n    target: function target() {\n      return overlayRef.current;\n    },\n    callback: useCallback(function (value) {\n      var _getColumnsAndPaths = getColumnsAndPaths(data, value, {\n        valueKey: valueKey,\n        childrenKey: childrenKey,\n        isAttachChildren: true\n      }),\n          columns = _getColumnsAndPaths.columns,\n          paths = _getColumnsAndPaths.paths;\n\n      setColumnData(columns);\n      setSelectedPaths(paths);\n    }, [childrenKey, data, setColumnData, valueKey])\n  }),\n      focusItemValue = _useFocusItemValue.focusItemValue,\n      setLayer = _useFocusItemValue.setLayer,\n      setKeys = _useFocusItemValue.setKeys,\n      onFocusItem = _useFocusItemValue.onKeyDown;\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   */\n\n\n  var hasValue = selectedItems.length > 0 || (valueProp === null || valueProp === void 0 ? void 0 : valueProp.length) > 0 && isFunction(renderValue);\n\n  var _useClassNames = useClassNames(classPrefix),\n      prefix = _useClassNames.prefix,\n      merge = _useClassNames.merge;\n\n  var _useState3 = useState(''),\n      searchKeyword = _useState3[0],\n      setSearchKeyword = _useState3[1];\n\n  var handleEntered = useCallback(function () {\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    setActive(true);\n  }, [onOpen]);\n  var handleExited = useCallback(function () {\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n    setActive(false);\n    setSearchKeyword('');\n  }, [onClose]);\n  var handleSelect = useCallback(function (node, cascadeData, cascadePaths, event) {\n    var _node$children, _triggerRef$current, _triggerRef$current$u;\n\n    setColumnData(cascadeData);\n    setSelectedPaths(cascadePaths); // setSelectNode(node);\n\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, cascadePaths, event); // Lazy load node's children\n\n    if (typeof getChildren === 'function' && ((_node$children = node.children) === null || _node$children === void 0 ? void 0 : _node$children.length) === 0) {\n      node.loading = true;\n      var children = getChildren(node);\n\n      if (children instanceof Promise) {\n        children.then(function (data) {\n          node.loading = false;\n          node[childrenKey] = data;\n          addFlattenData(data, node);\n          addColumn(data, cascadePaths.length);\n        });\n      } else {\n        node.loading = false;\n        node[childrenKey] = children;\n        addFlattenData(children, node);\n        addColumn(children, cascadePaths.length);\n      }\n    }\n\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$u = _triggerRef$current.updatePosition) === null || _triggerRef$current$u === void 0 ? void 0 : _triggerRef$current$u.call(_triggerRef$current);\n  }, [setColumnData, onSelect, getChildren, childrenKey, addColumn, addFlattenData]);\n  var handleCheck = useCallback(function (node, event, checked) {\n    var nodeValue = node[valueKey];\n    var nextValue = [];\n\n    if (cascade) {\n      nextValue = splitValue(node, checked, value).value;\n    } else {\n      nextValue = [].concat(value);\n\n      if (checked) {\n        nextValue.push(nodeValue);\n      } else {\n        nextValue = nextValue.filter(function (n) {\n          return n !== nodeValue;\n        });\n      }\n    }\n\n    setValue(nextValue);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n  }, [cascade, onChange, setValue, splitValue, value, valueKey]);\n  var handleClean = useCallback(function (event) {\n    if (disabled) {\n      return;\n    }\n\n    setSelectedPaths([]);\n    setValue([]);\n    setColumnData([data]);\n    onChange === null || onChange === void 0 ? void 0 : onChange([], event);\n  }, [data, disabled, onChange, setColumnData, setValue]);\n  var handleMenuPressEnter = useCallback(function (event) {\n    var _overlayRef$current;\n\n    var focusItem = findNodeOfTree(data, function (item) {\n      return item[valueKey] === focusItemValue;\n    });\n    var checkbox = (_overlayRef$current = overlayRef.current) === null || _overlayRef$current === void 0 ? void 0 : _overlayRef$current.querySelector(\"[data-key=\\\"\" + focusItemValue + \"\\\"] [type=\\\"checkbox\\\"]\");\n\n    if (checkbox) {\n      handleCheck(focusItem, event, (checkbox === null || checkbox === void 0 ? void 0 : checkbox.getAttribute('aria-checked')) !== 'true');\n    }\n  }, [data, focusItemValue, handleCheck, valueKey]);\n  var onPickerKeyDown = useToggleKeyDownEvent(_extends({\n    toggle: !focusItemValue || !active,\n    triggerRef: triggerRef,\n    targetRef: targetRef,\n    overlayRef: overlayRef,\n    active: active,\n    onExit: handleClean,\n    onMenuKeyDown: onFocusItem,\n    onMenuPressEnter: handleMenuPressEnter\n  }, rest));\n  var handleSearch = useCallback(function (value, event) {\n    setSearchKeyword(value);\n    onSearch === null || onSearch === void 0 ? void 0 : onSearch(value, event);\n\n    if (value) {\n      setLayer(0);\n    } else if (selectedPaths === null || selectedPaths === void 0 ? void 0 : selectedPaths.length) {\n      setLayer(selectedPaths.length - 1);\n    }\n\n    setKeys([]);\n  }, [onSearch, selectedPaths, setKeys, setLayer]);\n  var getSearchResult = useCallback(function () {\n    var items = [];\n    var result = flattenData.filter(function (item) {\n      if (uncheckableItemValues.some(function (value) {\n        return item[valueKey] === value;\n      })) {\n        return false;\n      }\n\n      if (item[labelKey].match(new RegExp(getSafeRegExpString(searchKeyword), 'i'))) {\n        return true;\n      }\n\n      return false;\n    });\n\n    for (var i = 0; i < result.length; i++) {\n      items.push(result[i]); // A maximum of 100 search results are returned.\n\n      if (i === 99) {\n        return items;\n      }\n    }\n\n    return items;\n  }, [flattenData, labelKey, searchKeyword, uncheckableItemValues, valueKey]);\n\n  var renderSearchRow = function renderSearchRow(item, key) {\n    var _extends2;\n\n    var nodes = getNodeParents(item);\n    var regx = new RegExp(getSafeRegExpString(searchKeyword), 'ig');\n    var labelElements = [];\n    var a = item[labelKey].split(regx);\n    var b = item[labelKey].match(regx);\n\n    for (var i = 0; i < a.length; i++) {\n      labelElements.push(a[i]);\n\n      if (b[i]) {\n        labelElements.push( /*#__PURE__*/React.createElement(\"strong\", {\n          key: i\n        }, b[i]));\n      }\n    }\n\n    nodes.push(_extends({}, item, (_extends2 = {}, _extends2[labelKey] = labelElements, _extends2)));\n    var active = value.some(function (value) {\n      if (cascade) {\n        return nodes.some(function (node) {\n          return node[valueKey] === value;\n        });\n      }\n\n      return item[valueKey] === value;\n    });\n    var disabled = disabledItemValues.some(function (value) {\n      return nodes.some(function (node) {\n        return node[valueKey] === value;\n      });\n    });\n    var itemClasses = prefix('cascader-row', {\n      'cascader-row-disabled': disabled,\n      'cascader-row-focus': item[valueKey] === focusItemValue\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: key,\n      className: itemClasses,\n      \"aria-disabled\": disabled,\n      \"data-key\": item[valueKey]\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      disabled: disabled,\n      checked: active,\n      value: item[valueKey],\n      indeterminate: cascade && !active && isSomeChildChecked(item, value, {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }),\n      onChange: function onChange(_value, checked, event) {\n        handleCheck(item, event, checked);\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: prefix('cascader-cols')\n    }, nodes.map(function (node, index) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        key: \"col-\" + index,\n        className: prefix('cascader-col')\n      }, node[labelKey]);\n    }))));\n  };\n\n  var renderSearchResultPanel = function renderSearchResultPanel() {\n    if (searchKeyword === '') {\n      return null;\n    }\n\n    var items = getSearchResult();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('cascader-search-panel'),\n      \"data-layer\": 0\n    }, items.length ? items.map(renderSearchRow) : /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('none')\n    }, locale.noResultsText));\n  };\n\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var _ref = positionProps || {},\n        left = _ref.left,\n        top = _ref.top,\n        className = _ref.className;\n\n    var styles = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n\n    var classes = merge(className, menuClassName, prefix('cascader-menu', 'multi-cascader-menu', {\n      inline: inline\n    }));\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      ref: mergeRefs(overlayRef, speakerRef),\n      className: classes,\n      style: styles,\n      target: triggerRef,\n      onKeyDown: onPickerKeyDown\n    }, searchable && /*#__PURE__*/React.createElement(SearchBar, {\n      placeholder: locale === null || locale === void 0 ? void 0 : locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeyword\n    }), renderSearchResultPanel(), searchKeyword === '' && /*#__PURE__*/React.createElement(DropdownMenu, {\n      id: id ? id + \"-listbox\" : undefined,\n      cascade: cascade,\n      menuWidth: menuWidth,\n      menuHeight: menuHeight,\n      uncheckableItemValues: uncheckableItemValues,\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      classPrefix: 'picker-cascader-menu',\n      cascadeData: columnData,\n      cascadePaths: selectedPaths,\n      value: value,\n      loadingText: locale === null || locale === void 0 ? void 0 : locale.loading,\n      onSelect: handleSelect,\n      onCheck: handleCheck,\n      renderMenu: renderMenu,\n      renderMenuItem: renderMenuItem\n    }), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  var selectedElement = placeholder;\n\n  if (selectedItems.length > 0) {\n    selectedElement = /*#__PURE__*/React.createElement(SelectedElement, {\n      selectedItems: selectedItems,\n      countable: countable,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      prefix: prefix,\n      cascade: cascade,\n      locale: locale\n    });\n  }\n\n  if (hasValue && isFunction(renderValue)) {\n    selectedElement = renderValue(value.length ? value : valueProp, selectedItems, selectedElement); // If renderValue returns null or undefined, hasValue is false.\n\n    if (isNil(selectedElement)) {\n      hasValue = false;\n    }\n  }\n\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n    hasValue: hasValue,\n    name: 'cascader'\n  })),\n      classes = _usePickerClassName[0],\n      usedClassNamePropKeys = _usePickerClassName[1];\n\n  if (inline) {\n    return renderDropdownMenu();\n  }\n\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    pickerProps: pick(props, pickTriggerPropKeys),\n    ref: triggerRef,\n    placement: placement,\n    onEnter: createChainedFunction(handleEntered, onEnter),\n    onExited: createChainedFunction(handleExited, onExited),\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys)), {\n    id: id,\n    as: toggleAs,\n    disabled: disabled,\n    ref: targetRef,\n    onClean: createChainedFunction(handleClean, onClean),\n    onKeyDown: onPickerKeyDown,\n    cleanable: cleanable && !disabled,\n    hasValue: hasValue,\n    active: active,\n    placement: placement,\n    inputValue: value\n  }), selectedElement || locale.placeholder)));\n});\nMultiCascader.displayName = 'MultiCascader';\nMultiCascader.defaultProps = defaultProps;\nMultiCascader.propTypes = _extends({}, listPickerPropTypes, {\n  value: PropTypes.array,\n  disabledItemValues: PropTypes.array,\n  locale: PropTypes.any,\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  cascade: PropTypes.bool,\n  inline: PropTypes.bool,\n  countable: PropTypes.bool,\n  menuWidth: PropTypes.number,\n  menuHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  uncheckableItemValues: PropTypes.array,\n  searchable: PropTypes.bool,\n  renderMenuItem: PropTypes.func,\n  renderMenu: PropTypes.func,\n  onSearch: PropTypes.func,\n  onSelect: PropTypes.func\n});\nexport default MultiCascader;","map":{"version":3,"sources":["C:/Programowanie/store/node_modules/rsuite/es/MultiCascader/MultiCascader.js"],"names":["_extends","_objectWithoutPropertiesLoose","React","useState","useRef","useCallback","PropTypes","pick","omit","isFunction","isNil","DropdownMenu","Checkbox","useCascadeValue","useColumnData","useFlattenData","isSomeChildChecked","getNodeParents","findNodeOfTree","getColumnsAndPaths","createChainedFunction","mergeRefs","getSafeRegExpString","useClassNames","useCustom","PickerToggle","PickerOverlay","SearchBar","SelectedElement","PickerToggleTrigger","usePickerClassName","usePublicMethods","useToggleKeyDownEvent","useFocusItemValue","pickTriggerPropKeys","omitTriggerPropKeys","listPickerPropTypes","defaultProps","as","classPrefix","cleanable","cascade","countable","placement","appearance","data","disabledItemValues","uncheckableItemValues","childrenKey","valueKey","labelKey","searchable","MultiCascader","forwardRef","props","ref","_selectedPaths","Component","defaultValue","valueProp","value","disabled","overrideLocale","locale","toggleAs","style","inline","placeholder","menuWidth","menuHeight","menuClassName","menuStyle","id","getChildren","renderValue","renderMenu","renderMenuItem","renderExtraFooter","onEnter","onExited","onClean","onSearch","onSelect","onChange","onOpen","onClose","rest","itemKeys","_useState","active","setActive","_useFlattenData","flattenData","addFlattenData","_useCascadeValue","setValue","splitValue","_useColumnData","columnData","setColumnData","addColumn","_useState2","selectedPaths","setSelectedPaths","triggerRef","overlayRef","targetRef","_useCustom","rtl","selectedItems","filter","item","some","v","_useFocusItemValue","length","defaultLayer","target","current","callback","_getColumnsAndPaths","isAttachChildren","columns","paths","focusItemValue","setLayer","setKeys","onFocusItem","onKeyDown","hasValue","_useClassNames","prefix","merge","_useState3","searchKeyword","setSearchKeyword","handleEntered","handleExited","handleSelect","node","cascadeData","cascadePaths","event","_node$children","_triggerRef$current","_triggerRef$current$u","children","loading","Promise","then","updatePosition","call","handleCheck","checked","nodeValue","nextValue","concat","push","n","handleClean","handleMenuPressEnter","_overlayRef$current","focusItem","checkbox","querySelector","getAttribute","onPickerKeyDown","toggle","onExit","onMenuKeyDown","onMenuPressEnter","handleSearch","getSearchResult","items","result","match","RegExp","i","renderSearchRow","key","_extends2","nodes","regx","labelElements","a","split","b","createElement","itemClasses","className","indeterminate","_value","map","index","renderSearchResultPanel","noResultsText","renderDropdownMenu","positionProps","speakerRef","_ref","left","top","styles","classes","searchPlaceholder","undefined","loadingText","onCheck","selectedElement","_usePickerClassName","name","usedClassNamePropKeys","pickerProps","speaker","inputValue","displayName","propTypes","array","any","oneOf","bool","number","oneOfType","string","func"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useState, useRef, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport pick from 'lodash/pick';\nimport omit from 'lodash/omit';\nimport isFunction from 'lodash/isFunction';\nimport isNil from 'lodash/isNil';\nimport DropdownMenu from './DropdownMenu';\nimport Checkbox from '../Checkbox';\nimport { useCascadeValue, useColumnData, useFlattenData, isSomeChildChecked } from './utils';\nimport { getNodeParents, findNodeOfTree } from '../utils/treeUtils';\nimport { getColumnsAndPaths } from '../Cascader/utils';\nimport { createChainedFunction, mergeRefs, getSafeRegExpString, useClassNames, useCustom } from '../utils';\nimport { PickerToggle, PickerOverlay, SearchBar, SelectedElement, PickerToggleTrigger, usePickerClassName, usePublicMethods, useToggleKeyDownEvent, useFocusItemValue, pickTriggerPropKeys, omitTriggerPropKeys, listPickerPropTypes } from '../Picker';\nvar defaultProps = {\n  as: 'div',\n  classPrefix: 'picker',\n  cleanable: true,\n  cascade: true,\n  countable: true,\n  placement: 'bottomStart',\n  appearance: 'default',\n  data: [],\n  disabledItemValues: [],\n  uncheckableItemValues: [],\n  childrenKey: 'children',\n  valueKey: 'value',\n  labelKey: 'label',\n  searchable: true\n};\nvar MultiCascader = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _selectedPaths;\n\n  var Component = props.as,\n      data = props.data,\n      classPrefix = props.classPrefix,\n      defaultValue = props.defaultValue,\n      valueProp = props.value,\n      valueKey = props.valueKey,\n      labelKey = props.labelKey,\n      childrenKey = props.childrenKey,\n      disabled = props.disabled,\n      disabledItemValues = props.disabledItemValues,\n      cleanable = props.cleanable,\n      overrideLocale = props.locale,\n      toggleAs = props.toggleAs,\n      style = props.style,\n      countable = props.countable,\n      cascade = props.cascade,\n      inline = props.inline,\n      placeholder = props.placeholder,\n      placement = props.placement,\n      menuWidth = props.menuWidth,\n      menuHeight = props.menuHeight,\n      menuClassName = props.menuClassName,\n      menuStyle = props.menuStyle,\n      searchable = props.searchable,\n      uncheckableItemValues = props.uncheckableItemValues,\n      id = props.id,\n      getChildren = props.getChildren,\n      renderValue = props.renderValue,\n      renderMenu = props.renderMenu,\n      renderMenuItem = props.renderMenuItem,\n      renderExtraFooter = props.renderExtraFooter,\n      onEnter = props.onEnter,\n      onExited = props.onExited,\n      onClean = props.onClean,\n      onSearch = props.onSearch,\n      onSelect = props.onSelect,\n      onChange = props.onChange,\n      onOpen = props.onOpen,\n      onClose = props.onClose,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"classPrefix\", \"defaultValue\", \"value\", \"valueKey\", \"labelKey\", \"childrenKey\", \"disabled\", \"disabledItemValues\", \"cleanable\", \"locale\", \"toggleAs\", \"style\", \"countable\", \"cascade\", \"inline\", \"placeholder\", \"placement\", \"menuWidth\", \"menuHeight\", \"menuClassName\", \"menuStyle\", \"searchable\", \"uncheckableItemValues\", \"id\", \"getChildren\", \"renderValue\", \"renderMenu\", \"renderMenuItem\", \"renderExtraFooter\", \"onEnter\", \"onExited\", \"onClean\", \"onSearch\", \"onSelect\", \"onChange\", \"onOpen\", \"onClose\"]);\n\n  var itemKeys = {\n    childrenKey: childrenKey,\n    labelKey: labelKey,\n    valueKey: valueKey\n  };\n\n  var _useState = useState(false),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  var _useFlattenData = useFlattenData(data, itemKeys),\n      flattenData = _useFlattenData.flattenData,\n      addFlattenData = _useFlattenData.addFlattenData;\n\n  var _useCascadeValue = useCascadeValue(_extends({}, itemKeys, {\n    uncheckableItemValues: uncheckableItemValues,\n    cascade: cascade,\n    value: valueProp || defaultValue\n  }), flattenData),\n      value = _useCascadeValue.value,\n      setValue = _useCascadeValue.setValue,\n      splitValue = _useCascadeValue.splitValue; // The columns displayed in the cascading panel.\n\n\n  var _useColumnData = useColumnData(flattenData),\n      columnData = _useColumnData.columnData,\n      setColumnData = _useColumnData.setColumnData,\n      addColumn = _useColumnData.addColumn; // The path after cascading data selection.\n\n\n  var _useState2 = useState(),\n      selectedPaths = _useState2[0],\n      setSelectedPaths = _useState2[1];\n\n  var triggerRef = useRef();\n  var overlayRef = useRef();\n  var targetRef = useRef();\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef,\n    targetRef: targetRef\n  });\n\n  var _useCustom = useCustom('Picker', overrideLocale),\n      locale = _useCustom.locale,\n      rtl = _useCustom.rtl;\n\n  var selectedItems = flattenData.filter(function (item) {\n    return value.some(function (v) {\n      return v === item[valueKey];\n    });\n  }) || []; // Used to hover the focuse item  when trigger `onKeydown`\n\n  var _useFocusItemValue = useFocusItemValue(selectedPaths === null || selectedPaths === void 0 ? void 0 : (_selectedPaths = selectedPaths[selectedPaths.length - 1]) === null || _selectedPaths === void 0 ? void 0 : _selectedPaths[valueKey], {\n    rtl: rtl,\n    data: flattenData,\n    valueKey: valueKey,\n    defaultLayer: (selectedPaths === null || selectedPaths === void 0 ? void 0 : selectedPaths.length) ? selectedPaths.length - 1 : 0,\n    target: function target() {\n      return overlayRef.current;\n    },\n    callback: useCallback(function (value) {\n      var _getColumnsAndPaths = getColumnsAndPaths(data, value, {\n        valueKey: valueKey,\n        childrenKey: childrenKey,\n        isAttachChildren: true\n      }),\n          columns = _getColumnsAndPaths.columns,\n          paths = _getColumnsAndPaths.paths;\n\n      setColumnData(columns);\n      setSelectedPaths(paths);\n    }, [childrenKey, data, setColumnData, valueKey])\n  }),\n      focusItemValue = _useFocusItemValue.focusItemValue,\n      setLayer = _useFocusItemValue.setLayer,\n      setKeys = _useFocusItemValue.setKeys,\n      onFocusItem = _useFocusItemValue.onKeyDown;\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   */\n\n\n  var hasValue = selectedItems.length > 0 || (valueProp === null || valueProp === void 0 ? void 0 : valueProp.length) > 0 && isFunction(renderValue);\n\n  var _useClassNames = useClassNames(classPrefix),\n      prefix = _useClassNames.prefix,\n      merge = _useClassNames.merge;\n\n  var _useState3 = useState(''),\n      searchKeyword = _useState3[0],\n      setSearchKeyword = _useState3[1];\n\n  var handleEntered = useCallback(function () {\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    setActive(true);\n  }, [onOpen]);\n  var handleExited = useCallback(function () {\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n    setActive(false);\n    setSearchKeyword('');\n  }, [onClose]);\n  var handleSelect = useCallback(function (node, cascadeData, cascadePaths, event) {\n    var _node$children, _triggerRef$current, _triggerRef$current$u;\n\n    setColumnData(cascadeData);\n    setSelectedPaths(cascadePaths); // setSelectNode(node);\n\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, cascadePaths, event); // Lazy load node's children\n\n    if (typeof getChildren === 'function' && ((_node$children = node.children) === null || _node$children === void 0 ? void 0 : _node$children.length) === 0) {\n      node.loading = true;\n      var children = getChildren(node);\n\n      if (children instanceof Promise) {\n        children.then(function (data) {\n          node.loading = false;\n          node[childrenKey] = data;\n          addFlattenData(data, node);\n          addColumn(data, cascadePaths.length);\n        });\n      } else {\n        node.loading = false;\n        node[childrenKey] = children;\n        addFlattenData(children, node);\n        addColumn(children, cascadePaths.length);\n      }\n    }\n\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$u = _triggerRef$current.updatePosition) === null || _triggerRef$current$u === void 0 ? void 0 : _triggerRef$current$u.call(_triggerRef$current);\n  }, [setColumnData, onSelect, getChildren, childrenKey, addColumn, addFlattenData]);\n  var handleCheck = useCallback(function (node, event, checked) {\n    var nodeValue = node[valueKey];\n    var nextValue = [];\n\n    if (cascade) {\n      nextValue = splitValue(node, checked, value).value;\n    } else {\n      nextValue = [].concat(value);\n\n      if (checked) {\n        nextValue.push(nodeValue);\n      } else {\n        nextValue = nextValue.filter(function (n) {\n          return n !== nodeValue;\n        });\n      }\n    }\n\n    setValue(nextValue);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n  }, [cascade, onChange, setValue, splitValue, value, valueKey]);\n  var handleClean = useCallback(function (event) {\n    if (disabled) {\n      return;\n    }\n\n    setSelectedPaths([]);\n    setValue([]);\n    setColumnData([data]);\n    onChange === null || onChange === void 0 ? void 0 : onChange([], event);\n  }, [data, disabled, onChange, setColumnData, setValue]);\n  var handleMenuPressEnter = useCallback(function (event) {\n    var _overlayRef$current;\n\n    var focusItem = findNodeOfTree(data, function (item) {\n      return item[valueKey] === focusItemValue;\n    });\n    var checkbox = (_overlayRef$current = overlayRef.current) === null || _overlayRef$current === void 0 ? void 0 : _overlayRef$current.querySelector(\"[data-key=\\\"\" + focusItemValue + \"\\\"] [type=\\\"checkbox\\\"]\");\n\n    if (checkbox) {\n      handleCheck(focusItem, event, (checkbox === null || checkbox === void 0 ? void 0 : checkbox.getAttribute('aria-checked')) !== 'true');\n    }\n  }, [data, focusItemValue, handleCheck, valueKey]);\n  var onPickerKeyDown = useToggleKeyDownEvent(_extends({\n    toggle: !focusItemValue || !active,\n    triggerRef: triggerRef,\n    targetRef: targetRef,\n    overlayRef: overlayRef,\n    active: active,\n    onExit: handleClean,\n    onMenuKeyDown: onFocusItem,\n    onMenuPressEnter: handleMenuPressEnter\n  }, rest));\n  var handleSearch = useCallback(function (value, event) {\n    setSearchKeyword(value);\n    onSearch === null || onSearch === void 0 ? void 0 : onSearch(value, event);\n\n    if (value) {\n      setLayer(0);\n    } else if (selectedPaths === null || selectedPaths === void 0 ? void 0 : selectedPaths.length) {\n      setLayer(selectedPaths.length - 1);\n    }\n\n    setKeys([]);\n  }, [onSearch, selectedPaths, setKeys, setLayer]);\n  var getSearchResult = useCallback(function () {\n    var items = [];\n    var result = flattenData.filter(function (item) {\n      if (uncheckableItemValues.some(function (value) {\n        return item[valueKey] === value;\n      })) {\n        return false;\n      }\n\n      if (item[labelKey].match(new RegExp(getSafeRegExpString(searchKeyword), 'i'))) {\n        return true;\n      }\n\n      return false;\n    });\n\n    for (var i = 0; i < result.length; i++) {\n      items.push(result[i]); // A maximum of 100 search results are returned.\n\n      if (i === 99) {\n        return items;\n      }\n    }\n\n    return items;\n  }, [flattenData, labelKey, searchKeyword, uncheckableItemValues, valueKey]);\n\n  var renderSearchRow = function renderSearchRow(item, key) {\n    var _extends2;\n\n    var nodes = getNodeParents(item);\n    var regx = new RegExp(getSafeRegExpString(searchKeyword), 'ig');\n    var labelElements = [];\n    var a = item[labelKey].split(regx);\n    var b = item[labelKey].match(regx);\n\n    for (var i = 0; i < a.length; i++) {\n      labelElements.push(a[i]);\n\n      if (b[i]) {\n        labelElements.push( /*#__PURE__*/React.createElement(\"strong\", {\n          key: i\n        }, b[i]));\n      }\n    }\n\n    nodes.push(_extends({}, item, (_extends2 = {}, _extends2[labelKey] = labelElements, _extends2)));\n    var active = value.some(function (value) {\n      if (cascade) {\n        return nodes.some(function (node) {\n          return node[valueKey] === value;\n        });\n      }\n\n      return item[valueKey] === value;\n    });\n    var disabled = disabledItemValues.some(function (value) {\n      return nodes.some(function (node) {\n        return node[valueKey] === value;\n      });\n    });\n    var itemClasses = prefix('cascader-row', {\n      'cascader-row-disabled': disabled,\n      'cascader-row-focus': item[valueKey] === focusItemValue\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: key,\n      className: itemClasses,\n      \"aria-disabled\": disabled,\n      \"data-key\": item[valueKey]\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      disabled: disabled,\n      checked: active,\n      value: item[valueKey],\n      indeterminate: cascade && !active && isSomeChildChecked(item, value, {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }),\n      onChange: function onChange(_value, checked, event) {\n        handleCheck(item, event, checked);\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: prefix('cascader-cols')\n    }, nodes.map(function (node, index) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        key: \"col-\" + index,\n        className: prefix('cascader-col')\n      }, node[labelKey]);\n    }))));\n  };\n\n  var renderSearchResultPanel = function renderSearchResultPanel() {\n    if (searchKeyword === '') {\n      return null;\n    }\n\n    var items = getSearchResult();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('cascader-search-panel'),\n      \"data-layer\": 0\n    }, items.length ? items.map(renderSearchRow) : /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('none')\n    }, locale.noResultsText));\n  };\n\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var _ref = positionProps || {},\n        left = _ref.left,\n        top = _ref.top,\n        className = _ref.className;\n\n    var styles = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n\n    var classes = merge(className, menuClassName, prefix('cascader-menu', 'multi-cascader-menu', {\n      inline: inline\n    }));\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      ref: mergeRefs(overlayRef, speakerRef),\n      className: classes,\n      style: styles,\n      target: triggerRef,\n      onKeyDown: onPickerKeyDown\n    }, searchable && /*#__PURE__*/React.createElement(SearchBar, {\n      placeholder: locale === null || locale === void 0 ? void 0 : locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeyword\n    }), renderSearchResultPanel(), searchKeyword === '' && /*#__PURE__*/React.createElement(DropdownMenu, {\n      id: id ? id + \"-listbox\" : undefined,\n      cascade: cascade,\n      menuWidth: menuWidth,\n      menuHeight: menuHeight,\n      uncheckableItemValues: uncheckableItemValues,\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      classPrefix: 'picker-cascader-menu',\n      cascadeData: columnData,\n      cascadePaths: selectedPaths,\n      value: value,\n      loadingText: locale === null || locale === void 0 ? void 0 : locale.loading,\n      onSelect: handleSelect,\n      onCheck: handleCheck,\n      renderMenu: renderMenu,\n      renderMenuItem: renderMenuItem\n    }), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  var selectedElement = placeholder;\n\n  if (selectedItems.length > 0) {\n    selectedElement = /*#__PURE__*/React.createElement(SelectedElement, {\n      selectedItems: selectedItems,\n      countable: countable,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      prefix: prefix,\n      cascade: cascade,\n      locale: locale\n    });\n  }\n\n  if (hasValue && isFunction(renderValue)) {\n    selectedElement = renderValue(value.length ? value : valueProp, selectedItems, selectedElement); // If renderValue returns null or undefined, hasValue is false.\n\n    if (isNil(selectedElement)) {\n      hasValue = false;\n    }\n  }\n\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n    hasValue: hasValue,\n    name: 'cascader'\n  })),\n      classes = _usePickerClassName[0],\n      usedClassNamePropKeys = _usePickerClassName[1];\n\n  if (inline) {\n    return renderDropdownMenu();\n  }\n\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    pickerProps: pick(props, pickTriggerPropKeys),\n    ref: triggerRef,\n    placement: placement,\n    onEnter: createChainedFunction(handleEntered, onEnter),\n    onExited: createChainedFunction(handleExited, onExited),\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys)), {\n    id: id,\n    as: toggleAs,\n    disabled: disabled,\n    ref: targetRef,\n    onClean: createChainedFunction(handleClean, onClean),\n    onKeyDown: onPickerKeyDown,\n    cleanable: cleanable && !disabled,\n    hasValue: hasValue,\n    active: active,\n    placement: placement,\n    inputValue: value\n  }), selectedElement || locale.placeholder)));\n});\nMultiCascader.displayName = 'MultiCascader';\nMultiCascader.defaultProps = defaultProps;\nMultiCascader.propTypes = _extends({}, listPickerPropTypes, {\n  value: PropTypes.array,\n  disabledItemValues: PropTypes.array,\n  locale: PropTypes.any,\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  cascade: PropTypes.bool,\n  inline: PropTypes.bool,\n  countable: PropTypes.bool,\n  menuWidth: PropTypes.number,\n  menuHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  uncheckableItemValues: PropTypes.array,\n  searchable: PropTypes.bool,\n  renderMenuItem: PropTypes.func,\n  renderMenu: PropTypes.func,\n  onSearch: PropTypes.func,\n  onSelect: PropTypes.func\n});\nexport default MultiCascader;"]},"metadata":{},"sourceType":"module"}