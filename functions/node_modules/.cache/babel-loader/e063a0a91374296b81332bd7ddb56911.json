{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Star from '@rsuite/icons/legacy/Star';\nimport { useClassNames, useControlled, shallowEqualArray, SIZE, KEY_CODE } from '../utils';\nimport { transformValueToCharacterMap, transformCharacterMapToValue } from './utils';\nimport Character from './Character';\nimport Plaintext from '../Plaintext';\nvar defaultProps = {\n  as: 'ul',\n  classPrefix: 'rate',\n  character: /*#__PURE__*/React.createElement(Star, null),\n  cleanable: true,\n  defaultValue: 0,\n  max: 5,\n  size: 'md'\n};\nvar Rate = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var Component = props.as,\n      character = props.character,\n      className = props.className,\n      classPrefix = props.classPrefix,\n      disabled = props.disabled,\n      max = props.max,\n      readOnly = props.readOnly,\n      vertical = props.vertical,\n      size = props.size,\n      color = props.color,\n      allowHalf = props.allowHalf,\n      valueProp = props.value,\n      defaultValue = props.defaultValue,\n      cleanable = props.cleanable,\n      plaintext = props.plaintext,\n      onChange = props.onChange,\n      renderCharacter = props.renderCharacter,\n      onChangeActive = props.onChangeActive,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"character\", \"className\", \"classPrefix\", \"disabled\", \"max\", \"readOnly\", \"vertical\", \"size\", \"color\", \"allowHalf\", \"value\", \"defaultValue\", \"cleanable\", \"plaintext\", \"onChange\", \"renderCharacter\", \"onChangeActive\"]);\n\n  var _useControlled = useControlled(valueProp, defaultValue),\n      value = _useControlled[0],\n      setValue = _useControlled[1];\n\n  var getCharacterMap = useCallback(function (v) {\n    return transformValueToCharacterMap(typeof v !== 'undefined' ? v : value, max, allowHalf);\n  }, [allowHalf, max, value]);\n\n  var _useState = useState(getCharacterMap()),\n      characterMap = _useState[0],\n      setCharacterMap = _useState[1];\n\n  var hoverValue = transformCharacterMapToValue(characterMap);\n\n  var _useClassNames = useClassNames(classPrefix),\n      merge = _useClassNames.merge,\n      withClassPrefix = _useClassNames.withClassPrefix;\n\n  var classes = merge(className, withClassPrefix(size, color, {\n    disabled: disabled,\n    readonly: readOnly\n  }));\n  var resetCharacterMap = useCallback(function () {\n    setCharacterMap(getCharacterMap());\n  }, [getCharacterMap]);\n  useEffect(function () {\n    // Update characterMap when value is updated.\n    setCharacterMap(getCharacterMap(valueProp)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [valueProp]);\n  var handleMouseLeave = useCallback(function (event) {\n    resetCharacterMap();\n    onChangeActive === null || onChangeActive === void 0 ? void 0 : onChangeActive(value, event);\n  }, [onChangeActive, resetCharacterMap, value]);\n  var handleChangeValue = useCallback(function (index, event) {\n    var nextValue = transformCharacterMapToValue(characterMap);\n\n    if (cleanable && value === nextValue && getCharacterMap(value)[index] === characterMap[index]) {\n      nextValue = 0;\n    }\n\n    if (nextValue !== value) {\n      setValue(nextValue);\n      setCharacterMap(getCharacterMap(nextValue));\n      onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n    }\n  }, [characterMap, cleanable, getCharacterMap, onChange, setValue, value]);\n  var handleKeyDown = useCallback(function (index, event) {\n    var keyCode = event.keyCode;\n    var nextValue = transformCharacterMapToValue(characterMap);\n\n    if (keyCode === KEY_CODE.RIGHT && nextValue < max) {\n      nextValue = allowHalf ? nextValue + 0.5 : nextValue + 1;\n    } else if (keyCode === KEY_CODE.LEFT && nextValue > 0) {\n      nextValue = allowHalf ? nextValue - 0.5 : nextValue - 1;\n    }\n\n    setCharacterMap(getCharacterMap(nextValue));\n\n    if (keyCode === KEY_CODE.ENTER) {\n      handleChangeValue(index, event);\n    }\n  }, [allowHalf, characterMap, getCharacterMap, handleChangeValue, max]);\n  var handleChangeCharacterMap = useCallback(function (index, key, event) {\n    var nextCharacterMap = characterMap.map(function (_item, i) {\n      if (i === index && key === 'before' && allowHalf) {\n        return 0.5;\n      }\n\n      return index >= i ? 1 : 0;\n    });\n\n    if (!shallowEqualArray(characterMap, nextCharacterMap)) {\n      setCharacterMap(nextCharacterMap);\n      onChangeActive === null || onChangeActive === void 0 ? void 0 : onChangeActive(transformCharacterMapToValue(nextCharacterMap), event);\n    }\n  }, [allowHalf, characterMap, onChangeActive]);\n  var handleClick = useCallback(function (index, key, event) {\n    handleChangeCharacterMap(index, key, event);\n    handleChangeValue(index, event);\n  }, [handleChangeCharacterMap, handleChangeValue]);\n\n  if (plaintext) {\n    return /*#__PURE__*/React.createElement(Plaintext, {\n      localeKey: \"notSelected\",\n      className: className\n    }, value + \"(\" + max + \")\");\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    role: \"radiogroup\",\n    tabIndex: 0\n  }, rest, {\n    ref: ref,\n    className: classes,\n    onMouseLeave: handleMouseLeave\n  }), characterMap.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(Character, {\n      role: \"radio\",\n      \"aria-posinset\": index + 1,\n      \"aria-setsize\": max,\n      \"aria-checked\": value === index + 1,\n      key: index,\n      status: item,\n      disabled: disabled || readOnly,\n      vertical: vertical,\n      onClick: function onClick(key, event) {\n        return handleClick(index, key, event);\n      },\n      onKeyDown: function onKeyDown(event) {\n        return handleKeyDown(index, event);\n      },\n      onMouseMove: function onMouseMove(key, event) {\n        return handleChangeCharacterMap(index, key, event);\n      }\n    }, renderCharacter ? renderCharacter(hoverValue, index) : character);\n  }));\n});\nRate.displayName = 'Rate';\nRate.defaultProps = defaultProps;\nRate.propTypes = {\n  allowHalf: PropTypes.bool,\n  character: PropTypes.node,\n  classPrefix: PropTypes.string,\n  cleanable: PropTypes.bool,\n  defaultValue: PropTypes.number,\n  disabled: PropTypes.bool,\n  max: PropTypes.number,\n  renderCharacter: PropTypes.func,\n  readOnly: PropTypes.bool,\n  size: PropTypes.oneOf(SIZE),\n  value: PropTypes.number,\n  vertical: PropTypes.bool,\n  onChange: PropTypes.func,\n  onChangeActive: PropTypes.func\n};\nexport default Rate;","map":{"version":3,"sources":["C:/Programowanie/store/node_modules/rsuite/es/Rate/Rate.js"],"names":["_extends","_objectWithoutPropertiesLoose","React","useCallback","useEffect","useState","PropTypes","Star","useClassNames","useControlled","shallowEqualArray","SIZE","KEY_CODE","transformValueToCharacterMap","transformCharacterMapToValue","Character","Plaintext","defaultProps","as","classPrefix","character","createElement","cleanable","defaultValue","max","size","Rate","forwardRef","props","ref","Component","className","disabled","readOnly","vertical","color","allowHalf","valueProp","value","plaintext","onChange","renderCharacter","onChangeActive","rest","_useControlled","setValue","getCharacterMap","v","_useState","characterMap","setCharacterMap","hoverValue","_useClassNames","merge","withClassPrefix","classes","readonly","resetCharacterMap","handleMouseLeave","event","handleChangeValue","index","nextValue","handleKeyDown","keyCode","RIGHT","LEFT","ENTER","handleChangeCharacterMap","key","nextCharacterMap","map","_item","i","handleClick","localeKey","role","tabIndex","onMouseLeave","item","status","onClick","onKeyDown","onMouseMove","displayName","propTypes","bool","node","string","number","func","oneOf"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Star from '@rsuite/icons/legacy/Star';\nimport { useClassNames, useControlled, shallowEqualArray, SIZE, KEY_CODE } from '../utils';\nimport { transformValueToCharacterMap, transformCharacterMapToValue } from './utils';\nimport Character from './Character';\nimport Plaintext from '../Plaintext';\nvar defaultProps = {\n  as: 'ul',\n  classPrefix: 'rate',\n  character: /*#__PURE__*/React.createElement(Star, null),\n  cleanable: true,\n  defaultValue: 0,\n  max: 5,\n  size: 'md'\n};\nvar Rate = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var Component = props.as,\n      character = props.character,\n      className = props.className,\n      classPrefix = props.classPrefix,\n      disabled = props.disabled,\n      max = props.max,\n      readOnly = props.readOnly,\n      vertical = props.vertical,\n      size = props.size,\n      color = props.color,\n      allowHalf = props.allowHalf,\n      valueProp = props.value,\n      defaultValue = props.defaultValue,\n      cleanable = props.cleanable,\n      plaintext = props.plaintext,\n      onChange = props.onChange,\n      renderCharacter = props.renderCharacter,\n      onChangeActive = props.onChangeActive,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"character\", \"className\", \"classPrefix\", \"disabled\", \"max\", \"readOnly\", \"vertical\", \"size\", \"color\", \"allowHalf\", \"value\", \"defaultValue\", \"cleanable\", \"plaintext\", \"onChange\", \"renderCharacter\", \"onChangeActive\"]);\n\n  var _useControlled = useControlled(valueProp, defaultValue),\n      value = _useControlled[0],\n      setValue = _useControlled[1];\n\n  var getCharacterMap = useCallback(function (v) {\n    return transformValueToCharacterMap(typeof v !== 'undefined' ? v : value, max, allowHalf);\n  }, [allowHalf, max, value]);\n\n  var _useState = useState(getCharacterMap()),\n      characterMap = _useState[0],\n      setCharacterMap = _useState[1];\n\n  var hoverValue = transformCharacterMapToValue(characterMap);\n\n  var _useClassNames = useClassNames(classPrefix),\n      merge = _useClassNames.merge,\n      withClassPrefix = _useClassNames.withClassPrefix;\n\n  var classes = merge(className, withClassPrefix(size, color, {\n    disabled: disabled,\n    readonly: readOnly\n  }));\n  var resetCharacterMap = useCallback(function () {\n    setCharacterMap(getCharacterMap());\n  }, [getCharacterMap]);\n  useEffect(function () {\n    // Update characterMap when value is updated.\n    setCharacterMap(getCharacterMap(valueProp)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [valueProp]);\n  var handleMouseLeave = useCallback(function (event) {\n    resetCharacterMap();\n    onChangeActive === null || onChangeActive === void 0 ? void 0 : onChangeActive(value, event);\n  }, [onChangeActive, resetCharacterMap, value]);\n  var handleChangeValue = useCallback(function (index, event) {\n    var nextValue = transformCharacterMapToValue(characterMap);\n\n    if (cleanable && value === nextValue && getCharacterMap(value)[index] === characterMap[index]) {\n      nextValue = 0;\n    }\n\n    if (nextValue !== value) {\n      setValue(nextValue);\n      setCharacterMap(getCharacterMap(nextValue));\n      onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n    }\n  }, [characterMap, cleanable, getCharacterMap, onChange, setValue, value]);\n  var handleKeyDown = useCallback(function (index, event) {\n    var keyCode = event.keyCode;\n    var nextValue = transformCharacterMapToValue(characterMap);\n\n    if (keyCode === KEY_CODE.RIGHT && nextValue < max) {\n      nextValue = allowHalf ? nextValue + 0.5 : nextValue + 1;\n    } else if (keyCode === KEY_CODE.LEFT && nextValue > 0) {\n      nextValue = allowHalf ? nextValue - 0.5 : nextValue - 1;\n    }\n\n    setCharacterMap(getCharacterMap(nextValue));\n\n    if (keyCode === KEY_CODE.ENTER) {\n      handleChangeValue(index, event);\n    }\n  }, [allowHalf, characterMap, getCharacterMap, handleChangeValue, max]);\n  var handleChangeCharacterMap = useCallback(function (index, key, event) {\n    var nextCharacterMap = characterMap.map(function (_item, i) {\n      if (i === index && key === 'before' && allowHalf) {\n        return 0.5;\n      }\n\n      return index >= i ? 1 : 0;\n    });\n\n    if (!shallowEqualArray(characterMap, nextCharacterMap)) {\n      setCharacterMap(nextCharacterMap);\n      onChangeActive === null || onChangeActive === void 0 ? void 0 : onChangeActive(transformCharacterMapToValue(nextCharacterMap), event);\n    }\n  }, [allowHalf, characterMap, onChangeActive]);\n  var handleClick = useCallback(function (index, key, event) {\n    handleChangeCharacterMap(index, key, event);\n    handleChangeValue(index, event);\n  }, [handleChangeCharacterMap, handleChangeValue]);\n\n  if (plaintext) {\n    return /*#__PURE__*/React.createElement(Plaintext, {\n      localeKey: \"notSelected\",\n      className: className\n    }, value + \"(\" + max + \")\");\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    role: \"radiogroup\",\n    tabIndex: 0\n  }, rest, {\n    ref: ref,\n    className: classes,\n    onMouseLeave: handleMouseLeave\n  }), characterMap.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(Character, {\n      role: \"radio\",\n      \"aria-posinset\": index + 1,\n      \"aria-setsize\": max,\n      \"aria-checked\": value === index + 1,\n      key: index,\n      status: item,\n      disabled: disabled || readOnly,\n      vertical: vertical,\n      onClick: function onClick(key, event) {\n        return handleClick(index, key, event);\n      },\n      onKeyDown: function onKeyDown(event) {\n        return handleKeyDown(index, event);\n      },\n      onMouseMove: function onMouseMove(key, event) {\n        return handleChangeCharacterMap(index, key, event);\n      }\n    }, renderCharacter ? renderCharacter(hoverValue, index) : character);\n  }));\n});\nRate.displayName = 'Rate';\nRate.defaultProps = defaultProps;\nRate.propTypes = {\n  allowHalf: PropTypes.bool,\n  character: PropTypes.node,\n  classPrefix: PropTypes.string,\n  cleanable: PropTypes.bool,\n  defaultValue: PropTypes.number,\n  disabled: PropTypes.bool,\n  max: PropTypes.number,\n  renderCharacter: PropTypes.func,\n  readOnly: PropTypes.bool,\n  size: PropTypes.oneOf(SIZE),\n  value: PropTypes.number,\n  vertical: PropTypes.bool,\n  onChange: PropTypes.func,\n  onChangeActive: PropTypes.func\n};\nexport default Rate;"]},"metadata":{},"sourceType":"module"}