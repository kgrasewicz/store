{"ast":null,"code":"function _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      return function () {\n        if (i >= o.length) return {\n          done: true\n        };\n        return {\n          done: false,\n          value: o[i++]\n        };\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  it = o[Symbol.iterator]();\n  return it.next.bind(it);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport { on } from 'dom-lib';\nimport { useCallback, useRef, useState } from 'react';\nimport AutoScroller from './AutoScroller';\nimport { closestNode, getEdgeOffset, getScrollingParent, isContainInteractiveElement, setInlineStyles, setTransitionDuration, setTranslate3d } from './utils';\nimport useManager from './useManager';\n\nvar useSortHelper = function useSortHelper(config) {\n  var autoScroll = config.autoScroll,\n      pressDelay = config.pressDelay,\n      transitionDuration = config.transitionDuration,\n      onSort = config.onSort,\n      onSortEnd = config.onSortEnd,\n      onSortMove = config.onSortMove,\n      onSortStart = config.onSortStart;\n\n  var _useState = useState(false),\n      sorting = _useState[0],\n      setSorting = _useState[1];\n\n  var containerRef = useRef(null);\n  var pressTimer = useRef();\n\n  var _useManager = useManager(),\n      listItemRegister = _useManager.listItemRegister,\n      getManagedItem = _useManager.getManagedItem,\n      getOrderedItems = _useManager.getOrderedItems;\n  /**\n   * start dragging\n   * */\n\n\n  var handlePress = useCallback(function (mouseDownEvent, targetNode, curManagedItem) {\n    var _activeNodeHelper;\n\n    var listItemBaseClassName = targetNode.classList[0]; // get list item base className\n\n    var helperElementClass = listItemBaseClassName + \"-helper\";\n    var holderElementClass = listItemBaseClassName + \"-holder\"; // data\n\n    var containerElement = containerRef.current;\n    var activeNode = curManagedItem.node;\n    var activeNodeOldIndex = curManagedItem.info.index;\n    var activeNodeNextIndex = curManagedItem.info.index;\n    var activeNodeHolderTranslate = {\n      x: 0,\n      y: 0\n    };\n    var animatedNodesOffset = []; // all list item offset\n    // init scroller\n\n    var scrollContainer = getScrollingParent(containerElement) || containerElement;\n    var autoScroller = new AutoScroller(scrollContainer, function (offset) {\n      activeNodeHolderTranslate.x += offset.left;\n      activeNodeHolderTranslate.y += offset.top;\n    });\n    var activeNodeBoundingClientRect = activeNode.getBoundingClientRect();\n    var activeNodeOffsetEdge = getEdgeOffset(activeNode, containerElement);\n    var activeNodeStyle = getComputedStyle(activeNode);\n    var activeNodeHelper = activeNode.cloneNode(true);\n    (_activeNodeHelper = activeNodeHelper) === null || _activeNodeHelper === void 0 ? void 0 : _activeNodeHelper.classList.add(helperElementClass);\n    setInlineStyles(activeNodeHelper, {\n      position: 'fixed',\n      width: activeNodeBoundingClientRect.width + \"px\",\n      height: activeNodeBoundingClientRect.height + \"px\",\n      left: activeNodeBoundingClientRect.left - parseFloat(activeNodeStyle.marginLeft) + \"px\",\n      top: activeNodeBoundingClientRect.top - parseFloat(activeNodeStyle.marginTop) + \"px\"\n    });\n    activeNode.classList.add(holderElementClass);\n    document.body.appendChild(activeNodeHelper);\n\n    var getContainerScrollDelta = function getContainerScrollDelta() {\n      return {\n        left: scrollContainer.scrollLeft - scrollContainer.scrollLeft,\n        top: scrollContainer.scrollTop - scrollContainer.scrollTop\n      };\n    };\n\n    var getHolderTranslate = function getHolderTranslate() {\n      return animatedNodesOffset.reduce(function (acc, item) {\n        return {\n          x: acc.x + item.x,\n          y: acc.y + item.y\n        };\n      }, {\n        x: 0,\n        y: 0\n      });\n    };\n\n    var sortMouseMoveListener = on(window, 'mousemove', function (mouseOverEvent) {\n      // Update helper position\n      var offset = {\n        x: (mouseOverEvent === null || mouseOverEvent === void 0 ? void 0 : mouseOverEvent.pageX) || 0,\n        y: (mouseOverEvent === null || mouseOverEvent === void 0 ? void 0 : mouseOverEvent.pageY) || 0\n      };\n      var containerScrollDelta = getContainerScrollDelta();\n      var containerBoundingRect = scrollContainer.getBoundingClientRect();\n      activeNodeHolderTranslate = {\n        x: offset.x - mouseDownEvent.pageX,\n        y: offset.y - mouseDownEvent.pageY\n      };\n      setTranslate3d(activeNodeHelper, activeNodeHolderTranslate); // animate\n\n      activeNodeNextIndex = -1;\n      var listItemManagerRefs = getOrderedItems(curManagedItem.info.collection);\n      var sortingOffsetY = activeNodeOffsetEdge.top + activeNodeHolderTranslate.y + containerScrollDelta.top;\n      var activeNodeHeight = parseFloat(activeNodeStyle.height) || 0;\n\n      for (var i = 0, len = listItemManagerRefs.length; i < len; i++) {\n        var currentNode = listItemManagerRefs[i].node;\n        var currentNodeIndex = listItemManagerRefs[i].info.index;\n        var offsetY = activeNodeBoundingClientRect.height > currentNode.offsetHeight ? currentNode.offsetHeight / 2 : activeNodeBoundingClientRect.height / 2;\n        var translate = {\n          x: 0,\n          y: 0\n        }; // If we haven't cached the node's offsetTop / offsetLeft value\n\n        var curEdgeOffset = listItemManagerRefs[i].edgeOffset || getEdgeOffset(currentNode, containerElement);\n        listItemManagerRefs[i].edgeOffset = curEdgeOffset; // Get a reference to the next node\n\n        var prvNode = i > 0 && listItemManagerRefs[i - 1];\n        var nextNode = i < len - 1 && listItemManagerRefs[i + 1]; // Also cache the node's edge offset if needed.\n\n        if (prvNode && !prvNode.edgeOffset) {\n          prvNode.edgeOffset = getEdgeOffset(prvNode.node, containerElement);\n        }\n\n        if (nextNode && !nextNode.edgeOffset) {\n          nextNode.edgeOffset = getEdgeOffset(nextNode.node, containerElement);\n        } // If the node is the one we're currently animating, skip it\n\n\n        if (currentNodeIndex === activeNodeOldIndex) {\n          continue;\n        }\n\n        if (prvNode && currentNodeIndex > activeNodeOldIndex && sortingOffsetY + offsetY >= curEdgeOffset.top) {\n          translate.y = -activeNodeHeight;\n          animatedNodesOffset[currentNodeIndex] = {\n            x: 0,\n            y: currentNode.offsetHeight\n          };\n          activeNodeNextIndex = currentNodeIndex;\n        } else if (nextNode && currentNodeIndex < activeNodeOldIndex && sortingOffsetY <= curEdgeOffset.top + offsetY) {\n          translate.y = activeNodeHeight;\n          animatedNodesOffset[currentNodeIndex] = {\n            x: 0,\n            y: -currentNode.offsetHeight\n          };\n\n          if (activeNodeNextIndex === -1) {\n            activeNodeNextIndex = currentNodeIndex;\n          }\n        } else {\n          animatedNodesOffset[currentNodeIndex] = {\n            x: 0,\n            y: 0\n          };\n        }\n\n        setTransitionDuration(currentNode, transitionDuration);\n        setTranslate3d(currentNode, translate); // translate holder\n\n        setTranslate3d(activeNode, getHolderTranslate());\n      }\n\n      if (activeNodeNextIndex === -1) {\n        activeNodeNextIndex = activeNodeOldIndex;\n      } // auto scroll\n\n\n      if (autoScroll) {\n        autoScroller.update({\n          width: activeNodeBoundingClientRect.width,\n          height: activeNodeBoundingClientRect.height,\n          translate: activeNodeHolderTranslate,\n          maxTranslate: {\n            y: containerBoundingRect.top + containerBoundingRect.height - activeNodeBoundingClientRect.top - activeNodeBoundingClientRect.height / 2\n          },\n          minTranslate: {\n            y: containerBoundingRect.top - activeNodeBoundingClientRect.top - activeNodeBoundingClientRect.height / 2\n          }\n        });\n      }\n\n      onSortMove === null || onSortMove === void 0 ? void 0 : onSortMove({\n        collection: curManagedItem.info.collection,\n        node: activeNode,\n        oldIndex: activeNodeOldIndex,\n        newIndex: activeNodeNextIndex\n      }, mouseOverEvent);\n    }, {\n      passive: false\n    });\n    var sortMouseEndListener = on(window, 'mouseup', function (event) {\n      // Remove the event listeners\n      sortMouseMoveListener.off();\n      sortMouseEndListener.off();\n      var holderTranslate = getHolderTranslate();\n      var containerScrollDelta = getContainerScrollDelta();\n      setTranslate3d(activeNodeHelper, {\n        x: holderTranslate.x - containerScrollDelta.left,\n        y: holderTranslate.y - containerScrollDelta.top\n      });\n      setTransitionDuration(activeNodeHelper, transitionDuration); // wait for animation\n\n      setTimeout(function () {\n        var _activeNodeHelper2, _activeNodeHelper2$pa; // Remove the helper from the DOM\n\n\n        (_activeNodeHelper2 = activeNodeHelper) === null || _activeNodeHelper2 === void 0 ? void 0 : (_activeNodeHelper2$pa = _activeNodeHelper2.parentNode) === null || _activeNodeHelper2$pa === void 0 ? void 0 : _activeNodeHelper2$pa.removeChild(activeNodeHelper);\n        activeNodeHelper = null; // Remove redundant styles\n\n        activeNode.classList.remove(holderElementClass);\n        setTranslate3d(activeNode, null);\n        animatedNodesOffset = [];\n\n        for (var _iterator = _createForOfIteratorHelperLoose(getOrderedItems(curManagedItem.info.collection)), _step; !(_step = _iterator()).done;) {\n          var item = _step.value; // Clear the cached offsetTop / offsetLeft value\n\n          item.edgeOffset = null; // Remove the transforms / transitions\n\n          var el = item.node;\n          setTranslate3d(el, null);\n          setTransitionDuration(el, null);\n        } // Stop autoScroll\n\n\n        autoScroller.clear(); // Update manager state\n\n        setSorting(false); // callbacks\n\n        var callbackPayload = {\n          collection: curManagedItem.info.collection,\n          node: curManagedItem.node,\n          newIndex: activeNodeNextIndex,\n          oldIndex: activeNodeOldIndex\n        };\n        onSortEnd === null || onSortEnd === void 0 ? void 0 : onSortEnd(callbackPayload, event);\n        onSort === null || onSort === void 0 ? void 0 : onSort(callbackPayload, event);\n      }, transitionDuration);\n    }, {\n      passive: false\n    });\n    setSorting(true); // start callback\n\n    onSortStart === null || onSortStart === void 0 ? void 0 : onSortStart({\n      collection: curManagedItem.info.collection,\n      node: activeNode,\n      oldIndex: activeNodeOldIndex,\n      newIndex: activeNodeNextIndex\n    }, mouseDownEvent.nativeEvent);\n  }, [autoScroll, getOrderedItems, onSort, onSortEnd, onSortMove, onSortStart, transitionDuration]);\n  /**\n   * Determine whether to start dragging\n   * */\n\n  var handleStart = useCallback(function (mouseDownEvent) {\n    var triggeredNode = mouseDownEvent.target;\n    var targetNode = closestNode(triggeredNode, function (el) {\n      return Boolean(getManagedItem(el));\n    });\n    var curManagedItem = getManagedItem(targetNode);\n\n    if ( // is not secondary button pressed\n    mouseDownEvent.button !== 2 && // is list item\n    Boolean(curManagedItem) && !curManagedItem.info.disabled && // is not sorting\n    !sorting && // is valid node\n    targetNode instanceof HTMLElement && // excludes interactive elements\n    !targetNode.contains(closestNode(triggeredNode, isContainInteractiveElement))) {\n      mouseDownEvent.preventDefault();\n      pressTimer.current = setTimeout(handlePress, pressDelay, mouseDownEvent, targetNode, curManagedItem);\n    }\n  }, [getManagedItem, handlePress, pressDelay, sorting]);\n  /**\n   * Clear timer after drag\n   * */\n\n  var handleEnd = useCallback(function () {\n    return clearTimeout(pressTimer.current);\n  }, []);\n  return {\n    handleStart: handleStart,\n    handleEnd: handleEnd,\n    containerRef: containerRef,\n    sorting: sorting,\n    register: listItemRegister\n  };\n};\n\nexport default useSortHelper;","map":{"version":3,"sources":["C:/Programowanie/store/node_modules/rsuite/es/List/helper/useSortHelper.js"],"names":["_createForOfIteratorHelperLoose","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","done","value","TypeError","next","bind","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","arr","len","arr2","on","useCallback","useRef","useState","AutoScroller","closestNode","getEdgeOffset","getScrollingParent","isContainInteractiveElement","setInlineStyles","setTransitionDuration","setTranslate3d","useManager","useSortHelper","config","autoScroll","pressDelay","transitionDuration","onSort","onSortEnd","onSortMove","onSortStart","_useState","sorting","setSorting","containerRef","pressTimer","_useManager","listItemRegister","getManagedItem","getOrderedItems","handlePress","mouseDownEvent","targetNode","curManagedItem","_activeNodeHelper","listItemBaseClassName","classList","helperElementClass","holderElementClass","containerElement","current","activeNode","node","activeNodeOldIndex","info","index","activeNodeNextIndex","activeNodeHolderTranslate","x","y","animatedNodesOffset","scrollContainer","autoScroller","offset","left","top","activeNodeBoundingClientRect","getBoundingClientRect","activeNodeOffsetEdge","activeNodeStyle","getComputedStyle","activeNodeHelper","cloneNode","add","position","width","height","parseFloat","marginLeft","marginTop","document","body","appendChild","getContainerScrollDelta","scrollLeft","scrollTop","getHolderTranslate","reduce","acc","item","sortMouseMoveListener","window","mouseOverEvent","pageX","pageY","containerScrollDelta","containerBoundingRect","listItemManagerRefs","collection","sortingOffsetY","activeNodeHeight","currentNode","currentNodeIndex","offsetY","offsetHeight","translate","curEdgeOffset","edgeOffset","prvNode","nextNode","update","maxTranslate","minTranslate","oldIndex","newIndex","passive","sortMouseEndListener","event","off","holderTranslate","setTimeout","_activeNodeHelper2","_activeNodeHelper2$pa","parentNode","removeChild","remove","_iterator","_step","el","clear","callbackPayload","nativeEvent","handleStart","triggeredNode","target","Boolean","button","disabled","HTMLElement","contains","preventDefault","handleEnd","clearTimeout","register"],"mappings":"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","sourcesContent":["function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } it = o[Symbol.iterator](); return it.next.bind(it); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { on } from 'dom-lib';\nimport { useCallback, useRef, useState } from 'react';\nimport AutoScroller from './AutoScroller';\nimport { closestNode, getEdgeOffset, getScrollingParent, isContainInteractiveElement, setInlineStyles, setTransitionDuration, setTranslate3d } from './utils';\nimport useManager from './useManager';\n\nvar useSortHelper = function useSortHelper(config) {\n  var autoScroll = config.autoScroll,\n      pressDelay = config.pressDelay,\n      transitionDuration = config.transitionDuration,\n      onSort = config.onSort,\n      onSortEnd = config.onSortEnd,\n      onSortMove = config.onSortMove,\n      onSortStart = config.onSortStart;\n\n  var _useState = useState(false),\n      sorting = _useState[0],\n      setSorting = _useState[1];\n\n  var containerRef = useRef(null);\n  var pressTimer = useRef();\n\n  var _useManager = useManager(),\n      listItemRegister = _useManager.listItemRegister,\n      getManagedItem = _useManager.getManagedItem,\n      getOrderedItems = _useManager.getOrderedItems;\n  /**\n   * start dragging\n   * */\n\n\n  var handlePress = useCallback(function (mouseDownEvent, targetNode, curManagedItem) {\n    var _activeNodeHelper;\n\n    var listItemBaseClassName = targetNode.classList[0]; // get list item base className\n\n    var helperElementClass = listItemBaseClassName + \"-helper\";\n    var holderElementClass = listItemBaseClassName + \"-holder\"; // data\n\n    var containerElement = containerRef.current;\n    var activeNode = curManagedItem.node;\n    var activeNodeOldIndex = curManagedItem.info.index;\n    var activeNodeNextIndex = curManagedItem.info.index;\n    var activeNodeHolderTranslate = {\n      x: 0,\n      y: 0\n    };\n    var animatedNodesOffset = []; // all list item offset\n    // init scroller\n\n    var scrollContainer = getScrollingParent(containerElement) || containerElement;\n    var autoScroller = new AutoScroller(scrollContainer, function (offset) {\n      activeNodeHolderTranslate.x += offset.left;\n      activeNodeHolderTranslate.y += offset.top;\n    });\n    var activeNodeBoundingClientRect = activeNode.getBoundingClientRect();\n    var activeNodeOffsetEdge = getEdgeOffset(activeNode, containerElement);\n    var activeNodeStyle = getComputedStyle(activeNode);\n    var activeNodeHelper = activeNode.cloneNode(true);\n    (_activeNodeHelper = activeNodeHelper) === null || _activeNodeHelper === void 0 ? void 0 : _activeNodeHelper.classList.add(helperElementClass);\n    setInlineStyles(activeNodeHelper, {\n      position: 'fixed',\n      width: activeNodeBoundingClientRect.width + \"px\",\n      height: activeNodeBoundingClientRect.height + \"px\",\n      left: activeNodeBoundingClientRect.left - parseFloat(activeNodeStyle.marginLeft) + \"px\",\n      top: activeNodeBoundingClientRect.top - parseFloat(activeNodeStyle.marginTop) + \"px\"\n    });\n    activeNode.classList.add(holderElementClass);\n    document.body.appendChild(activeNodeHelper);\n\n    var getContainerScrollDelta = function getContainerScrollDelta() {\n      return {\n        left: scrollContainer.scrollLeft - scrollContainer.scrollLeft,\n        top: scrollContainer.scrollTop - scrollContainer.scrollTop\n      };\n    };\n\n    var getHolderTranslate = function getHolderTranslate() {\n      return animatedNodesOffset.reduce(function (acc, item) {\n        return {\n          x: acc.x + item.x,\n          y: acc.y + item.y\n        };\n      }, {\n        x: 0,\n        y: 0\n      });\n    };\n\n    var sortMouseMoveListener = on(window, 'mousemove', function (mouseOverEvent) {\n      // Update helper position\n      var offset = {\n        x: (mouseOverEvent === null || mouseOverEvent === void 0 ? void 0 : mouseOverEvent.pageX) || 0,\n        y: (mouseOverEvent === null || mouseOverEvent === void 0 ? void 0 : mouseOverEvent.pageY) || 0\n      };\n      var containerScrollDelta = getContainerScrollDelta();\n      var containerBoundingRect = scrollContainer.getBoundingClientRect();\n      activeNodeHolderTranslate = {\n        x: offset.x - mouseDownEvent.pageX,\n        y: offset.y - mouseDownEvent.pageY\n      };\n      setTranslate3d(activeNodeHelper, activeNodeHolderTranslate); // animate\n\n      activeNodeNextIndex = -1;\n      var listItemManagerRefs = getOrderedItems(curManagedItem.info.collection);\n      var sortingOffsetY = activeNodeOffsetEdge.top + activeNodeHolderTranslate.y + containerScrollDelta.top;\n      var activeNodeHeight = parseFloat(activeNodeStyle.height) || 0;\n\n      for (var i = 0, len = listItemManagerRefs.length; i < len; i++) {\n        var currentNode = listItemManagerRefs[i].node;\n        var currentNodeIndex = listItemManagerRefs[i].info.index;\n        var offsetY = activeNodeBoundingClientRect.height > currentNode.offsetHeight ? currentNode.offsetHeight / 2 : activeNodeBoundingClientRect.height / 2;\n        var translate = {\n          x: 0,\n          y: 0\n        }; // If we haven't cached the node's offsetTop / offsetLeft value\n\n        var curEdgeOffset = listItemManagerRefs[i].edgeOffset || getEdgeOffset(currentNode, containerElement);\n        listItemManagerRefs[i].edgeOffset = curEdgeOffset; // Get a reference to the next node\n\n        var prvNode = i > 0 && listItemManagerRefs[i - 1];\n        var nextNode = i < len - 1 && listItemManagerRefs[i + 1]; // Also cache the node's edge offset if needed.\n\n        if (prvNode && !prvNode.edgeOffset) {\n          prvNode.edgeOffset = getEdgeOffset(prvNode.node, containerElement);\n        }\n\n        if (nextNode && !nextNode.edgeOffset) {\n          nextNode.edgeOffset = getEdgeOffset(nextNode.node, containerElement);\n        } // If the node is the one we're currently animating, skip it\n\n\n        if (currentNodeIndex === activeNodeOldIndex) {\n          continue;\n        }\n\n        if (prvNode && currentNodeIndex > activeNodeOldIndex && sortingOffsetY + offsetY >= curEdgeOffset.top) {\n          translate.y = -activeNodeHeight;\n          animatedNodesOffset[currentNodeIndex] = {\n            x: 0,\n            y: currentNode.offsetHeight\n          };\n          activeNodeNextIndex = currentNodeIndex;\n        } else if (nextNode && currentNodeIndex < activeNodeOldIndex && sortingOffsetY <= curEdgeOffset.top + offsetY) {\n          translate.y = activeNodeHeight;\n          animatedNodesOffset[currentNodeIndex] = {\n            x: 0,\n            y: -currentNode.offsetHeight\n          };\n\n          if (activeNodeNextIndex === -1) {\n            activeNodeNextIndex = currentNodeIndex;\n          }\n        } else {\n          animatedNodesOffset[currentNodeIndex] = {\n            x: 0,\n            y: 0\n          };\n        }\n\n        setTransitionDuration(currentNode, transitionDuration);\n        setTranslate3d(currentNode, translate); // translate holder\n\n        setTranslate3d(activeNode, getHolderTranslate());\n      }\n\n      if (activeNodeNextIndex === -1) {\n        activeNodeNextIndex = activeNodeOldIndex;\n      } // auto scroll\n\n\n      if (autoScroll) {\n        autoScroller.update({\n          width: activeNodeBoundingClientRect.width,\n          height: activeNodeBoundingClientRect.height,\n          translate: activeNodeHolderTranslate,\n          maxTranslate: {\n            y: containerBoundingRect.top + containerBoundingRect.height - activeNodeBoundingClientRect.top - activeNodeBoundingClientRect.height / 2\n          },\n          minTranslate: {\n            y: containerBoundingRect.top - activeNodeBoundingClientRect.top - activeNodeBoundingClientRect.height / 2\n          }\n        });\n      }\n\n      onSortMove === null || onSortMove === void 0 ? void 0 : onSortMove({\n        collection: curManagedItem.info.collection,\n        node: activeNode,\n        oldIndex: activeNodeOldIndex,\n        newIndex: activeNodeNextIndex\n      }, mouseOverEvent);\n    }, {\n      passive: false\n    });\n    var sortMouseEndListener = on(window, 'mouseup', function (event) {\n      // Remove the event listeners\n      sortMouseMoveListener.off();\n      sortMouseEndListener.off();\n      var holderTranslate = getHolderTranslate();\n      var containerScrollDelta = getContainerScrollDelta();\n      setTranslate3d(activeNodeHelper, {\n        x: holderTranslate.x - containerScrollDelta.left,\n        y: holderTranslate.y - containerScrollDelta.top\n      });\n      setTransitionDuration(activeNodeHelper, transitionDuration); // wait for animation\n\n      setTimeout(function () {\n        var _activeNodeHelper2, _activeNodeHelper2$pa;\n\n        // Remove the helper from the DOM\n        (_activeNodeHelper2 = activeNodeHelper) === null || _activeNodeHelper2 === void 0 ? void 0 : (_activeNodeHelper2$pa = _activeNodeHelper2.parentNode) === null || _activeNodeHelper2$pa === void 0 ? void 0 : _activeNodeHelper2$pa.removeChild(activeNodeHelper);\n        activeNodeHelper = null; // Remove redundant styles\n\n        activeNode.classList.remove(holderElementClass);\n        setTranslate3d(activeNode, null);\n        animatedNodesOffset = [];\n\n        for (var _iterator = _createForOfIteratorHelperLoose(getOrderedItems(curManagedItem.info.collection)), _step; !(_step = _iterator()).done;) {\n          var item = _step.value;\n          // Clear the cached offsetTop / offsetLeft value\n          item.edgeOffset = null; // Remove the transforms / transitions\n\n          var el = item.node;\n          setTranslate3d(el, null);\n          setTransitionDuration(el, null);\n        } // Stop autoScroll\n\n\n        autoScroller.clear(); // Update manager state\n\n        setSorting(false); // callbacks\n\n        var callbackPayload = {\n          collection: curManagedItem.info.collection,\n          node: curManagedItem.node,\n          newIndex: activeNodeNextIndex,\n          oldIndex: activeNodeOldIndex\n        };\n        onSortEnd === null || onSortEnd === void 0 ? void 0 : onSortEnd(callbackPayload, event);\n        onSort === null || onSort === void 0 ? void 0 : onSort(callbackPayload, event);\n      }, transitionDuration);\n    }, {\n      passive: false\n    });\n    setSorting(true); // start callback\n\n    onSortStart === null || onSortStart === void 0 ? void 0 : onSortStart({\n      collection: curManagedItem.info.collection,\n      node: activeNode,\n      oldIndex: activeNodeOldIndex,\n      newIndex: activeNodeNextIndex\n    }, mouseDownEvent.nativeEvent);\n  }, [autoScroll, getOrderedItems, onSort, onSortEnd, onSortMove, onSortStart, transitionDuration]);\n  /**\n   * Determine whether to start dragging\n   * */\n\n  var handleStart = useCallback(function (mouseDownEvent) {\n    var triggeredNode = mouseDownEvent.target;\n    var targetNode = closestNode(triggeredNode, function (el) {\n      return Boolean(getManagedItem(el));\n    });\n    var curManagedItem = getManagedItem(targetNode);\n\n    if ( // is not secondary button pressed\n    mouseDownEvent.button !== 2 && // is list item\n    Boolean(curManagedItem) && !curManagedItem.info.disabled && // is not sorting\n    !sorting && // is valid node\n    targetNode instanceof HTMLElement && // excludes interactive elements\n    !targetNode.contains(closestNode(triggeredNode, isContainInteractiveElement))) {\n      mouseDownEvent.preventDefault();\n      pressTimer.current = setTimeout(handlePress, pressDelay, mouseDownEvent, targetNode, curManagedItem);\n    }\n  }, [getManagedItem, handlePress, pressDelay, sorting]);\n  /**\n   * Clear timer after drag\n   * */\n\n  var handleEnd = useCallback(function () {\n    return clearTimeout(pressTimer.current);\n  }, []);\n  return {\n    handleStart: handleStart,\n    handleEnd: handleEnd,\n    containerRef: containerRef,\n    sorting: sorting,\n    register: listItemRegister\n  };\n};\n\nexport default useSortHelper;"]},"metadata":{},"sourceType":"module"}