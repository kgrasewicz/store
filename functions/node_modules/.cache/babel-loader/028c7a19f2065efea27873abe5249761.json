{"ast":null,"code":"import _classCallCheck from\"C:/Programowanie/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Programowanie/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Programowanie/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Programowanie/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import $ from\"jquery\";import InputForm from\"./InputForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this._isMounted=false;_this.handleRequest=function(e){if(_this.state.inputSection==\"login\"){_this.sendLoginRequest();}else{_this.sendRegisterRequest();}};_this.sendLoginRequest=function(e){_this._isMounted=true;axios.post(\"/api/users/login\",{email:$(\".cart-login__form-container__email input\").val(),password:$(\".cart-login__form-container__password input\").val(),withCredentials:true}).then(function(response){console.log(response);if(response.data==\"Valid\"){window.location.pathname=\"/shop/profile\";}}).catch(function(error){console.log(error);});};_this.sendRegisterRequest=function(e){_this._isMounted=true;console.log($(\".cart-login__form-container__email input\").val());axios.post(\"/api/users/register\",{email:$(\".cart-login__form-container__email input\").val(),password:$(\".cart-login__form-container__password input\").val(),name:$(\".cart-login__form-container__name input\").val(),surname:$(\".cart-login__form-container__surname input\").val(),withCredentials:true}).then(function(response){console.log(response.data);_this.setState({inputSection:\"register-confirmation\"});}).catch(function(error){console.log(error);});};_this.sendGetRequest=function(){_this._isMounted=true;console.log($(\".cart-login__form-container__email input\").val());axios.get(\"/api/users/getUser\",{withCredentials:true}).then(function(response){console.log(response);}).catch(function(error){console.log(error);});};_this.inputSectionHandler=function(newSection,e){_this.setState({inputSection:newSection},console.log(_this.state.inputSection));};_this.state={inputSection:\"login\"};_this.props=props;return _this;}_createClass(Login,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._isMounted=false;}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(\"div\",{className:\"cart-login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-login__form-container\",children:[/*#__PURE__*/_jsx(InputForm,{handler:this.handleRequest,section:this.state.inputSection,children:\"Sign in\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-login__form-container__buttons login\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){_this2.inputSectionHandler(_this2.state.inputSection==\"login\"?\"register\":\"login\");},className:\"cart-login__form-container__buttons__toggle\",children:this.state.inputSection==\"login\"?\"Sign up\":\"Sign in\"})})]})});}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["C:/Programowanie/store/src/Components/Shop/Login.js"],"names":["React","Component","axios","$","InputForm","Login","props","_isMounted","handleRequest","e","state","inputSection","sendLoginRequest","sendRegisterRequest","post","email","val","password","withCredentials","then","response","console","log","data","window","location","pathname","catch","error","name","surname","setState","sendGetRequest","get","inputSectionHandler","newSection"],"mappings":"oiBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,C,2FAEMC,CAAAA,K,8FAGJ,eAAYC,KAAZ,CAAmB,uCACjB,uBAAMA,KAAN,EADiB,MAFnBC,UAEmB,CAFN,KAEM,OAanBC,aAbmB,CAaH,SAACC,CAAD,CAAO,CACrB,GAAI,MAAKC,KAAL,CAAWC,YAAX,EAA2B,OAA/B,CAAwC,CACtC,MAAKC,gBAAL,GACD,CAFD,IAEO,CACL,MAAKC,mBAAL,GACD,CACF,CAnBkB,OAqBnBD,gBArBmB,CAqBA,SAACH,CAAD,CAAO,CACxB,MAAKF,UAAL,CAAkB,IAAlB,CAEAL,KAAK,CACFY,IADH,CACQ,kBADR,CAC4B,CACxBC,KAAK,CAAEZ,CAAC,CAAC,0CAAD,CAAD,CAA8Ca,GAA9C,EADiB,CAExBC,QAAQ,CAAEd,CAAC,CAAC,6CAAD,CAAD,CAAiDa,GAAjD,EAFc,CAGxBE,eAAe,CAAE,IAHO,CAD5B,EAMGC,IANH,CAMQ,SAACC,QAAD,CAAc,CAClBC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EAEA,GAAIA,QAAQ,CAACG,IAAT,EAAiB,OAArB,CAA8B,CAE5BC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,CAA2B,eAA3B,CACD,CACF,CAbH,EAcGC,KAdH,CAcS,SAACC,KAAD,CAAW,CAChBP,OAAO,CAACC,GAAR,CAAYM,KAAZ,EACD,CAhBH,EAiBD,CAzCkB,OA4CnBf,mBA5CmB,CA4CG,SAACJ,CAAD,CAAO,CAC3B,MAAKF,UAAL,CAAkB,IAAlB,CACAc,OAAO,CAACC,GAAR,CAAYnB,CAAC,CAAC,0CAAD,CAAD,CAA8Ca,GAA9C,EAAZ,EACAd,KAAK,CACFY,IADH,CACQ,qBADR,CAC+B,CAC3BC,KAAK,CAAEZ,CAAC,CAAC,0CAAD,CAAD,CAA8Ca,GAA9C,EADoB,CAE3BC,QAAQ,CAAEd,CAAC,CAAC,6CAAD,CAAD,CAAiDa,GAAjD,EAFiB,CAG3Ba,IAAI,CAAE1B,CAAC,CAAC,yCAAD,CAAD,CAA6Ca,GAA7C,EAHqB,CAI3Bc,OAAO,CAAE3B,CAAC,CAAC,4CAAD,CAAD,CAAgDa,GAAhD,EAJkB,CAK3BE,eAAe,CAAE,IALU,CAD/B,EAQGC,IARH,CAQQ,SAACC,QAAD,CAAc,CAClBC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAArB,EACA,MAAKQ,QAAL,CAAc,CAACpB,YAAY,CAAE,uBAAf,CAAd,EACD,CAXH,EAYGgB,KAZH,CAYS,SAACC,KAAD,CAAW,CAChBP,OAAO,CAACC,GAAR,CAAYM,KAAZ,EACD,CAdH,EAeD,CA9DkB,OAgEnBI,cAhEmB,CAgEF,UAAM,CACrB,MAAKzB,UAAL,CAAkB,IAAlB,CACAc,OAAO,CAACC,GAAR,CAAYnB,CAAC,CAAC,0CAAD,CAAD,CAA8Ca,GAA9C,EAAZ,EACAd,KAAK,CACF+B,GADH,CACO,oBADP,CAC6B,CAAEf,eAAe,CAAE,IAAnB,CAD7B,EAEGC,IAFH,CAEQ,SAACC,QAAD,CAAc,CAClBC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EACD,CAJH,EAKGO,KALH,CAKS,SAACC,KAAD,CAAW,CAChBP,OAAO,CAACC,GAAR,CAAYM,KAAZ,EACD,CAPH,EAQD,CA3EkB,OA6EnBM,mBA7EmB,CA6EG,SAACC,UAAD,CAAa1B,CAAb,CAAmB,CACvC,MAAKsB,QAAL,CACE,CAAEpB,YAAY,CAAEwB,UAAhB,CADF,CAEEd,OAAO,CAACC,GAAR,CAAY,MAAKZ,KAAL,CAAWC,YAAvB,CAFF,EAID,CAlFkB,CAEjB,MAAKD,KAAL,CAAa,CACXC,YAAY,CAAE,OADH,CAAb,CAIA,MAAKL,KAAL,CAAaA,KAAb,CANiB,aAOlB,C,sDAED,+BAAuB,CACrB,KAAKC,UAAL,CAAkB,KAAlB,CACD,C,sBAyED,iBAAS,iBACP,mBACE,YAAK,SAAS,CAAC,YAAf,uBACE,aAAK,SAAS,CAAC,4BAAf,wBACE,KAAC,SAAD,EACE,OAAO,CAAE,KAAKC,aADhB,CAEE,OAAO,CAAE,KAAKE,KAAL,CAAWC,YAFtB,qBADF,cAQE,YAAK,SAAS,CAAC,2CAAf,uBACE,eACE,OAAO,CAAE,iBAACF,CAAD,CAAO,CACd,MAAI,CAACyB,mBAAL,CACE,MAAI,CAACxB,KAAL,CAAWC,YAAX,EAA2B,OAA3B,CAAqC,UAArC,CAAkD,OADpD,EAGD,CALH,CAME,SAAS,CAAC,6CANZ,UAQG,KAAKD,KAAL,CAAWC,YAAX,EAA2B,OAA3B,CAAqC,SAArC,CAAiD,SARpD,EADF,EARF,GADF,EADF,CAyBD,C,mBAjHiBV,S,EAoHpB,cAAeI,CAAAA,KAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport $ from \"jquery\";\r\nimport InputForm from \"./InputForm\";\r\n\r\nclass Login extends Component {\r\n  _isMounted = false;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      inputSection: \"login\",\r\n    };\r\n\r\n    this.props = props;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  handleRequest = (e) => {\r\n    if (this.state.inputSection == \"login\") {\r\n      this.sendLoginRequest();\r\n    } else {\r\n      this.sendRegisterRequest();\r\n    }\r\n  };\r\n\r\n  sendLoginRequest = (e) => {\r\n    this._isMounted = true;\r\n\r\n    axios\r\n      .post(\"/api/users/login\", {\r\n        email: $(\".cart-login__form-container__email input\").val(),\r\n        password: $(\".cart-login__form-container__password input\").val(),\r\n        withCredentials: true,\r\n      })\r\n      .then((response) => {\r\n        console.log(response);\r\n\r\n        if (response.data == \"Valid\") {\r\n\r\n          window.location.pathname = \"/shop/profile\";\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n\r\n  sendRegisterRequest = (e) => {\r\n    this._isMounted = true;\r\n    console.log($(\".cart-login__form-container__email input\").val());\r\n    axios\r\n      .post(\"/api/users/register\", {\r\n        email: $(\".cart-login__form-container__email input\").val(),\r\n        password: $(\".cart-login__form-container__password input\").val(),\r\n        name: $(\".cart-login__form-container__name input\").val(),\r\n        surname: $(\".cart-login__form-container__surname input\").val(),\r\n        withCredentials: true,\r\n      })\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        this.setState({inputSection: \"register-confirmation\"})\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  sendGetRequest = () => {\r\n    this._isMounted = true;\r\n    console.log($(\".cart-login__form-container__email input\").val());\r\n    axios\r\n      .get(\"/api/users/getUser\", { withCredentials: true })\r\n      .then((response) => {\r\n        console.log(response);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  inputSectionHandler = (newSection, e) => {\r\n    this.setState(\r\n      { inputSection: newSection },\r\n      console.log(this.state.inputSection)\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"cart-login\">\r\n        <div className=\"cart-login__form-container\">\r\n          <InputForm\r\n            handler={this.handleRequest}\r\n            section={this.state.inputSection}\r\n          >\r\n            Sign in\r\n          </InputForm>\r\n          \r\n          <div className=\"cart-login__form-container__buttons login\">\r\n            <button\r\n              onClick={(e) => {\r\n                this.inputSectionHandler(\r\n                  this.state.inputSection == \"login\" ? \"register\" : \"login\"\r\n                );\r\n              }}\r\n              className=\"cart-login__form-container__buttons__toggle\"\r\n            >\r\n              {this.state.inputSection == \"login\" ? \"Sign up\" : \"Sign in\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}