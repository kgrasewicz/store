{"ast":null,"code":"var _jsxFileName = \"C:\\\\Programowanie\\\\store\\\\src\\\\Containers\\\\Shop\\\\Cart.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { NavLink } from \"react-router-dom\";\nimport FetchProductImg from \"../../Components/Shop/FetchProductImg\";\nimport $ from \"jquery\";\nimport Promocode from \"../../Components/Shop/Promocode\";\nimport { values } from \"lodash\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Cart extends Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n\n    this.componentDidMount = () => {\n      this._isMounted = true;\n      this.fetchData();\n    };\n\n    this.componentDidUpdate = (prevProps, prevState) => {\n      if (prevState.cart !== this.state.cart) {\n        console.log(prevState.cart);\n        console.log(this.state.cart);\n        this._isMounted = true;\n        this.fetchData();\n        this._isMounted = false;\n      }\n    };\n\n    this.fetchData = () => {\n      axios.get(\"/api/cart\").then(response => {\n        if (this._isMounted) {\n          this.setState({\n            cart: response.data\n          });\n          $(\".items-counter\").text(response.data.itemsTotal);\n          console.log(response);\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.emptyCart = () => {\n      this._isMounted = true;\n      axios.delete(\"/api/cart/empty-cart\").then(response => {\n        if (response.data != null && response.data < 1) {\n          response.data = response.data;\n        } else {\n          response.data = false;\n        }\n\n        this.setState({\n          cart: response.data\n        });\n        console.log(response);\n      }).catch(error => {\n        console.log(error);\n      });\n      console.log(\"empty clicked\");\n    };\n\n    this.alterItemQuantity = (productId, size, quantity) => {\n      this._isMounted = true;\n      axios.post(\"/api/cart\", {\n        productId: productId,\n        size: size,\n        quantity: quantity\n      }).then(response => {\n        console.log(response);\n        this.fetchData();\n      }, error => {\n        console.log(error);\n      });\n    };\n\n    this.handleQuantityChange = (productId, size, quantity, currentQuantity) => {\n      const alteredQuantity = currentQuantity === 1 && quantity === -1 ? 0 : quantity;\n      this.alterItemQuantity(productId, size, alteredQuantity);\n    };\n\n    this.handlePromocode = () => {\n      let code = document.querySelector(\".cart-container__table__code input\").value;\n      axios.get(\"/api/coupons/\" + code).then(response => {\n        for (var i = 0; i < this.state.cart.items.length; i++) {\n          if (response.data[0].products == \"*\" || response.data[0].products.findIndex(x => x = this.state.cart.items[i].model) > -1) {\n            axios.post(\"/api/cart\", {\n              productId: this.state.cart.items[i].productId,\n              size: this.state.cart.items[i].size,\n              quantity: -2,\n              discount: response.data[0].discount_percent == null ? response.data[0].discount_abs : response.data[0].discount_percent * this.state.cart.items[i].price / 100\n            }).then(response => {\n              console.log(response);\n              this.fetchData();\n            }, error => {\n              console.log(error);\n            });\n          }\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.state = {\n      cart: [],\n      discount: null\n    };\n    this.props = props;\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  render() {\n    const CartMapping = () => {\n      let cart = {};\n\n      if (this.state.cart != null && this.state.cart.length < 1) {\n        this.state.cart = false;\n      }\n\n      if (this.state.cart) {\n        cart = this.state.cart.items.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"cart-container__table__products__item\",\n          children: [/*#__PURE__*/_jsxDEV(NavLink, {\n            to: \"/shop/\" + item.category + \"/\" + item.productId,\n            children: [/*#__PURE__*/_jsxDEV(FetchProductImg, {\n              className: item.model,\n              link: item.model\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart-container__table__products__item__info\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"cart__name\",\n                children: item.productName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"cart__model\",\n                children: [\"Model: \", item.model]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"cart__size\",\n                children: [\"Size: \", item.size]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart__quantityHandler\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cart__quantityHandler__add\",\n              onClick: () => this.handleQuantityChange(item.productId, item.size, 1, item.quantity),\n              children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              type: \"text\",\n              className: \"cart__qty\",\n              children: item.quantity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cart__quantityHandler__deduct\",\n              onClick: () => this.handleQuantityChange(item.productId, item.size, -1, item.quantity),\n              children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"cart__total\",\n            children: [item.price, \" PLN\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cart__exit\",\n            onClick: () => this.alterItemQuantity(item.productId, item.size, 0),\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u2A09\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-container__table__products__item__line\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this)]\n        }, item.productId + item.size, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this));\n      } else {\n        cart = /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"cart-container__table__products__item__line__empty\",\n          children: \"The cart is empty\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this);\n      }\n\n      return cart;\n    }; // const DiscountMapping = () => {\n    //   let discount = {}\n    //   if (this.state.cart != null && this.state.cart.length < 1) {\n    //     this.state.cart = false;\n    //   }\n    //   if (this.state.cart && this.state.cart.items.length > 0) { \n    //     return ( <h3 className=\"cart-container__table__discount__value\">\n    //     {-this.state.cart.items.map(item => item.discount).reduce((acc, next) => acc + next)} PLN\n    //   </h3>)\n    //   } else {\n    //     return ( <h3 className=\"cart-container__table__discount__value empty\">\n    //   </h3>)\n    //   }\n    // }\n\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-container__tooltip\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"cart-container__tooltip__icons\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"active\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              version: \"1.1\",\n              className: \"cart__icon\",\n              xmlns: \"http://www.w3.org/2000/svg\",\n              x: \"0px\",\n              y: \"0px\",\n              viewBox: \"0 0 512 512\",\n              enableBackground: \"new 0 0 512 512;\",\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M151.1,332.1L151.1,332.1C151.1,332.1,151.2,332.1,151.1,332.1l249.2,0c6.1,0,11.5-4.1,13.2-10l55-192.4\\r c1.2-4.1,0.4-8.6-2.2-12c-2.6-3.4-6.7-5.5-11-5.5H119.4L109.6,68c-1.4-6.3-7-10.8-13.4-10.8H13.7C6.2,57.3,0,63.4,0,71\\r s6.2,13.7,13.7,13.7h71.4c1.7,7.8,47,211.5,49.6,223.2c-14.6,6.3-24.8,20.9-24.8,37.8c0,22.7,18.5,41.2,41.2,41.2h249.2\\r c7.6,0,13.7-6.2,13.7-13.7c0-7.6-6.2-13.7-13.7-13.7H151.1c-7.6,0-13.7-6.2-13.7-13.7C137.4,338.2,143.5,332.1,151.1,332.1z\\r M437,139.7l-47.1,164.9H162.2l-36.6-164.9H437z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M137.4,428.2c0,22.7,18.5,41.2,41.2,41.2s41.2-18.5,41.2-41.2S201.4,387,178.6,387S137.4,405.5,137.4,428.2z M178.6,414.5\\r c7.6,0,13.7,6.2,13.7,13.7c0,7.6-6.2,13.7-13.7,13.7c-7.6,0-13.7-6.2-13.7-13.7C164.9,420.7,171,414.5,178.6,414.5z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M331.6,428.2c0,22.7,18.5,41.2,41.2,41.2c22.7,0,41.2-18.5,41.2-41.2S395.5,387,372.8,387\\r C350.1,387,331.6,405.5,331.6,428.2z M372.8,414.5c7.6,0,13.7,6.2,13.7,13.7c0,7.6-6.2,13.7-13.7,13.7c-7.6,0-13.7-6.2-13.7-13.7\\r C359.1,420.7,365.2,414.5,372.8,414.5z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              version: \"1.1\",\n              className: \"cart__icon\",\n              xmlns: \"http://www.w3.org/2000/svg\",\n              x: \"0px\",\n              y: \"0px\",\n              viewBox: \"0 0 512 512\",\n              enableBackground: \"new 0 0 512 512;\",\n              children: [/*#__PURE__*/_jsxDEV(\"g\", {\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M256,4.3c-97.6,0-177,79.4-177,177c0,33,9.1,65.2,26.4,93.1l140.5,226.4c2.7,4.3,7.4,7,12.5,7c0,0,0.1,0,0.1,0\\r c5.1,0,9.9-2.8,12.5-7.2L408,271.9c16.3-27.3,25-58.7,25-90.7C433,83.7,353.6,4.3,256,4.3z M382.7,256.8L258.2,464.6L130.5,258.8\\r c-14.4-23.2-22.2-50-22.2-77.5c0-81.3,66.4-147.7,147.7-147.7s147.6,66.4,147.6,147.7C403.6,207.9,396.3,234.1,382.7,256.8z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M256,92.8c-48.8,0-88.5,39.7-88.5,88.5c0,48.5,39.1,88.5,88.5,88.5c50.1,0,88.5-40.5,88.5-88.5\\r C344.5,132.5,304.8,92.8,256,92.8z M256,240.5c-32.7,0-59.2-26.6-59.2-59.2c0-32.5,26.7-59.2,59.2-59.2s59.1,26.7,59.1,59.2\\r C315.1,213.4,289.2,240.5,256,240.5z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              version: \"1.1\",\n              className: \"cart__icon\",\n              xmlns: \"http://www.w3.org/2000/svg\",\n              x: \"0px\",\n              y: \"0px\",\n              viewBox: \"0 0 512 512\",\n              enableBackground: \"new 0 0 512 512;\",\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M507.8,284.6C507.8,284.6,507.8,284.6,507.8,284.6L412.4,45.2c-2-5.1-7.8-7.6-12.9-5.5c0,0,0,0,0,0l-386.8,154\\r c-1.6,0.7-2.9,1.8-4,3.2c-3.2,1.7-5.2,5-5.3,8.6v257.7c0,5.5,4.4,9.9,9.9,9.9h416.4c5.5,0,9.9-4.4,9.9-9.9V322.4l62.6-24.9\\r C507.3,295.4,509.8,289.7,507.8,284.6z M419.9,453.2H23.3V215.3h396.5V453.2z M168.9,195.6l166-66.1\\r c14.8,15.6,35.3,24.4,56.8,24.5l16.6,41.6H168.9z M439.7,301.1v-95.7c0-5.5-4.4-9.9-9.9-9.9h-0.2l-21-52.8\\r c-0.2-0.4-0.5-0.9-0.8-1.2c-1.1-4.8-5.5-8-10.4-7.6c-20,1.8-39.6-6.6-52-22.4c-3.1-3.8-8.5-4.8-12.7-2.2\\r c-0.5,0.1-0.9,0.1-1.4,0.3l-202.6,80.7c-2.5,1-4.4,2.9-5.4,5.3H61.7l336-133.8l88,221L439.7,301.1z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M50.2,386.3c19.2,5.7,34.3,20.7,40,40c1.3,4.2,5.1,7.1,9.5,7.1c0.5,0,1-0.1,1.5-0.2c0.4,0.1,0.9,0.2,1.4,0.3h237.9\\r c0.4-0.1,0.8-0.1,1.2-0.2c5,1.2,9.9-1.8,11.1-6.8c0,0,0,0,0-0.1c5.7-19.3,20.8-34.3,40-40c4.7-1.4,7.6-6.1,6.8-10.9\\r c0.1-0.5,0.2-1,0.3-1.5v-79.3c-0.1-0.5-0.2-1-0.3-1.5c0.8-4.8-2.1-9.5-6.8-10.9c-19.3-5.7-34.3-20.8-40-40\\r c-1.4-4.7-6.1-7.6-11-6.8c-0.5-0.1-0.9-0.2-1.4-0.3H102.6c-0.5,0.1-1,0.2-1.5,0.3c-4.8-0.8-9.5,2.1-10.9,6.8\\r c-5.7,19.3-20.8,34.3-40,40c-4.7,1.4-7.6,6.1-6.8,10.9c-0.1,0.5-0.2,1-0.3,1.5v79.3c0.1,0.5,0.1,0.9,0.3,1.4\\r C42.6,380.2,45.5,384.9,50.2,386.3z M63,298.7c19.9-8,35.7-23.8,43.7-43.7h229.9c8,19.9,23.8,35.7,43.7,43.7v71.3\\r c-19.9,8-35.7,23.8-43.7,43.7H106.7c-8-19.9-23.8-35.7-43.7-43.7V298.7z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M221.6,393.8c32.9,0,59.5-26.6,59.5-59.5s-26.6-59.5-59.5-59.5s-59.5,26.6-59.5,59.5\\r C162.1,367.1,188.8,393.7,221.6,393.8z M221.6,294.6c21.9,0,39.7,17.8,39.7,39.7c0,21.9-17.8,39.7-39.7,39.7\\r s-39.7-17.8-39.7-39.7C181.9,312.4,199.7,294.6,221.6,294.6z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M112.5,349.2c8.2,0,14.9-6.7,14.9-14.9s-6.7-14.9-14.9-14.9s-14.9,6.7-14.9,14.9C97.7,342.5,104.3,349.2,112.5,349.2z\\r M112.5,329.3c2.7,0,5,2.2,5,5c0,2.7-2.2,5-5,5c-2.7,0-5-2.2-5-5C107.6,331.6,109.8,329.3,112.5,329.3z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M330.6,349.2c8.2,0,14.9-6.7,14.9-14.9s-6.7-14.9-14.9-14.9s-14.9,6.7-14.9,14.9C315.8,342.5,322.4,349.2,330.6,349.2z\\r M330.6,329.3c2.7,0,5,2.2,5,5c0,2.7-2.2,5-5,5s-5-2.2-5-5C325.7,331.6,327.9,329.3,330.6,329.3z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-container__table\",\n        children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"cart-container__table__legend\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"cart-container__table__legend__item\",\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Item\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"cart-container__table__legend__quantity\",\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Quantity\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"cart-container__table__legend__subtotal\",\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"cart-container__table__products\",\n          children: /*#__PURE__*/_jsxDEV(CartMapping, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 60\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cart-container__table__summary\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"cart-container__table__summary__title\",\n            children: \"Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-container__table__subtotal\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"cart-container__table__subtotal__title\",\n              children: \"Subtotal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"cart-container__table__subtotal__value\",\n              children: [this.state.cart.subTotal || 0, \" PLN\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-container__table__discount\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"cart-container__table__discount__title\",\n              children: \"Discount\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"cart-container__table__discount__value\",\n              children: [this.state.cart.discountTotal, \" PLN\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Promocode, {\n            codeHandler: this.handlePromocode\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-container__table__total\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"cart-container__table__total__title\",\n              children: \"Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"cart-container__table__total__items\",\n              children: [this.state.cart.itemsTotal || 0, \" \", this.state.cart.itemsTotal == 1 ? \"item\" : \"items\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"cart-container__table__total__value\",\n              children: [this.state.cart.subTotal || 0, \" PLN\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-container__table__buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cart-container__table__buttons__continue-shopping\",\n              children: /*#__PURE__*/_jsxDEV(NavLink, {\n                to: \"/shop/all\",\n                children: \"Continue shopping\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cart-container__table__buttons__checkout\",\n              children: \"Proceed to checkout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Cart;","map":{"version":3,"sources":["C:/Programowanie/store/src/Containers/Shop/Cart.js"],"names":["React","Component","axios","NavLink","FetchProductImg","$","Promocode","values","Cart","constructor","props","_isMounted","componentDidMount","fetchData","componentDidUpdate","prevProps","prevState","cart","state","console","log","get","then","response","setState","data","text","itemsTotal","catch","error","emptyCart","delete","alterItemQuantity","productId","size","quantity","post","handleQuantityChange","currentQuantity","alteredQuantity","handlePromocode","code","document","querySelector","value","i","items","length","products","findIndex","x","model","discount","discount_percent","discount_abs","price","componentWillUnmount","render","CartMapping","map","item","category","productName","subTotal","discountTotal"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport FetchProductImg from \"../../Components/Shop/FetchProductImg\";\r\nimport $ from \"jquery\";\r\nimport Promocode from \"../../Components/Shop/Promocode\";\r\nimport { values } from \"lodash\";\r\n\r\nclass Cart extends Component {\r\n  _isMounted = false;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      cart: [],\r\n      discount: null,\r\n    };\r\n\r\n    this.props = props;\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this._isMounted = true;\r\n    this.fetchData();\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  componentDidUpdate = (prevProps, prevState) => {\r\n    if (prevState.cart !== this.state.cart) {\r\n      console.log(prevState.cart);\r\n      console.log(this.state.cart);\r\n      this._isMounted = true;\r\n      this.fetchData();\r\n      this._isMounted = false;\r\n    }\r\n  };\r\n\r\n  fetchData = () => {\r\n    axios\r\n      .get(\"/api/cart\")\r\n      .then((response) => {\r\n        if (this._isMounted) {\r\n          this.setState({\r\n            cart: response.data,\r\n          });\r\n\r\n          $(\".items-counter\").text(response.data.itemsTotal);\r\n\r\n          console.log(response);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  emptyCart = () => {\r\n    this._isMounted = true;\r\n\r\n    axios\r\n      .delete(\"/api/cart/empty-cart\")\r\n      .then((response) => {\r\n        if (response.data != null && response.data < 1) {\r\n          response.data = response.data;\r\n        } else {\r\n          response.data = false;\r\n        }\r\n\r\n        this.setState({\r\n          cart: response.data,\r\n        });\r\n\r\n        console.log(response);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n\r\n    console.log(\"empty clicked\");\r\n  };\r\n\r\n  alterItemQuantity = (productId, size, quantity) => {\r\n    this._isMounted = true;\r\n\r\n    axios\r\n      .post(\"/api/cart\", {\r\n        productId: productId,\r\n        size: size,\r\n        quantity: quantity,\r\n      })\r\n      .then(\r\n        (response) => {\r\n          console.log(response);\r\n          this.fetchData();\r\n        },\r\n        (error) => {\r\n          console.log(error);\r\n        }\r\n      );\r\n  };\r\n\r\n  handleQuantityChange = (productId, size, quantity, currentQuantity) => {\r\n    const alteredQuantity =\r\n      currentQuantity === 1 && quantity === -1 ? 0 : quantity;\r\n\r\n    this.alterItemQuantity(productId, size, alteredQuantity);\r\n  };\r\n\r\n  handlePromocode = () => {\r\n    let code = document.querySelector(\".cart-container__table__code input\")\r\n      .value;\r\n\r\n    axios\r\n      .get(\"/api/coupons/\" + code)\r\n      .then((response) => {\r\n        for (var i = 0; i < this.state.cart.items.length; i++) {\r\n          if (\r\n            response.data[0].products == \"*\" ||\r\n            response.data[0].products.findIndex(\r\n              (x) => (x = this.state.cart.items[i].model)\r\n            ) > -1\r\n          ) {\r\n\r\n\r\n            axios\r\n              .post(\"/api/cart\", {\r\n                productId: this.state.cart.items[i].productId,\r\n                size: this.state.cart.items[i].size,\r\n                quantity: -2,\r\n                discount: response.data[0].discount_percent == null ? response.data[0].discount_abs : response.data[0].discount_percent*this.state.cart.items[i].price/100\r\n              })\r\n              .then(\r\n                (response) => {\r\n                  console.log(response);\r\n                  this.fetchData();\r\n                },\r\n                (error) => {\r\n                  console.log(error);\r\n                }\r\n              );\r\n          }\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const CartMapping = () => {\r\n      let cart = {};\r\n\r\n      if (this.state.cart != null && this.state.cart.length < 1) {\r\n        this.state.cart = false;\r\n      }\r\n\r\n      if (this.state.cart) {\r\n        cart = this.state.cart.items.map((item) => (\r\n          <li\r\n            className=\"cart-container__table__products__item\"\r\n            key={item.productId + item.size}\r\n          >\r\n            <NavLink to={\"/shop/\" + item.category + \"/\" + item.productId}>\r\n              <FetchProductImg className={item.model} link={item.model} />\r\n              <div className=\"cart-container__table__products__item__info\">\r\n                <h2 className=\"cart__name\">{item.productName}</h2>\r\n                <h3 className=\"cart__model\">Model: {item.model}</h3>\r\n                <h3 className=\"cart__size\">Size: {item.size}</h3>\r\n              </div>\r\n            </NavLink>\r\n            <div className=\"cart__quantityHandler\">\r\n              <button\r\n                className=\"cart__quantityHandler__add\"\r\n                onClick={() =>\r\n                  this.handleQuantityChange(\r\n                    item.productId,\r\n                    item.size,\r\n                    1,\r\n                    item.quantity\r\n                  )\r\n                }\r\n              >\r\n                <h4>+</h4>\r\n              </button>\r\n              <h2 type=\"text\" className=\"cart__qty\">\r\n                {item.quantity}\r\n              </h2>\r\n              <button\r\n                className=\"cart__quantityHandler__deduct\"\r\n                onClick={() =>\r\n                  this.handleQuantityChange(\r\n                    item.productId,\r\n                    item.size,\r\n                    -1,\r\n                    item.quantity\r\n                  )\r\n                }\r\n              >\r\n                <h4>-</h4>\r\n              </button>\r\n            </div>\r\n            <h4 className=\"cart__total\">{item.price} PLN</h4>\r\n            <button\r\n              className=\"cart__exit\"\r\n              onClick={() =>\r\n                this.alterItemQuantity(item.productId, item.size, 0)\r\n              }\r\n            >\r\n              <h2>⨉</h2>\r\n            </button>\r\n            <div className=\"cart-container__table__products__item__line\"></div>\r\n          </li>\r\n        ));\r\n      } else {\r\n        cart = (\r\n          <li className=\"cart-container__table__products__item__line__empty\">\r\n            The cart is empty\r\n          </li>\r\n        );\r\n      }\r\n\r\n      return cart;\r\n    };\r\n\r\n    // const DiscountMapping = () => {\r\n    //   let discount = {}\r\n\r\n    //   if (this.state.cart != null && this.state.cart.length < 1) {\r\n    //     this.state.cart = false;\r\n    //   }\r\n    //   if (this.state.cart && this.state.cart.items.length > 0) { \r\n    //     return ( <h3 className=\"cart-container__table__discount__value\">\r\n    //     {-this.state.cart.items.map(item => item.discount).reduce((acc, next) => acc + next)} PLN\r\n    //   </h3>)\r\n        \r\n    //   } else {\r\n    //     return ( <h3 className=\"cart-container__table__discount__value empty\">\r\n        \r\n    //   </h3>)\r\n    //   }\r\n\r\n    // }\r\n\r\n    return (\r\n      <div className=\"cart-container\">\r\n        <div className=\"cart-container__tooltip\">\r\n          <h1>cart</h1>\r\n          <ul className=\"cart-container__tooltip__icons\">\r\n            <li className=\"active\">\r\n              <svg\r\n                version=\"1.1\"\r\n                className=\"cart__icon\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                x=\"0px\"\r\n                y=\"0px\"\r\n                viewBox=\"0 0 512 512\"\r\n                enableBackground=\"new 0 0 512 512;\"\r\n              >\r\n                <path\r\n                  d=\"M151.1,332.1L151.1,332.1C151.1,332.1,151.2,332.1,151.1,332.1l249.2,0c6.1,0,11.5-4.1,13.2-10l55-192.4\r\n\tc1.2-4.1,0.4-8.6-2.2-12c-2.6-3.4-6.7-5.5-11-5.5H119.4L109.6,68c-1.4-6.3-7-10.8-13.4-10.8H13.7C6.2,57.3,0,63.4,0,71\r\n\ts6.2,13.7,13.7,13.7h71.4c1.7,7.8,47,211.5,49.6,223.2c-14.6,6.3-24.8,20.9-24.8,37.8c0,22.7,18.5,41.2,41.2,41.2h249.2\r\n\tc7.6,0,13.7-6.2,13.7-13.7c0-7.6-6.2-13.7-13.7-13.7H151.1c-7.6,0-13.7-6.2-13.7-13.7C137.4,338.2,143.5,332.1,151.1,332.1z\r\n\t M437,139.7l-47.1,164.9H162.2l-36.6-164.9H437z\"\r\n                />\r\n                <path\r\n                  d=\"M137.4,428.2c0,22.7,18.5,41.2,41.2,41.2s41.2-18.5,41.2-41.2S201.4,387,178.6,387S137.4,405.5,137.4,428.2z M178.6,414.5\r\n\tc7.6,0,13.7,6.2,13.7,13.7c0,7.6-6.2,13.7-13.7,13.7c-7.6,0-13.7-6.2-13.7-13.7C164.9,420.7,171,414.5,178.6,414.5z\"\r\n                />\r\n                <path\r\n                  d=\"M331.6,428.2c0,22.7,18.5,41.2,41.2,41.2c22.7,0,41.2-18.5,41.2-41.2S395.5,387,372.8,387\r\n\tC350.1,387,331.6,405.5,331.6,428.2z M372.8,414.5c7.6,0,13.7,6.2,13.7,13.7c0,7.6-6.2,13.7-13.7,13.7c-7.6,0-13.7-6.2-13.7-13.7\r\n\tC359.1,420.7,365.2,414.5,372.8,414.5z\"\r\n                />\r\n              </svg>\r\n            </li>\r\n            <li>\r\n              <svg\r\n                version=\"1.1\"\r\n                className=\"cart__icon\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                x=\"0px\"\r\n                y=\"0px\"\r\n                viewBox=\"0 0 512 512\"\r\n                enableBackground=\"new 0 0 512 512;\"\r\n              >\r\n                <g>\r\n                  <path\r\n                    d=\"M256,4.3c-97.6,0-177,79.4-177,177c0,33,9.1,65.2,26.4,93.1l140.5,226.4c2.7,4.3,7.4,7,12.5,7c0,0,0.1,0,0.1,0\r\n\t\t\t\tc5.1,0,9.9-2.8,12.5-7.2L408,271.9c16.3-27.3,25-58.7,25-90.7C433,83.7,353.6,4.3,256,4.3z M382.7,256.8L258.2,464.6L130.5,258.8\r\n\t\t\t\tc-14.4-23.2-22.2-50-22.2-77.5c0-81.3,66.4-147.7,147.7-147.7s147.6,66.4,147.6,147.7C403.6,207.9,396.3,234.1,382.7,256.8z\"\r\n                  />\r\n                </g>\r\n\r\n                <g>\r\n                  <path\r\n                    d=\"M256,92.8c-48.8,0-88.5,39.7-88.5,88.5c0,48.5,39.1,88.5,88.5,88.5c50.1,0,88.5-40.5,88.5-88.5\r\n\t\t\t\tC344.5,132.5,304.8,92.8,256,92.8z M256,240.5c-32.7,0-59.2-26.6-59.2-59.2c0-32.5,26.7-59.2,59.2-59.2s59.1,26.7,59.1,59.2\r\n\t\t\t\tC315.1,213.4,289.2,240.5,256,240.5z\"\r\n                  />\r\n                </g>\r\n              </svg>\r\n            </li>\r\n            <li>\r\n              <svg\r\n                version=\"1.1\"\r\n                className=\"cart__icon\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                x=\"0px\"\r\n                y=\"0px\"\r\n                viewBox=\"0 0 512 512\"\r\n                enableBackground=\"new 0 0 512 512;\"\r\n              >\r\n                <path\r\n                  d=\"M507.8,284.6C507.8,284.6,507.8,284.6,507.8,284.6L412.4,45.2c-2-5.1-7.8-7.6-12.9-5.5c0,0,0,0,0,0l-386.8,154\r\n\t\t\t\tc-1.6,0.7-2.9,1.8-4,3.2c-3.2,1.7-5.2,5-5.3,8.6v257.7c0,5.5,4.4,9.9,9.9,9.9h416.4c5.5,0,9.9-4.4,9.9-9.9V322.4l62.6-24.9\r\n\t\t\t\tC507.3,295.4,509.8,289.7,507.8,284.6z M419.9,453.2H23.3V215.3h396.5V453.2z M168.9,195.6l166-66.1\r\n\t\t\t\tc14.8,15.6,35.3,24.4,56.8,24.5l16.6,41.6H168.9z M439.7,301.1v-95.7c0-5.5-4.4-9.9-9.9-9.9h-0.2l-21-52.8\r\n\t\t\t\tc-0.2-0.4-0.5-0.9-0.8-1.2c-1.1-4.8-5.5-8-10.4-7.6c-20,1.8-39.6-6.6-52-22.4c-3.1-3.8-8.5-4.8-12.7-2.2\r\n\t\t\t\tc-0.5,0.1-0.9,0.1-1.4,0.3l-202.6,80.7c-2.5,1-4.4,2.9-5.4,5.3H61.7l336-133.8l88,221L439.7,301.1z\"\r\n                />\r\n                <path\r\n                  d=\"M50.2,386.3c19.2,5.7,34.3,20.7,40,40c1.3,4.2,5.1,7.1,9.5,7.1c0.5,0,1-0.1,1.5-0.2c0.4,0.1,0.9,0.2,1.4,0.3h237.9\r\n\t\t\t\tc0.4-0.1,0.8-0.1,1.2-0.2c5,1.2,9.9-1.8,11.1-6.8c0,0,0,0,0-0.1c5.7-19.3,20.8-34.3,40-40c4.7-1.4,7.6-6.1,6.8-10.9\r\n\t\t\t\tc0.1-0.5,0.2-1,0.3-1.5v-79.3c-0.1-0.5-0.2-1-0.3-1.5c0.8-4.8-2.1-9.5-6.8-10.9c-19.3-5.7-34.3-20.8-40-40\r\n\t\t\t\tc-1.4-4.7-6.1-7.6-11-6.8c-0.5-0.1-0.9-0.2-1.4-0.3H102.6c-0.5,0.1-1,0.2-1.5,0.3c-4.8-0.8-9.5,2.1-10.9,6.8\r\n\t\t\t\tc-5.7,19.3-20.8,34.3-40,40c-4.7,1.4-7.6,6.1-6.8,10.9c-0.1,0.5-0.2,1-0.3,1.5v79.3c0.1,0.5,0.1,0.9,0.3,1.4\r\n\t\t\t\tC42.6,380.2,45.5,384.9,50.2,386.3z M63,298.7c19.9-8,35.7-23.8,43.7-43.7h229.9c8,19.9,23.8,35.7,43.7,43.7v71.3\r\n\t\t\t\tc-19.9,8-35.7,23.8-43.7,43.7H106.7c-8-19.9-23.8-35.7-43.7-43.7V298.7z\"\r\n                />\r\n                <path\r\n                  d=\"M221.6,393.8c32.9,0,59.5-26.6,59.5-59.5s-26.6-59.5-59.5-59.5s-59.5,26.6-59.5,59.5\r\n\t\t\t\tC162.1,367.1,188.8,393.7,221.6,393.8z M221.6,294.6c21.9,0,39.7,17.8,39.7,39.7c0,21.9-17.8,39.7-39.7,39.7\r\n\t\t\t\ts-39.7-17.8-39.7-39.7C181.9,312.4,199.7,294.6,221.6,294.6z\"\r\n                />\r\n                <path\r\n                  d=\"M112.5,349.2c8.2,0,14.9-6.7,14.9-14.9s-6.7-14.9-14.9-14.9s-14.9,6.7-14.9,14.9C97.7,342.5,104.3,349.2,112.5,349.2z\r\n\t\t\t\t M112.5,329.3c2.7,0,5,2.2,5,5c0,2.7-2.2,5-5,5c-2.7,0-5-2.2-5-5C107.6,331.6,109.8,329.3,112.5,329.3z\"\r\n                />\r\n                <path\r\n                  d=\"M330.6,349.2c8.2,0,14.9-6.7,14.9-14.9s-6.7-14.9-14.9-14.9s-14.9,6.7-14.9,14.9C315.8,342.5,322.4,349.2,330.6,349.2z\r\n\t\t\t\t M330.6,329.3c2.7,0,5,2.2,5,5c0,2.7-2.2,5-5,5s-5-2.2-5-5C325.7,331.6,327.9,329.3,330.6,329.3z\"\r\n                />\r\n              </svg>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div className=\"cart-container__table\">\r\n          <ul className=\"cart-container__table__legend\">\r\n            <li className=\"cart-container__table__legend__item\">\r\n              <h3>Item</h3>\r\n            </li>\r\n            <li className=\"cart-container__table__legend__quantity\">\r\n              <h3>Quantity</h3>\r\n            </li>\r\n            <li className=\"cart-container__table__legend__subtotal\">\r\n              <h3>Price</h3>\r\n            </li>\r\n          </ul>\r\n          <ul className=\"cart-container__table__products\">{<CartMapping />}</ul>\r\n\r\n          <div className=\"cart-container__table__summary\">\r\n            <h4 className=\"cart-container__table__summary__title\">Summary</h4>\r\n\r\n            <div className=\"cart-container__table__subtotal\">\r\n              <h3 className=\"cart-container__table__subtotal__title\">\r\n                Subtotal\r\n              </h3>\r\n\r\n              <h3 className=\"cart-container__table__subtotal__value\">\r\n                {this.state.cart.subTotal || 0} PLN\r\n              </h3>\r\n            </div>\r\n\r\n            <div className=\"cart-container__table__discount\">\r\n              <h3 className=\"cart-container__table__discount__title\">\r\n                Discount\r\n              </h3>\r\n              <h3 className=\"cart-container__table__discount__value\">\r\n        {this.state.cart.discountTotal} PLN\r\n      </h3>\r\n            </div>\r\n            <Promocode codeHandler={this.handlePromocode} />\r\n            <div className=\"cart-container__table__total\">\r\n              <h2 className=\"cart-container__table__total__title\">Total</h2>\r\n              <h2 className=\"cart-container__table__total__items\">\r\n                {this.state.cart.itemsTotal || 0}{\" \"}\r\n                {this.state.cart.itemsTotal == 1 ? \"item\" : \"items\"}\r\n              </h2>\r\n              <h4 className=\"cart-container__table__total__value\">\r\n                {this.state.cart.subTotal || 0} PLN\r\n              </h4>\r\n            </div>\r\n            <div className=\"cart-container__table__buttons\">\r\n              <button className=\"cart-container__table__buttons__continue-shopping\">\r\n                <NavLink to=\"/shop/all\">Continue shopping</NavLink>\r\n              </button>\r\n              <button className=\"cart-container__table__buttons__checkout\">\r\n                Proceed to checkout\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Cart;\r\n"]},"metadata":{},"sourceType":"module"}