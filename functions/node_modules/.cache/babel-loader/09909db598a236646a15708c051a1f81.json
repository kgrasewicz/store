{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _isFunction from \"lodash/isFunction\";\nimport _isNil from \"lodash/isNil\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _omit from \"lodash/omit\";\nimport _pick from \"lodash/pick\";\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { List, AutoSizer } from '../Picker/VirtualizedList';\nimport TreeNode from './TreeNode';\nimport { createChainedFunction, useClassNames, useCustom, useControlled, TREE_NODE_DROP_POSITION, KEY_CODE, mergeRefs, shallowEqual } from '../utils';\nimport { getExpandWhenSearching, hasVisibleChildren, getDragNodeKeys, calDropNodePosition, createUpdateTreeDataFunction, useTreeDrag, useFlattenTreeData, getTreeActiveNode, getDefaultExpandItemValues, useTreeNodeRefs, useTreeSearch, focusPreviousItem, getFocusableItems, focusNextItem, getActiveItem, toggleExpand, useGetTreeNodeChildren, focusToActiveTreeNode, leftArrowHandler, focusTreeNode, rightArrowHandler } from '../utils/treeUtils';\nimport { PickerToggle, PickerOverlay, SearchBar, PickerToggleTrigger, createConcatChildrenFunction, usePickerClassName, onMenuKeyDown as _onMenuKeyDown, usePublicMethods, listPickerPropTypes, listPickerDefaultProps, pickTriggerPropKeys, omitTriggerPropKeys, useToggleKeyDownEvent } from '../Picker'; // default value for virtualized\n\nexport var maxTreeHeight = 320;\n\nvar defaultProps = _extends({}, listPickerDefaultProps, {\n  classPrefix: 'picker',\n  as: 'div',\n  height: 360,\n  appearance: 'default',\n  searchable: true,\n  cleanable: true,\n  menuAutoWidth: true,\n  placement: 'bottomStart',\n  locale: {\n    placeholder: 'Select',\n    searchPlaceholder: 'Search',\n    noResultsText: 'No results found'\n  }\n});\n\nvar TreePicker = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var Component = props.as,\n      data = props.data,\n      style = props.style,\n      controlledValue = props.value,\n      inline = props.inline,\n      overrideLocale = props.locale,\n      height = props.height,\n      className = props.className,\n      disabled = props.disabled,\n      placement = props.placement,\n      cleanable = props.cleanable,\n      menuStyle = props.menuStyle,\n      searchable = props.searchable,\n      virtualized = props.virtualized,\n      classPrefix = props.classPrefix,\n      defaultValue = props.defaultValue,\n      placeholder = props.placeholder,\n      searchKeyword = props.searchKeyword,\n      menuClassName = props.menuClassName,\n      menuAutoWidth = props.menuAutoWidth,\n      searchBy = props.searchBy,\n      toggleAs = props.toggleAs,\n      labelKey = props.labelKey,\n      valueKey = props.valueKey,\n      childrenKey = props.childrenKey,\n      draggable = props.draggable,\n      defaultExpandAll = props.defaultExpandAll,\n      disabledItemValues = props.disabledItemValues,\n      controlledExpandItemValues = props.expandItemValues,\n      defaultExpandItemValues = props.defaultExpandItemValues,\n      id = props.id,\n      getChildren = props.getChildren,\n      renderTreeIcon = props.renderTreeIcon,\n      renderTreeNode = props.renderTreeNode,\n      onExited = props.onExited,\n      onClean = props.onClean,\n      onOpen = props.onOpen,\n      onSearch = props.onSearch,\n      onSelect = props.onSelect,\n      onChange = props.onChange,\n      onEntered = props.onEntered,\n      onClose = props.onClose,\n      onDragEnd = props.onDragEnd,\n      onDragStart = props.onDragStart,\n      onDragEnter = props.onDragEnter,\n      onDragLeave = props.onDragLeave,\n      onDragOver = props.onDragOver,\n      onDrop = props.onDrop,\n      onExpand = props.onExpand,\n      renderExtraFooter = props.renderExtraFooter,\n      renderMenu = props.renderMenu,\n      renderValue = props.renderValue,\n      renderDragNode = props.renderDragNode,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"style\", \"value\", \"inline\", \"locale\", \"height\", \"className\", \"disabled\", \"placement\", \"cleanable\", \"menuStyle\", \"searchable\", \"virtualized\", \"classPrefix\", \"defaultValue\", \"placeholder\", \"searchKeyword\", \"menuClassName\", \"menuAutoWidth\", \"searchBy\", \"toggleAs\", \"labelKey\", \"valueKey\", \"childrenKey\", \"draggable\", \"defaultExpandAll\", \"disabledItemValues\", \"expandItemValues\", \"defaultExpandItemValues\", \"id\", \"getChildren\", \"renderTreeIcon\", \"renderTreeNode\", \"onExited\", \"onClean\", \"onOpen\", \"onSearch\", \"onSelect\", \"onChange\", \"onEntered\", \"onClose\", \"onDragEnd\", \"onDragStart\", \"onDragEnter\", \"onDragLeave\", \"onDragOver\", \"onDrop\", \"onExpand\", \"renderExtraFooter\", \"renderMenu\", \"renderValue\", \"renderDragNode\"]);\n\n  var triggerRef = useRef();\n  var targetRef = useRef();\n  var listRef = useRef();\n  var overlayRef = useRef();\n  var treeViewRef = useRef();\n\n  var _useCustom = useCustom('Picker', overrideLocale),\n      rtl = _useCustom.rtl,\n      locale = _useCustom.locale;\n\n  var _useControlled = useControlled(controlledValue, defaultValue),\n      value = _useControlled[0],\n      setValue = _useControlled[1],\n      isControlled = _useControlled[2];\n\n  var _useGetTreeNodeChildr = useGetTreeNodeChildren(data, valueKey, childrenKey),\n      treeData = _useGetTreeNodeChildr.data,\n      setTreeData = _useGetTreeNodeChildr.setData,\n      loadingNodeValues = _useGetTreeNodeChildr.loadingNodeValues,\n      loadChildren = _useGetTreeNodeChildr.loadChildren;\n\n  var _useControlled2 = useControlled(controlledExpandItemValues, getDefaultExpandItemValues(treeData, {\n    defaultExpandAll: defaultExpandAll,\n    valueKey: valueKey,\n    childrenKey: childrenKey,\n    defaultExpandItemValues: defaultExpandItemValues\n  })),\n      expandItemValues = _useControlled2[0],\n      setExpandItemValues = _useControlled2[1];\n\n  var _useState = useState(false),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  var _useState2 = useState(null),\n      focusItemValue = _useState2[0],\n      setFocusItemValue = _useState2[1];\n\n  var _useFlattenTreeData = useFlattenTreeData({\n    data: treeData,\n    labelKey: labelKey,\n    valueKey: valueKey,\n    childrenKey: childrenKey,\n    callback: function callback() {\n      // after flattenData, always trigger re-render\n      forceUpdate();\n    }\n  }),\n      flattenNodes = _useFlattenTreeData.flattenNodes,\n      forceUpdate = _useFlattenTreeData.forceUpdate,\n      formatVirtualizedTreeData = _useFlattenTreeData.formatVirtualizedTreeData;\n\n  var _useClassNames = useClassNames(classPrefix),\n      prefix = _useClassNames.prefix,\n      merge = _useClassNames.merge;\n\n  var _useClassNames2 = useClassNames('tree'),\n      treePrefix = _useClassNames2.prefix,\n      withTreeClassPrefix = _useClassNames2.withClassPrefix;\n\n  var _useTreeSearch = useTreeSearch({\n    labelKey: labelKey,\n    childrenKey: childrenKey,\n    searchKeyword: searchKeyword,\n    data: treeData,\n    searchBy: searchBy,\n    callback: function callback(searchKeyword, _filterData, event) {\n      onSearch === null || onSearch === void 0 ? void 0 : onSearch(searchKeyword, event);\n    }\n  }),\n      filteredData = _useTreeSearch.filteredData,\n      searchKeywordState = _useTreeSearch.searchKeywordState,\n      setSearchKeyword = _useTreeSearch.setSearchKeyword,\n      handleSearch = _useTreeSearch.handleSearch,\n      setFilteredData = _useTreeSearch.setFilteredData;\n\n  var _useTreeDrag = useTreeDrag(),\n      dragNodeKeys = _useTreeDrag.dragNodeKeys,\n      dragOverNodeKey = _useTreeDrag.dragOverNodeKey,\n      dragNode = _useTreeDrag.dragNode,\n      dropNodePosition = _useTreeDrag.dropNodePosition,\n      setDragNodeKeys = _useTreeDrag.setDragNodeKeys,\n      setDragOverNodeKey = _useTreeDrag.setDragOverNodeKey,\n      setDragNode = _useTreeDrag.setDragNode,\n      setDropNodePosition = _useTreeDrag.setDropNodePosition;\n\n  var _useTreeNodeRefs = useTreeNodeRefs(),\n      treeNodesRefs = _useTreeNodeRefs.treeNodesRefs,\n      saveTreeNodeRef = _useTreeNodeRefs.saveTreeNodeRef;\n\n  var activeNode = getTreeActiveNode(flattenNodes, value, valueKey);\n  var getFormattedNodes = useCallback(function (render) {\n    var formattedNodes = [];\n\n    if (virtualized) {\n      formattedNodes = formatVirtualizedTreeData(flattenNodes, filteredData, expandItemValues).filter(function (n) {\n        return n.showNode && n.visible;\n      });\n    } else {\n      formattedNodes = filteredData.map(function (dataItem, index) {\n        return render === null || render === void 0 ? void 0 : render(dataItem, index, 1);\n      });\n    }\n\n    return formattedNodes;\n  }, [expandItemValues, filteredData, flattenNodes, formatVirtualizedTreeData, virtualized]);\n  var focusActiveNode = useCallback(function () {\n    focusToActiveTreeNode({\n      list: listRef.current,\n      valueKey: valueKey,\n      selector: \".\" + treePrefix('node-active'),\n      activeNode: activeNode,\n      virtualized: virtualized,\n      container: treeViewRef.current,\n      formattedNodes: getFormattedNodes()\n    });\n  }, [treePrefix, activeNode, getFormattedNodes, valueKey, virtualized]);\n  useEffect(function () {\n    setFilteredData(data, searchKeywordState);\n    setTreeData(data);\n  }, [data, searchKeywordState, setFilteredData, setTreeData]);\n  useEffect(function () {\n    setFilteredData(treeData, searchKeywordState);\n  }, [treeData, searchKeywordState, setFilteredData]);\n  useEffect(function () {\n    if (Array.isArray(controlledExpandItemValues)) {\n      setExpandItemValues(controlledExpandItemValues);\n    }\n  }, [controlledExpandItemValues, setExpandItemValues]);\n  useEffect(function () {\n    setSearchKeyword(searchKeyword !== null && searchKeyword !== void 0 ? searchKeyword : '');\n  }, [searchKeyword, setSearchKeyword]);\n  var getDropData = useCallback(function (nodeData) {\n    var options = {\n      valueKey: valueKey,\n      childrenKey: childrenKey\n    };\n    return {\n      /** draggingNode */\n      dragNode: dragNode,\n\n      /** dropNode */\n      dropNode: nodeData,\n\n      /** dragAndDrop Position type */\n      dropNodePosition: dropNodePosition,\n      createUpdateDataFunction: createUpdateTreeDataFunction({\n        dragNode: dragNode,\n        dropNode: nodeData,\n        dropNodePosition: dropNodePosition\n      }, options)\n    };\n  }, [dragNode, valueKey, childrenKey, dropNodePosition]);\n\n  var getTreeNodeProps = function getTreeNodeProps(node, layer, index) {\n    var draggingNode = dragNode !== null && dragNode !== void 0 ? dragNode : {};\n    return {\n      as: Component,\n      rtl: rtl,\n      value: node[valueKey],\n      label: node[labelKey],\n      index: index,\n      layer: layer,\n      loading: loadingNodeValues.some(function (item) {\n        return shallowEqual(item, node[valueKey]);\n      }),\n      expand: node.expand,\n      active: shallowEqual(node[valueKey], value),\n      focus: shallowEqual(node[valueKey], focusItemValue),\n      visible: node.visible,\n      draggable: draggable,\n      dragging: shallowEqual(node[valueKey], draggingNode[valueKey]),\n      children: node[childrenKey],\n      nodeData: node,\n      disabled: disabledItemValues.some(function (disabledItem) {\n        return shallowEqual(disabledItem, node[valueKey]);\n      }),\n      dragOver: shallowEqual(node[valueKey], dragOverNodeKey) && dropNodePosition === TREE_NODE_DROP_POSITION.DRAG_OVER,\n      dragOverTop: shallowEqual(node[valueKey], dragOverNodeKey) && dropNodePosition === TREE_NODE_DROP_POSITION.DRAG_OVER_TOP,\n      dragOverBottom: shallowEqual(node[valueKey], dragOverNodeKey) && dropNodePosition === TREE_NODE_DROP_POSITION.DRAG_OVER_BOTTOM,\n      onSelect: handleSelect,\n      onDragStart: handleDragStart,\n      onDragEnter: handleDragEnter,\n      onDragOver: handleDragOver,\n      onDragLeave: handleDragLeave,\n      onDragEnd: handleDragEnd,\n      onDrop: handleDrop,\n      onExpand: handleExpand,\n      onRenderTreeNode: renderTreeNode,\n      onRenderTreeIcon: renderTreeIcon\n    };\n  };\n\n  var handleSelect = useCallback(function (nodeData, event) {\n    var _targetRef$current, _triggerRef$current, _triggerRef$current$c;\n\n    if (!nodeData) {\n      return;\n    }\n\n    var nodeValue = nodeData[valueKey];\n\n    if (!isControlled) {\n      setValue(nodeValue);\n    }\n\n    setFocusItemValue(nodeData[valueKey]);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nodeValue, event);\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(nodeData, nodeValue, event);\n    (_targetRef$current = targetRef.current) === null || _targetRef$current === void 0 ? void 0 : _targetRef$current.focus();\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$c = _triggerRef$current.close) === null || _triggerRef$current$c === void 0 ? void 0 : _triggerRef$current$c.call(_triggerRef$current);\n  }, [valueKey, isControlled, onChange, onSelect, setValue]);\n  var handleExpand = useCallback(function (node) {\n    var nextExpandItemValues = toggleExpand({\n      node: node,\n      isExpand: !node.expand,\n      expandItemValues: expandItemValues,\n      valueKey: valueKey\n    });\n    setExpandItemValues(nextExpandItemValues);\n    onExpand === null || onExpand === void 0 ? void 0 : onExpand(nextExpandItemValues, node, createConcatChildrenFunction(node, node[valueKey], {\n      valueKey: valueKey,\n      childrenKey: childrenKey\n    }));\n\n    if (_isFunction(getChildren) && !node.expand && Array.isArray(node[childrenKey]) && node[childrenKey].length === 0) {\n      loadChildren(node, getChildren);\n    }\n  }, [valueKey, childrenKey, expandItemValues, getChildren, onExpand, setExpandItemValues, loadChildren]);\n  var handleDragStart = useCallback(function (nodeData, event) {\n    if (draggable) {\n      setDragNodeKeys(getDragNodeKeys(nodeData, childrenKey, valueKey));\n      setDragNode(flattenNodes[nodeData.refKey]);\n      onDragStart === null || onDragStart === void 0 ? void 0 : onDragStart(nodeData, event);\n    }\n  }, [draggable, childrenKey, flattenNodes, onDragStart, setDragNodeKeys, setDragNode, valueKey]);\n  var handleDragEnter = useCallback(function (nodeData, event) {\n    if (dragNodeKeys.some(function (d) {\n      return shallowEqual(d, nodeData[valueKey]);\n    })) {\n      return;\n    }\n\n    if (dragNode) {\n      setDragOverNodeKey(nodeData[valueKey]);\n      setDropNodePosition(calDropNodePosition(event, treeNodesRefs[nodeData.refKey]));\n    }\n\n    onDragEnter === null || onDragEnter === void 0 ? void 0 : onDragEnter(nodeData, event);\n  }, [dragNode, treeNodesRefs, dragNodeKeys, onDragEnter, setDragOverNodeKey, setDropNodePosition, valueKey]);\n  var handleDragOver = useCallback(function (nodeData, event) {\n    if (dragNodeKeys.some(function (d) {\n      return shallowEqual(d, nodeData[valueKey]);\n    })) {\n      return;\n    }\n\n    if (dragNode && shallowEqual(nodeData[valueKey], dragOverNodeKey)) {\n      var lastDropNodePosition = calDropNodePosition(event, treeNodesRefs[nodeData.refKey]);\n      if (lastDropNodePosition === dropNodePosition) return;\n      setDropNodePosition(lastDropNodePosition);\n    }\n\n    onDragOver === null || onDragOver === void 0 ? void 0 : onDragOver(nodeData, event);\n  }, [dragNode, dragNodeKeys, dragOverNodeKey, dropNodePosition, onDragOver, setDropNodePosition, treeNodesRefs, valueKey]);\n  var handleDragLeave = useCallback(function (nodeData, event) {\n    onDragLeave === null || onDragLeave === void 0 ? void 0 : onDragLeave(nodeData, event);\n  }, [onDragLeave]);\n  var handleDragEnd = useCallback(function (nodeData, event) {\n    setDragNode(null);\n    setDragNodeKeys([]);\n    setDragOverNodeKey(null);\n    onDragEnd === null || onDragEnd === void 0 ? void 0 : onDragEnd(nodeData, event);\n  }, [setDragNode, setDragNodeKeys, setDragOverNodeKey, onDragEnd]);\n  var handleDrop = useCallback(function (nodeData, event) {\n    if (dragNodeKeys.some(function (d) {\n      return shallowEqual(d, nodeData[valueKey]);\n    })) {\n      console.error('Cannot drag a node to itself and its children');\n    } else {\n      var dropData = getDropData(nodeData);\n      onDrop === null || onDrop === void 0 ? void 0 : onDrop(dropData, event);\n    }\n\n    setDragNode(null);\n    setDragNodeKeys([]);\n    setDragOverNodeKey(null);\n  }, [dragNodeKeys, setDragNode, setDragOverNodeKey, setDragNodeKeys, onDrop, getDropData, valueKey]);\n  var handleOpen = useCallback(function () {\n    var _triggerRef$current2, _triggerRef$current2$;\n\n    (_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : (_triggerRef$current2$ = _triggerRef$current2.open) === null || _triggerRef$current2$ === void 0 ? void 0 : _triggerRef$current2$.call(_triggerRef$current2);\n    focusActiveNode();\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    setActive(true);\n  }, [focusActiveNode, onOpen]);\n  var handleClose = useCallback(function () {\n    var _triggerRef$current3, _triggerRef$current3$, _targetRef$current2;\n\n    (_triggerRef$current3 = triggerRef.current) === null || _triggerRef$current3 === void 0 ? void 0 : (_triggerRef$current3$ = _triggerRef$current3.close) === null || _triggerRef$current3$ === void 0 ? void 0 : _triggerRef$current3$.call(_triggerRef$current3);\n    setSearchKeyword('');\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n    setActive(false);\n    setFocusItemValue(activeNode === null || activeNode === void 0 ? void 0 : activeNode[valueKey]);\n    /**\n     * when using keyboard toggle picker, should refocus on PickerToggle Component after close picker menu\n     */\n\n    (_targetRef$current2 = targetRef.current) === null || _targetRef$current2 === void 0 ? void 0 : _targetRef$current2.focus();\n  }, [activeNode, onClose, setSearchKeyword, valueKey]);\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef,\n    targetRef: targetRef\n  });\n  var handleFocusItem = useCallback(function (type) {\n    var focusableItems = getFocusableItems(filteredData, {\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      childrenKey: childrenKey,\n      expandItemValues: expandItemValues\n    });\n    var selector = \".\" + treePrefix('node-label');\n    var focusProps = {\n      focusItemValue: focusItemValue,\n      focusableItems: focusableItems,\n      treeNodesRefs: treeNodesRefs,\n      selector: selector,\n      valueKey: valueKey,\n      callback: function callback(nextFocusItemValue) {\n        setFocusItemValue(nextFocusItemValue);\n      }\n    };\n\n    if (type === KEY_CODE.DOWN) {\n      focusNextItem(focusProps);\n      return;\n    }\n\n    if (type === KEY_CODE.UP) {\n      focusPreviousItem(focusProps);\n    }\n  }, [expandItemValues, filteredData, focusItemValue, treeNodesRefs, treePrefix, valueKey, childrenKey, disabledItemValues]);\n  var handleLeftArrow = useCallback(function () {\n    var focusItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    leftArrowHandler({\n      focusItem: focusItem,\n      expand: expandItemValues.includes(focusItem === null || focusItem === void 0 ? void 0 : focusItem[valueKey]),\n      onExpand: handleExpand,\n      onFocusItem: function onFocusItem() {\n        var _focusItem$parent, _focusItem$parent2;\n\n        setFocusItemValue(focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent = focusItem.parent) === null || _focusItem$parent === void 0 ? void 0 : _focusItem$parent[valueKey]);\n        focusTreeNode(focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent2 = focusItem.parent) === null || _focusItem$parent2 === void 0 ? void 0 : _focusItem$parent2.refKey, treeNodesRefs, \".\" + treePrefix('node-label'));\n      }\n    });\n  }, [expandItemValues, flattenNodes, focusItemValue, handleExpand, treeNodesRefs, treePrefix, valueKey]);\n  var handleRightArrow = useCallback(function () {\n    var focusItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    rightArrowHandler({\n      focusItem: focusItem,\n      expand: expandItemValues.includes(focusItem === null || focusItem === void 0 ? void 0 : focusItem[valueKey]),\n      childrenKey: childrenKey,\n      onExpand: handleExpand,\n      onFocusItem: function onFocusItem() {\n        handleFocusItem(KEY_CODE.DOWN);\n      }\n    });\n  }, [focusItemValue, flattenNodes, valueKey, expandItemValues, childrenKey, handleExpand, handleFocusItem]);\n  var selectActiveItem = useCallback(function (event) {\n    var activeItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    handleSelect(activeItem, event);\n  }, [flattenNodes, valueKey, focusItemValue, handleSelect]);\n  var handleClean = useCallback(function (event) {\n    setValue(null);\n    onChange === null || onChange === void 0 ? void 0 : onChange(null, event);\n  }, [onChange, setValue]);\n  var onPickerKeydown = useToggleKeyDownEvent(_extends({\n    toggle: !activeNode || !active,\n    triggerRef: triggerRef,\n    targetRef: targetRef,\n    overlayRef: overlayRef,\n    active: active,\n    onExit: handleClean,\n    onClose: handleClose,\n    onMenuKeyDown: function onMenuKeyDown(event) {\n      _onMenuKeyDown(event, {\n        down: function down() {\n          return handleFocusItem(KEY_CODE.DOWN);\n        },\n        up: function up() {\n          return handleFocusItem(KEY_CODE.UP);\n        },\n        left: rtl ? handleRightArrow : handleLeftArrow,\n        right: rtl ? handleLeftArrow : handleRightArrow,\n        enter: selectActiveItem,\n        del: handleClean\n      });\n    }\n  }, rest));\n  var handleTreeKeyDown = useCallback(function (event) {\n    if (!treeViewRef.current) {\n      return;\n    }\n\n    _onMenuKeyDown(event, {\n      down: function down() {\n        return handleFocusItem(KEY_CODE.DOWN);\n      },\n      up: function up() {\n        return handleFocusItem(KEY_CODE.UP);\n      },\n      left: rtl ? handleRightArrow : handleLeftArrow,\n      right: rtl ? handleLeftArrow : handleRightArrow,\n      enter: selectActiveItem\n    });\n  }, [handleFocusItem, handleLeftArrow, handleRightArrow, rtl, selectActiveItem]);\n\n  var renderNode = function renderNode(node, index, layer) {\n    if (!node.visible) {\n      return null;\n    }\n\n    var children = node[childrenKey];\n    var expand = getExpandWhenSearching(searchKeywordState, expandItemValues.includes(node[valueKey]));\n    var visibleChildren = _isUndefined(searchKeywordState) || searchKeywordState.length === 0 ? !!children : hasVisibleChildren(node, childrenKey);\n\n    var nodeProps = _extends({}, getTreeNodeProps(_extends({}, node, {\n      expand: expand\n    }), layer, index), {\n      hasChildren: visibleChildren\n    });\n\n    if (nodeProps.hasChildren) {\n      var _merge;\n\n      layer += 1;\n      var openClass = treePrefix('open');\n      var childrenClass = merge(treePrefix('node-children'), (_merge = {}, _merge[openClass] = expand && visibleChildren, _merge));\n      var nodes = children || [];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: childrenClass,\n        key: node[valueKey]\n      }, /*#__PURE__*/React.createElement(TreeNode, _extends({}, nodeProps, {\n        ref: function ref(_ref) {\n          return saveTreeNodeRef(node.refKey, _ref);\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: treePrefix('children')\n      }, nodes.map(function (child, i) {\n        return renderNode(child, i, layer);\n      })));\n    }\n\n    return /*#__PURE__*/React.createElement(TreeNode, _extends({\n      ref: function ref(_ref2) {\n        return saveTreeNodeRef(node.refKey, _ref2);\n      },\n      key: node[valueKey]\n    }, nodeProps));\n  };\n\n  var renderVirtualListNode = function renderVirtualListNode(nodes) {\n    return function (_ref3) {\n      var key = _ref3.key,\n          index = _ref3.index,\n          style = _ref3.style;\n      var node = nodes[index];\n      var layer = node.layer,\n          showNode = node.showNode;\n      var expand = getExpandWhenSearching(searchKeywordState, expandItemValues.includes(node[valueKey]));\n\n      if (!node.visible) {\n        return null;\n      }\n\n      var nodeProps = _extends({}, getTreeNodeProps(_extends({}, node, {\n        expand: expand\n      }), layer), {\n        style: style,\n        hasChildren: node.hasChildren\n      });\n\n      return showNode && /*#__PURE__*/React.createElement(TreeNode, _extends({\n        ref: function ref(_ref4) {\n          return saveTreeNodeRef(node.refKey, _ref4);\n        },\n        key: key\n      }, nodeProps));\n    };\n  };\n\n  var renderDefaultDragNode = function renderDefaultDragNode() {\n    if (draggable) {\n      var dragNodeContent = dragNode === null || dragNode === void 0 ? void 0 : dragNode[labelKey];\n\n      if (_isFunction(renderDragNode)) {\n        dragNodeContent = renderDragNode(dragNode);\n      }\n\n      return /*#__PURE__*/React.createElement(\"span\", {\n        id: \"drag-node\",\n        className: treePrefix('drag-node-mover')\n      }, dragNodeContent);\n    }\n\n    return null;\n  };\n\n  var renderTree = function renderTree() {\n    var _withTreeClassPrefix;\n\n    var classes = withTreeClassPrefix((_withTreeClassPrefix = {}, _withTreeClassPrefix[className !== null && className !== void 0 ? className : ''] = inline, _withTreeClassPrefix.virtualized = virtualized, _withTreeClassPrefix));\n    var formattedNodes = getFormattedNodes(renderNode);\n    var styles = inline ? _extends({\n      height: height\n    }, style) : {};\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      role: \"tree\",\n      id: id ? id + \"-listbox\" : undefined,\n      ref: treeViewRef,\n      className: classes,\n      style: styles,\n      onKeyDown: inline ? handleTreeKeyDown : undefined\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: treePrefix('nodes')\n    }, virtualized ? /*#__PURE__*/React.createElement(AutoSizer, {\n      defaultHeight: inline ? height : maxTreeHeight,\n      style: {\n        width: 'auto',\n        height: 'auto'\n      }\n    }, function (_ref5) {\n      var height = _ref5.height,\n          width = _ref5.width;\n      return /*#__PURE__*/React.createElement(List, {\n        ref: listRef,\n        width: width,\n        height: height,\n        rowHeight: 36,\n        rowCount: formattedNodes.length,\n        rowRenderer: renderVirtualListNode(formattedNodes),\n        scrollToAlignment: \"center\"\n      });\n    }) : formattedNodes)), renderDefaultDragNode());\n  };\n\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var left = positionProps.left,\n        top = positionProps.top,\n        className = positionProps.className;\n    var classes = merge(className, menuClassName, prefix('tree-menu'));\n\n    var mergedMenuStyle = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n\n    var styles = virtualized ? _extends({\n      height: height\n    }, mergedMenuStyle) : _extends({}, mergedMenuStyle);\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: styles,\n      ref: mergeRefs(overlayRef, speakerRef),\n      onKeyDown: onPickerKeydown,\n      target: triggerRef\n    }, searchable ? /*#__PURE__*/React.createElement(SearchBar, {\n      placeholder: locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeywordState\n    }) : null, renderMenu ? renderMenu(renderTree()) : renderTree(), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   */\n\n\n  var hasValidValue = !_isNil(activeNode) || !_isNil(value) && _isFunction(renderValue);\n\n  var selectedElement = placeholder;\n\n  if (hasValidValue) {\n    var node = activeNode !== null && activeNode !== void 0 ? activeNode : {};\n    selectedElement = node[labelKey];\n\n    if (_isFunction(renderValue)) {\n      selectedElement = renderValue(value, node, selectedElement);\n\n      if (_isNil(selectedElement)) {\n        hasValidValue = false;\n      }\n    }\n  }\n\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n    hasValue: hasValidValue,\n    name: 'tree'\n  })),\n      classes = _usePickerClassName[0],\n      usedClassNamePropKeys = _usePickerClassName[1];\n\n  if (inline) {\n    return renderTree();\n  }\n\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    pickerProps: _pick(props, pickTriggerPropKeys),\n    ref: triggerRef,\n    placement: placement,\n    onEnter: handleOpen,\n    onEntered: onEntered,\n    onExited: createChainedFunction(handleClose, onExited),\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, _omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys, ['cascade'])), {\n    id: id,\n    ref: targetRef,\n    onKeyDown: onPickerKeydown,\n    onClean: createChainedFunction(handleClean, onClean),\n    cleanable: cleanable && !disabled,\n    as: toggleAs,\n    disabled: disabled,\n    hasValue: hasValidValue,\n    active: active,\n    placement: placement,\n    inputValue: value\n  }), selectedElement || locale.placeholder)));\n});\nTreePicker.displayName = 'TreePicker';\nTreePicker.defaultProps = defaultProps;\nTreePicker.propTypes = _extends({}, listPickerPropTypes, {\n  locale: PropTypes.any,\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  height: PropTypes.number,\n  inline: PropTypes.bool,\n  draggable: PropTypes.bool,\n  virtualized: PropTypes.bool,\n  searchable: PropTypes.bool,\n  menuAutoWidth: PropTypes.bool,\n  searchKeyword: PropTypes.string,\n  defaultExpandAll: PropTypes.bool,\n  expandItemValues: PropTypes.array,\n  defaultExpandItemValues: PropTypes.array,\n  onSearch: PropTypes.func,\n  onExpand: PropTypes.func,\n  onSelect: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderTreeNode: PropTypes.func,\n  renderTreeIcon: PropTypes.func,\n  renderExtraFooter: PropTypes.func,\n  renderDragNode: PropTypes.func,\n  searchBy: PropTypes.func\n});\nexport default TreePicker;","map":{"version":3,"sources":["C:/Programowanie/store/node_modules/rsuite/es/TreePicker/TreePicker.js"],"names":["_objectWithoutPropertiesLoose","_extends","_isFunction","_isNil","_isUndefined","_omit","_pick","React","useState","useRef","useEffect","useCallback","PropTypes","List","AutoSizer","TreeNode","createChainedFunction","useClassNames","useCustom","useControlled","TREE_NODE_DROP_POSITION","KEY_CODE","mergeRefs","shallowEqual","getExpandWhenSearching","hasVisibleChildren","getDragNodeKeys","calDropNodePosition","createUpdateTreeDataFunction","useTreeDrag","useFlattenTreeData","getTreeActiveNode","getDefaultExpandItemValues","useTreeNodeRefs","useTreeSearch","focusPreviousItem","getFocusableItems","focusNextItem","getActiveItem","toggleExpand","useGetTreeNodeChildren","focusToActiveTreeNode","leftArrowHandler","focusTreeNode","rightArrowHandler","PickerToggle","PickerOverlay","SearchBar","PickerToggleTrigger","createConcatChildrenFunction","usePickerClassName","onMenuKeyDown","_onMenuKeyDown","usePublicMethods","listPickerPropTypes","listPickerDefaultProps","pickTriggerPropKeys","omitTriggerPropKeys","useToggleKeyDownEvent","maxTreeHeight","defaultProps","classPrefix","as","height","appearance","searchable","cleanable","menuAutoWidth","placement","locale","placeholder","searchPlaceholder","noResultsText","TreePicker","forwardRef","props","ref","Component","data","style","controlledValue","value","inline","overrideLocale","className","disabled","menuStyle","virtualized","defaultValue","searchKeyword","menuClassName","searchBy","toggleAs","labelKey","valueKey","childrenKey","draggable","defaultExpandAll","disabledItemValues","controlledExpandItemValues","expandItemValues","defaultExpandItemValues","id","getChildren","renderTreeIcon","renderTreeNode","onExited","onClean","onOpen","onSearch","onSelect","onChange","onEntered","onClose","onDragEnd","onDragStart","onDragEnter","onDragLeave","onDragOver","onDrop","onExpand","renderExtraFooter","renderMenu","renderValue","renderDragNode","rest","triggerRef","targetRef","listRef","overlayRef","treeViewRef","_useCustom","rtl","_useControlled","setValue","isControlled","_useGetTreeNodeChildr","treeData","setTreeData","setData","loadingNodeValues","loadChildren","_useControlled2","setExpandItemValues","_useState","active","setActive","_useState2","focusItemValue","setFocusItemValue","_useFlattenTreeData","callback","forceUpdate","flattenNodes","formatVirtualizedTreeData","_useClassNames","prefix","merge","_useClassNames2","treePrefix","withTreeClassPrefix","withClassPrefix","_useTreeSearch","_filterData","event","filteredData","searchKeywordState","setSearchKeyword","handleSearch","setFilteredData","_useTreeDrag","dragNodeKeys","dragOverNodeKey","dragNode","dropNodePosition","setDragNodeKeys","setDragOverNodeKey","setDragNode","setDropNodePosition","_useTreeNodeRefs","treeNodesRefs","saveTreeNodeRef","activeNode","getFormattedNodes","render","formattedNodes","filter","n","showNode","visible","map","dataItem","index","focusActiveNode","list","current","selector","container","Array","isArray","getDropData","nodeData","options","dropNode","createUpdateDataFunction","getTreeNodeProps","node","layer","draggingNode","label","loading","some","item","expand","focus","dragging","children","disabledItem","dragOver","DRAG_OVER","dragOverTop","DRAG_OVER_TOP","dragOverBottom","DRAG_OVER_BOTTOM","handleSelect","handleDragStart","handleDragEnter","handleDragOver","handleDragLeave","handleDragEnd","handleDrop","handleExpand","onRenderTreeNode","onRenderTreeIcon","_targetRef$current","_triggerRef$current","_triggerRef$current$c","nodeValue","close","call","nextExpandItemValues","isExpand","length","refKey","d","lastDropNodePosition","console","error","dropData","handleOpen","_triggerRef$current2","_triggerRef$current2$","open","handleClose","_triggerRef$current3","_triggerRef$current3$","_targetRef$current2","handleFocusItem","type","focusableItems","focusProps","nextFocusItemValue","DOWN","UP","handleLeftArrow","focusItem","includes","onFocusItem","_focusItem$parent","_focusItem$parent2","parent","handleRightArrow","selectActiveItem","activeItem","handleClean","onPickerKeydown","toggle","onExit","down","up","left","right","enter","del","handleTreeKeyDown","renderNode","visibleChildren","nodeProps","hasChildren","_merge","openClass","childrenClass","nodes","createElement","key","_ref","child","i","_ref2","renderVirtualListNode","_ref3","_ref4","renderDefaultDragNode","dragNodeContent","renderTree","_withTreeClassPrefix","classes","styles","Fragment","role","undefined","onKeyDown","defaultHeight","width","_ref5","rowHeight","rowCount","rowRenderer","scrollToAlignment","renderDropdownMenu","positionProps","speakerRef","top","mergedMenuStyle","autoWidth","target","hasValidValue","selectedElement","_usePickerClassName","hasValue","name","usedClassNamePropKeys","pickerProps","onEnter","speaker","concat","inputValue","displayName","propTypes","any","oneOf","number","bool","string","array","func"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _isFunction from \"lodash/isFunction\";\nimport _isNil from \"lodash/isNil\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _omit from \"lodash/omit\";\nimport _pick from \"lodash/pick\";\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { List, AutoSizer } from '../Picker/VirtualizedList';\nimport TreeNode from './TreeNode';\nimport { createChainedFunction, useClassNames, useCustom, useControlled, TREE_NODE_DROP_POSITION, KEY_CODE, mergeRefs, shallowEqual } from '../utils';\nimport { getExpandWhenSearching, hasVisibleChildren, getDragNodeKeys, calDropNodePosition, createUpdateTreeDataFunction, useTreeDrag, useFlattenTreeData, getTreeActiveNode, getDefaultExpandItemValues, useTreeNodeRefs, useTreeSearch, focusPreviousItem, getFocusableItems, focusNextItem, getActiveItem, toggleExpand, useGetTreeNodeChildren, focusToActiveTreeNode, leftArrowHandler, focusTreeNode, rightArrowHandler } from '../utils/treeUtils';\nimport { PickerToggle, PickerOverlay, SearchBar, PickerToggleTrigger, createConcatChildrenFunction, usePickerClassName, onMenuKeyDown as _onMenuKeyDown, usePublicMethods, listPickerPropTypes, listPickerDefaultProps, pickTriggerPropKeys, omitTriggerPropKeys, useToggleKeyDownEvent } from '../Picker';\n// default value for virtualized\nexport var maxTreeHeight = 320;\n\nvar defaultProps = _extends({}, listPickerDefaultProps, {\n  classPrefix: 'picker',\n  as: 'div',\n  height: 360,\n  appearance: 'default',\n  searchable: true,\n  cleanable: true,\n  menuAutoWidth: true,\n  placement: 'bottomStart',\n  locale: {\n    placeholder: 'Select',\n    searchPlaceholder: 'Search',\n    noResultsText: 'No results found'\n  }\n});\n\nvar TreePicker = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var Component = props.as,\n      data = props.data,\n      style = props.style,\n      controlledValue = props.value,\n      inline = props.inline,\n      overrideLocale = props.locale,\n      height = props.height,\n      className = props.className,\n      disabled = props.disabled,\n      placement = props.placement,\n      cleanable = props.cleanable,\n      menuStyle = props.menuStyle,\n      searchable = props.searchable,\n      virtualized = props.virtualized,\n      classPrefix = props.classPrefix,\n      defaultValue = props.defaultValue,\n      placeholder = props.placeholder,\n      searchKeyword = props.searchKeyword,\n      menuClassName = props.menuClassName,\n      menuAutoWidth = props.menuAutoWidth,\n      searchBy = props.searchBy,\n      toggleAs = props.toggleAs,\n      labelKey = props.labelKey,\n      valueKey = props.valueKey,\n      childrenKey = props.childrenKey,\n      draggable = props.draggable,\n      defaultExpandAll = props.defaultExpandAll,\n      disabledItemValues = props.disabledItemValues,\n      controlledExpandItemValues = props.expandItemValues,\n      defaultExpandItemValues = props.defaultExpandItemValues,\n      id = props.id,\n      getChildren = props.getChildren,\n      renderTreeIcon = props.renderTreeIcon,\n      renderTreeNode = props.renderTreeNode,\n      onExited = props.onExited,\n      onClean = props.onClean,\n      onOpen = props.onOpen,\n      onSearch = props.onSearch,\n      onSelect = props.onSelect,\n      onChange = props.onChange,\n      onEntered = props.onEntered,\n      onClose = props.onClose,\n      onDragEnd = props.onDragEnd,\n      onDragStart = props.onDragStart,\n      onDragEnter = props.onDragEnter,\n      onDragLeave = props.onDragLeave,\n      onDragOver = props.onDragOver,\n      onDrop = props.onDrop,\n      onExpand = props.onExpand,\n      renderExtraFooter = props.renderExtraFooter,\n      renderMenu = props.renderMenu,\n      renderValue = props.renderValue,\n      renderDragNode = props.renderDragNode,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"style\", \"value\", \"inline\", \"locale\", \"height\", \"className\", \"disabled\", \"placement\", \"cleanable\", \"menuStyle\", \"searchable\", \"virtualized\", \"classPrefix\", \"defaultValue\", \"placeholder\", \"searchKeyword\", \"menuClassName\", \"menuAutoWidth\", \"searchBy\", \"toggleAs\", \"labelKey\", \"valueKey\", \"childrenKey\", \"draggable\", \"defaultExpandAll\", \"disabledItemValues\", \"expandItemValues\", \"defaultExpandItemValues\", \"id\", \"getChildren\", \"renderTreeIcon\", \"renderTreeNode\", \"onExited\", \"onClean\", \"onOpen\", \"onSearch\", \"onSelect\", \"onChange\", \"onEntered\", \"onClose\", \"onDragEnd\", \"onDragStart\", \"onDragEnter\", \"onDragLeave\", \"onDragOver\", \"onDrop\", \"onExpand\", \"renderExtraFooter\", \"renderMenu\", \"renderValue\", \"renderDragNode\"]);\n\n  var triggerRef = useRef();\n  var targetRef = useRef();\n  var listRef = useRef();\n  var overlayRef = useRef();\n  var treeViewRef = useRef();\n\n  var _useCustom = useCustom('Picker', overrideLocale),\n      rtl = _useCustom.rtl,\n      locale = _useCustom.locale;\n\n  var _useControlled = useControlled(controlledValue, defaultValue),\n      value = _useControlled[0],\n      setValue = _useControlled[1],\n      isControlled = _useControlled[2];\n\n  var _useGetTreeNodeChildr = useGetTreeNodeChildren(data, valueKey, childrenKey),\n      treeData = _useGetTreeNodeChildr.data,\n      setTreeData = _useGetTreeNodeChildr.setData,\n      loadingNodeValues = _useGetTreeNodeChildr.loadingNodeValues,\n      loadChildren = _useGetTreeNodeChildr.loadChildren;\n\n  var _useControlled2 = useControlled(controlledExpandItemValues, getDefaultExpandItemValues(treeData, {\n    defaultExpandAll: defaultExpandAll,\n    valueKey: valueKey,\n    childrenKey: childrenKey,\n    defaultExpandItemValues: defaultExpandItemValues\n  })),\n      expandItemValues = _useControlled2[0],\n      setExpandItemValues = _useControlled2[1];\n\n  var _useState = useState(false),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  var _useState2 = useState(null),\n      focusItemValue = _useState2[0],\n      setFocusItemValue = _useState2[1];\n\n  var _useFlattenTreeData = useFlattenTreeData({\n    data: treeData,\n    labelKey: labelKey,\n    valueKey: valueKey,\n    childrenKey: childrenKey,\n    callback: function callback() {\n      // after flattenData, always trigger re-render\n      forceUpdate();\n    }\n  }),\n      flattenNodes = _useFlattenTreeData.flattenNodes,\n      forceUpdate = _useFlattenTreeData.forceUpdate,\n      formatVirtualizedTreeData = _useFlattenTreeData.formatVirtualizedTreeData;\n\n  var _useClassNames = useClassNames(classPrefix),\n      prefix = _useClassNames.prefix,\n      merge = _useClassNames.merge;\n\n  var _useClassNames2 = useClassNames('tree'),\n      treePrefix = _useClassNames2.prefix,\n      withTreeClassPrefix = _useClassNames2.withClassPrefix;\n\n  var _useTreeSearch = useTreeSearch({\n    labelKey: labelKey,\n    childrenKey: childrenKey,\n    searchKeyword: searchKeyword,\n    data: treeData,\n    searchBy: searchBy,\n    callback: function callback(searchKeyword, _filterData, event) {\n      onSearch === null || onSearch === void 0 ? void 0 : onSearch(searchKeyword, event);\n    }\n  }),\n      filteredData = _useTreeSearch.filteredData,\n      searchKeywordState = _useTreeSearch.searchKeywordState,\n      setSearchKeyword = _useTreeSearch.setSearchKeyword,\n      handleSearch = _useTreeSearch.handleSearch,\n      setFilteredData = _useTreeSearch.setFilteredData;\n\n  var _useTreeDrag = useTreeDrag(),\n      dragNodeKeys = _useTreeDrag.dragNodeKeys,\n      dragOverNodeKey = _useTreeDrag.dragOverNodeKey,\n      dragNode = _useTreeDrag.dragNode,\n      dropNodePosition = _useTreeDrag.dropNodePosition,\n      setDragNodeKeys = _useTreeDrag.setDragNodeKeys,\n      setDragOverNodeKey = _useTreeDrag.setDragOverNodeKey,\n      setDragNode = _useTreeDrag.setDragNode,\n      setDropNodePosition = _useTreeDrag.setDropNodePosition;\n\n  var _useTreeNodeRefs = useTreeNodeRefs(),\n      treeNodesRefs = _useTreeNodeRefs.treeNodesRefs,\n      saveTreeNodeRef = _useTreeNodeRefs.saveTreeNodeRef;\n\n  var activeNode = getTreeActiveNode(flattenNodes, value, valueKey);\n  var getFormattedNodes = useCallback(function (render) {\n    var formattedNodes = [];\n\n    if (virtualized) {\n      formattedNodes = formatVirtualizedTreeData(flattenNodes, filteredData, expandItemValues).filter(function (n) {\n        return n.showNode && n.visible;\n      });\n    } else {\n      formattedNodes = filteredData.map(function (dataItem, index) {\n        return render === null || render === void 0 ? void 0 : render(dataItem, index, 1);\n      });\n    }\n\n    return formattedNodes;\n  }, [expandItemValues, filteredData, flattenNodes, formatVirtualizedTreeData, virtualized]);\n  var focusActiveNode = useCallback(function () {\n    focusToActiveTreeNode({\n      list: listRef.current,\n      valueKey: valueKey,\n      selector: \".\" + treePrefix('node-active'),\n      activeNode: activeNode,\n      virtualized: virtualized,\n      container: treeViewRef.current,\n      formattedNodes: getFormattedNodes()\n    });\n  }, [treePrefix, activeNode, getFormattedNodes, valueKey, virtualized]);\n  useEffect(function () {\n    setFilteredData(data, searchKeywordState);\n    setTreeData(data);\n  }, [data, searchKeywordState, setFilteredData, setTreeData]);\n  useEffect(function () {\n    setFilteredData(treeData, searchKeywordState);\n  }, [treeData, searchKeywordState, setFilteredData]);\n  useEffect(function () {\n    if (Array.isArray(controlledExpandItemValues)) {\n      setExpandItemValues(controlledExpandItemValues);\n    }\n  }, [controlledExpandItemValues, setExpandItemValues]);\n  useEffect(function () {\n    setSearchKeyword(searchKeyword !== null && searchKeyword !== void 0 ? searchKeyword : '');\n  }, [searchKeyword, setSearchKeyword]);\n  var getDropData = useCallback(function (nodeData) {\n    var options = {\n      valueKey: valueKey,\n      childrenKey: childrenKey\n    };\n    return {\n      /** draggingNode */\n      dragNode: dragNode,\n\n      /** dropNode */\n      dropNode: nodeData,\n\n      /** dragAndDrop Position type */\n      dropNodePosition: dropNodePosition,\n      createUpdateDataFunction: createUpdateTreeDataFunction({\n        dragNode: dragNode,\n        dropNode: nodeData,\n        dropNodePosition: dropNodePosition\n      }, options)\n    };\n  }, [dragNode, valueKey, childrenKey, dropNodePosition]);\n\n  var getTreeNodeProps = function getTreeNodeProps(node, layer, index) {\n    var draggingNode = dragNode !== null && dragNode !== void 0 ? dragNode : {};\n    return {\n      as: Component,\n      rtl: rtl,\n      value: node[valueKey],\n      label: node[labelKey],\n      index: index,\n      layer: layer,\n      loading: loadingNodeValues.some(function (item) {\n        return shallowEqual(item, node[valueKey]);\n      }),\n      expand: node.expand,\n      active: shallowEqual(node[valueKey], value),\n      focus: shallowEqual(node[valueKey], focusItemValue),\n      visible: node.visible,\n      draggable: draggable,\n      dragging: shallowEqual(node[valueKey], draggingNode[valueKey]),\n      children: node[childrenKey],\n      nodeData: node,\n      disabled: disabledItemValues.some(function (disabledItem) {\n        return shallowEqual(disabledItem, node[valueKey]);\n      }),\n      dragOver: shallowEqual(node[valueKey], dragOverNodeKey) && dropNodePosition === TREE_NODE_DROP_POSITION.DRAG_OVER,\n      dragOverTop: shallowEqual(node[valueKey], dragOverNodeKey) && dropNodePosition === TREE_NODE_DROP_POSITION.DRAG_OVER_TOP,\n      dragOverBottom: shallowEqual(node[valueKey], dragOverNodeKey) && dropNodePosition === TREE_NODE_DROP_POSITION.DRAG_OVER_BOTTOM,\n      onSelect: handleSelect,\n      onDragStart: handleDragStart,\n      onDragEnter: handleDragEnter,\n      onDragOver: handleDragOver,\n      onDragLeave: handleDragLeave,\n      onDragEnd: handleDragEnd,\n      onDrop: handleDrop,\n      onExpand: handleExpand,\n      onRenderTreeNode: renderTreeNode,\n      onRenderTreeIcon: renderTreeIcon\n    };\n  };\n\n  var handleSelect = useCallback(function (nodeData, event) {\n    var _targetRef$current, _triggerRef$current, _triggerRef$current$c;\n\n    if (!nodeData) {\n      return;\n    }\n\n    var nodeValue = nodeData[valueKey];\n\n    if (!isControlled) {\n      setValue(nodeValue);\n    }\n\n    setFocusItemValue(nodeData[valueKey]);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nodeValue, event);\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(nodeData, nodeValue, event);\n    (_targetRef$current = targetRef.current) === null || _targetRef$current === void 0 ? void 0 : _targetRef$current.focus();\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$c = _triggerRef$current.close) === null || _triggerRef$current$c === void 0 ? void 0 : _triggerRef$current$c.call(_triggerRef$current);\n  }, [valueKey, isControlled, onChange, onSelect, setValue]);\n  var handleExpand = useCallback(function (node) {\n    var nextExpandItemValues = toggleExpand({\n      node: node,\n      isExpand: !node.expand,\n      expandItemValues: expandItemValues,\n      valueKey: valueKey\n    });\n    setExpandItemValues(nextExpandItemValues);\n    onExpand === null || onExpand === void 0 ? void 0 : onExpand(nextExpandItemValues, node, createConcatChildrenFunction(node, node[valueKey], {\n      valueKey: valueKey,\n      childrenKey: childrenKey\n    }));\n\n    if (_isFunction(getChildren) && !node.expand && Array.isArray(node[childrenKey]) && node[childrenKey].length === 0) {\n      loadChildren(node, getChildren);\n    }\n  }, [valueKey, childrenKey, expandItemValues, getChildren, onExpand, setExpandItemValues, loadChildren]);\n  var handleDragStart = useCallback(function (nodeData, event) {\n    if (draggable) {\n      setDragNodeKeys(getDragNodeKeys(nodeData, childrenKey, valueKey));\n      setDragNode(flattenNodes[nodeData.refKey]);\n      onDragStart === null || onDragStart === void 0 ? void 0 : onDragStart(nodeData, event);\n    }\n  }, [draggable, childrenKey, flattenNodes, onDragStart, setDragNodeKeys, setDragNode, valueKey]);\n  var handleDragEnter = useCallback(function (nodeData, event) {\n    if (dragNodeKeys.some(function (d) {\n      return shallowEqual(d, nodeData[valueKey]);\n    })) {\n      return;\n    }\n\n    if (dragNode) {\n      setDragOverNodeKey(nodeData[valueKey]);\n      setDropNodePosition(calDropNodePosition(event, treeNodesRefs[nodeData.refKey]));\n    }\n\n    onDragEnter === null || onDragEnter === void 0 ? void 0 : onDragEnter(nodeData, event);\n  }, [dragNode, treeNodesRefs, dragNodeKeys, onDragEnter, setDragOverNodeKey, setDropNodePosition, valueKey]);\n  var handleDragOver = useCallback(function (nodeData, event) {\n    if (dragNodeKeys.some(function (d) {\n      return shallowEqual(d, nodeData[valueKey]);\n    })) {\n      return;\n    }\n\n    if (dragNode && shallowEqual(nodeData[valueKey], dragOverNodeKey)) {\n      var lastDropNodePosition = calDropNodePosition(event, treeNodesRefs[nodeData.refKey]);\n      if (lastDropNodePosition === dropNodePosition) return;\n      setDropNodePosition(lastDropNodePosition);\n    }\n\n    onDragOver === null || onDragOver === void 0 ? void 0 : onDragOver(nodeData, event);\n  }, [dragNode, dragNodeKeys, dragOverNodeKey, dropNodePosition, onDragOver, setDropNodePosition, treeNodesRefs, valueKey]);\n  var handleDragLeave = useCallback(function (nodeData, event) {\n    onDragLeave === null || onDragLeave === void 0 ? void 0 : onDragLeave(nodeData, event);\n  }, [onDragLeave]);\n  var handleDragEnd = useCallback(function (nodeData, event) {\n    setDragNode(null);\n    setDragNodeKeys([]);\n    setDragOverNodeKey(null);\n    onDragEnd === null || onDragEnd === void 0 ? void 0 : onDragEnd(nodeData, event);\n  }, [setDragNode, setDragNodeKeys, setDragOverNodeKey, onDragEnd]);\n  var handleDrop = useCallback(function (nodeData, event) {\n    if (dragNodeKeys.some(function (d) {\n      return shallowEqual(d, nodeData[valueKey]);\n    })) {\n      console.error('Cannot drag a node to itself and its children');\n    } else {\n      var dropData = getDropData(nodeData);\n      onDrop === null || onDrop === void 0 ? void 0 : onDrop(dropData, event);\n    }\n\n    setDragNode(null);\n    setDragNodeKeys([]);\n    setDragOverNodeKey(null);\n  }, [dragNodeKeys, setDragNode, setDragOverNodeKey, setDragNodeKeys, onDrop, getDropData, valueKey]);\n  var handleOpen = useCallback(function () {\n    var _triggerRef$current2, _triggerRef$current2$;\n\n    (_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : (_triggerRef$current2$ = _triggerRef$current2.open) === null || _triggerRef$current2$ === void 0 ? void 0 : _triggerRef$current2$.call(_triggerRef$current2);\n    focusActiveNode();\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    setActive(true);\n  }, [focusActiveNode, onOpen]);\n  var handleClose = useCallback(function () {\n    var _triggerRef$current3, _triggerRef$current3$, _targetRef$current2;\n\n    (_triggerRef$current3 = triggerRef.current) === null || _triggerRef$current3 === void 0 ? void 0 : (_triggerRef$current3$ = _triggerRef$current3.close) === null || _triggerRef$current3$ === void 0 ? void 0 : _triggerRef$current3$.call(_triggerRef$current3);\n    setSearchKeyword('');\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n    setActive(false);\n    setFocusItemValue(activeNode === null || activeNode === void 0 ? void 0 : activeNode[valueKey]);\n    /**\n     * when using keyboard toggle picker, should refocus on PickerToggle Component after close picker menu\n     */\n\n    (_targetRef$current2 = targetRef.current) === null || _targetRef$current2 === void 0 ? void 0 : _targetRef$current2.focus();\n  }, [activeNode, onClose, setSearchKeyword, valueKey]);\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef,\n    targetRef: targetRef\n  });\n  var handleFocusItem = useCallback(function (type) {\n    var focusableItems = getFocusableItems(filteredData, {\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      childrenKey: childrenKey,\n      expandItemValues: expandItemValues\n    });\n    var selector = \".\" + treePrefix('node-label');\n    var focusProps = {\n      focusItemValue: focusItemValue,\n      focusableItems: focusableItems,\n      treeNodesRefs: treeNodesRefs,\n      selector: selector,\n      valueKey: valueKey,\n      callback: function callback(nextFocusItemValue) {\n        setFocusItemValue(nextFocusItemValue);\n      }\n    };\n\n    if (type === KEY_CODE.DOWN) {\n      focusNextItem(focusProps);\n      return;\n    }\n\n    if (type === KEY_CODE.UP) {\n      focusPreviousItem(focusProps);\n    }\n  }, [expandItemValues, filteredData, focusItemValue, treeNodesRefs, treePrefix, valueKey, childrenKey, disabledItemValues]);\n  var handleLeftArrow = useCallback(function () {\n    var focusItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    leftArrowHandler({\n      focusItem: focusItem,\n      expand: expandItemValues.includes(focusItem === null || focusItem === void 0 ? void 0 : focusItem[valueKey]),\n      onExpand: handleExpand,\n      onFocusItem: function onFocusItem() {\n        var _focusItem$parent, _focusItem$parent2;\n\n        setFocusItemValue(focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent = focusItem.parent) === null || _focusItem$parent === void 0 ? void 0 : _focusItem$parent[valueKey]);\n        focusTreeNode(focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent2 = focusItem.parent) === null || _focusItem$parent2 === void 0 ? void 0 : _focusItem$parent2.refKey, treeNodesRefs, \".\" + treePrefix('node-label'));\n      }\n    });\n  }, [expandItemValues, flattenNodes, focusItemValue, handleExpand, treeNodesRefs, treePrefix, valueKey]);\n  var handleRightArrow = useCallback(function () {\n    var focusItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    rightArrowHandler({\n      focusItem: focusItem,\n      expand: expandItemValues.includes(focusItem === null || focusItem === void 0 ? void 0 : focusItem[valueKey]),\n      childrenKey: childrenKey,\n      onExpand: handleExpand,\n      onFocusItem: function onFocusItem() {\n        handleFocusItem(KEY_CODE.DOWN);\n      }\n    });\n  }, [focusItemValue, flattenNodes, valueKey, expandItemValues, childrenKey, handleExpand, handleFocusItem]);\n  var selectActiveItem = useCallback(function (event) {\n    var activeItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    handleSelect(activeItem, event);\n  }, [flattenNodes, valueKey, focusItemValue, handleSelect]);\n  var handleClean = useCallback(function (event) {\n    setValue(null);\n    onChange === null || onChange === void 0 ? void 0 : onChange(null, event);\n  }, [onChange, setValue]);\n  var onPickerKeydown = useToggleKeyDownEvent(_extends({\n    toggle: !activeNode || !active,\n    triggerRef: triggerRef,\n    targetRef: targetRef,\n    overlayRef: overlayRef,\n    active: active,\n    onExit: handleClean,\n    onClose: handleClose,\n    onMenuKeyDown: function onMenuKeyDown(event) {\n      _onMenuKeyDown(event, {\n        down: function down() {\n          return handleFocusItem(KEY_CODE.DOWN);\n        },\n        up: function up() {\n          return handleFocusItem(KEY_CODE.UP);\n        },\n        left: rtl ? handleRightArrow : handleLeftArrow,\n        right: rtl ? handleLeftArrow : handleRightArrow,\n        enter: selectActiveItem,\n        del: handleClean\n      });\n    }\n  }, rest));\n  var handleTreeKeyDown = useCallback(function (event) {\n    if (!treeViewRef.current) {\n      return;\n    }\n\n    _onMenuKeyDown(event, {\n      down: function down() {\n        return handleFocusItem(KEY_CODE.DOWN);\n      },\n      up: function up() {\n        return handleFocusItem(KEY_CODE.UP);\n      },\n      left: rtl ? handleRightArrow : handleLeftArrow,\n      right: rtl ? handleLeftArrow : handleRightArrow,\n      enter: selectActiveItem\n    });\n  }, [handleFocusItem, handleLeftArrow, handleRightArrow, rtl, selectActiveItem]);\n\n  var renderNode = function renderNode(node, index, layer) {\n    if (!node.visible) {\n      return null;\n    }\n\n    var children = node[childrenKey];\n    var expand = getExpandWhenSearching(searchKeywordState, expandItemValues.includes(node[valueKey]));\n    var visibleChildren = _isUndefined(searchKeywordState) || searchKeywordState.length === 0 ? !!children : hasVisibleChildren(node, childrenKey);\n\n    var nodeProps = _extends({}, getTreeNodeProps(_extends({}, node, {\n      expand: expand\n    }), layer, index), {\n      hasChildren: visibleChildren\n    });\n\n    if (nodeProps.hasChildren) {\n      var _merge;\n\n      layer += 1;\n      var openClass = treePrefix('open');\n      var childrenClass = merge(treePrefix('node-children'), (_merge = {}, _merge[openClass] = expand && visibleChildren, _merge));\n      var nodes = children || [];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: childrenClass,\n        key: node[valueKey]\n      }, /*#__PURE__*/React.createElement(TreeNode, _extends({}, nodeProps, {\n        ref: function ref(_ref) {\n          return saveTreeNodeRef(node.refKey, _ref);\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: treePrefix('children')\n      }, nodes.map(function (child, i) {\n        return renderNode(child, i, layer);\n      })));\n    }\n\n    return /*#__PURE__*/React.createElement(TreeNode, _extends({\n      ref: function ref(_ref2) {\n        return saveTreeNodeRef(node.refKey, _ref2);\n      },\n      key: node[valueKey]\n    }, nodeProps));\n  };\n\n  var renderVirtualListNode = function renderVirtualListNode(nodes) {\n    return function (_ref3) {\n      var key = _ref3.key,\n          index = _ref3.index,\n          style = _ref3.style;\n      var node = nodes[index];\n      var layer = node.layer,\n          showNode = node.showNode;\n      var expand = getExpandWhenSearching(searchKeywordState, expandItemValues.includes(node[valueKey]));\n\n      if (!node.visible) {\n        return null;\n      }\n\n      var nodeProps = _extends({}, getTreeNodeProps(_extends({}, node, {\n        expand: expand\n      }), layer), {\n        style: style,\n        hasChildren: node.hasChildren\n      });\n\n      return showNode && /*#__PURE__*/React.createElement(TreeNode, _extends({\n        ref: function ref(_ref4) {\n          return saveTreeNodeRef(node.refKey, _ref4);\n        },\n        key: key\n      }, nodeProps));\n    };\n  };\n\n  var renderDefaultDragNode = function renderDefaultDragNode() {\n    if (draggable) {\n      var dragNodeContent = dragNode === null || dragNode === void 0 ? void 0 : dragNode[labelKey];\n\n      if (_isFunction(renderDragNode)) {\n        dragNodeContent = renderDragNode(dragNode);\n      }\n\n      return /*#__PURE__*/React.createElement(\"span\", {\n        id: \"drag-node\",\n        className: treePrefix('drag-node-mover')\n      }, dragNodeContent);\n    }\n\n    return null;\n  };\n\n  var renderTree = function renderTree() {\n    var _withTreeClassPrefix;\n\n    var classes = withTreeClassPrefix((_withTreeClassPrefix = {}, _withTreeClassPrefix[className !== null && className !== void 0 ? className : ''] = inline, _withTreeClassPrefix.virtualized = virtualized, _withTreeClassPrefix));\n    var formattedNodes = getFormattedNodes(renderNode);\n    var styles = inline ? _extends({\n      height: height\n    }, style) : {};\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      role: \"tree\",\n      id: id ? id + \"-listbox\" : undefined,\n      ref: treeViewRef,\n      className: classes,\n      style: styles,\n      onKeyDown: inline ? handleTreeKeyDown : undefined\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: treePrefix('nodes')\n    }, virtualized ? /*#__PURE__*/React.createElement(AutoSizer, {\n      defaultHeight: inline ? height : maxTreeHeight,\n      style: {\n        width: 'auto',\n        height: 'auto'\n      }\n    }, function (_ref5) {\n      var height = _ref5.height,\n          width = _ref5.width;\n      return /*#__PURE__*/React.createElement(List, {\n        ref: listRef,\n        width: width,\n        height: height,\n        rowHeight: 36,\n        rowCount: formattedNodes.length,\n        rowRenderer: renderVirtualListNode(formattedNodes),\n        scrollToAlignment: \"center\"\n      });\n    }) : formattedNodes)), renderDefaultDragNode());\n  };\n\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var left = positionProps.left,\n        top = positionProps.top,\n        className = positionProps.className;\n    var classes = merge(className, menuClassName, prefix('tree-menu'));\n\n    var mergedMenuStyle = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n\n    var styles = virtualized ? _extends({\n      height: height\n    }, mergedMenuStyle) : _extends({}, mergedMenuStyle);\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: styles,\n      ref: mergeRefs(overlayRef, speakerRef),\n      onKeyDown: onPickerKeydown,\n      target: triggerRef\n    }, searchable ? /*#__PURE__*/React.createElement(SearchBar, {\n      placeholder: locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeywordState\n    }) : null, renderMenu ? renderMenu(renderTree()) : renderTree(), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   */\n\n\n  var hasValidValue = !_isNil(activeNode) || !_isNil(value) && _isFunction(renderValue);\n\n  var selectedElement = placeholder;\n\n  if (hasValidValue) {\n    var node = activeNode !== null && activeNode !== void 0 ? activeNode : {};\n    selectedElement = node[labelKey];\n\n    if (_isFunction(renderValue)) {\n      selectedElement = renderValue(value, node, selectedElement);\n\n      if (_isNil(selectedElement)) {\n        hasValidValue = false;\n      }\n    }\n  }\n\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n    hasValue: hasValidValue,\n    name: 'tree'\n  })),\n      classes = _usePickerClassName[0],\n      usedClassNamePropKeys = _usePickerClassName[1];\n\n  if (inline) {\n    return renderTree();\n  }\n\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    pickerProps: _pick(props, pickTriggerPropKeys),\n    ref: triggerRef,\n    placement: placement,\n    onEnter: handleOpen,\n    onEntered: onEntered,\n    onExited: createChainedFunction(handleClose, onExited),\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, _omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys, ['cascade'])), {\n    id: id,\n    ref: targetRef,\n    onKeyDown: onPickerKeydown,\n    onClean: createChainedFunction(handleClean, onClean),\n    cleanable: cleanable && !disabled,\n    as: toggleAs,\n    disabled: disabled,\n    hasValue: hasValidValue,\n    active: active,\n    placement: placement,\n    inputValue: value\n  }), selectedElement || locale.placeholder)));\n});\nTreePicker.displayName = 'TreePicker';\nTreePicker.defaultProps = defaultProps;\nTreePicker.propTypes = _extends({}, listPickerPropTypes, {\n  locale: PropTypes.any,\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  height: PropTypes.number,\n  inline: PropTypes.bool,\n  draggable: PropTypes.bool,\n  virtualized: PropTypes.bool,\n  searchable: PropTypes.bool,\n  menuAutoWidth: PropTypes.bool,\n  searchKeyword: PropTypes.string,\n  defaultExpandAll: PropTypes.bool,\n  expandItemValues: PropTypes.array,\n  defaultExpandItemValues: PropTypes.array,\n  onSearch: PropTypes.func,\n  onExpand: PropTypes.func,\n  onSelect: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderTreeNode: PropTypes.func,\n  renderTreeIcon: PropTypes.func,\n  renderExtraFooter: PropTypes.func,\n  renderDragNode: PropTypes.func,\n  searchBy: PropTypes.func\n});\nexport default TreePicker;"]},"metadata":{},"sourceType":"module"}