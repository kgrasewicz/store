{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Attachment from '@rsuite/icons/legacy/Attachment';\nimport Reload from '@rsuite/icons/Reload';\nimport { previewFile, useClassNames } from '../utils';\nimport CloseButton from '../CloseButton';\n/**\n * Format display file size\n * @param size\n */\n\nvar getSize = function getSize(size) {\n  if (size === void 0) {\n    size = 0;\n  }\n\n  var K = 1024;\n  var M = 1024 * 1024;\n  var G = 1024 * 1024 * 1024;\n\n  if (size > G) {\n    return (size / G).toFixed(2) + \"GB\";\n  }\n\n  if (size > M) {\n    return (size / M).toFixed(2) + \"MB\";\n  }\n\n  if (size > K) {\n    return (size / K).toFixed(2) + \"KB\";\n  }\n\n  return size + \"B\";\n};\n\nvar defaultProps = {\n  as: 'div',\n  classPrefix: 'uploader-file-item',\n  maxPreviewFileSize: 1024 * 1024 * 5,\n  // 5MB\n  listType: 'text',\n  removable: true,\n  allowReupload: true\n};\nvar UploadFileItem = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var Component = props.as,\n      disabled = props.disabled,\n      allowReupload = props.allowReupload,\n      file = props.file,\n      classPrefix = props.classPrefix,\n      listType = props.listType,\n      className = props.className,\n      removable = props.removable,\n      maxPreviewFileSize = props.maxPreviewFileSize,\n      locale = props.locale,\n      renderFileInfo = props.renderFileInfo,\n      onPreview = props.onPreview,\n      onCancel = props.onCancel,\n      onReupload = props.onReupload,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"disabled\", \"allowReupload\", \"file\", \"classPrefix\", \"listType\", \"className\", \"removable\", \"maxPreviewFileSize\", \"locale\", \"renderFileInfo\", \"onPreview\", \"onCancel\", \"onReupload\"]);\n\n  var _useClassNames = useClassNames(classPrefix),\n      merge = _useClassNames.merge,\n      withClassPrefix = _useClassNames.withClassPrefix,\n      prefix = _useClassNames.prefix;\n\n  var classes = merge(className, withClassPrefix(listType, {\n    disabled: disabled,\n    'has-error': file.status === 'error'\n  }));\n\n  var _useState = useState(file.url ? file.url : null),\n      previewImage = _useState[0],\n      setPreviewImage = _useState[1];\n  /**\n   * Get thumbnail of image file\n   */\n\n\n  var getThumbnail = useCallback(function (callback) {\n    var _file$blobFile;\n\n    if (!~['picture-text', 'picture'].indexOf(listType)) {\n      return;\n    }\n\n    if (!file.blobFile || (file === null || file === void 0 ? void 0 : (_file$blobFile = file.blobFile) === null || _file$blobFile === void 0 ? void 0 : _file$blobFile.size) > maxPreviewFileSize) {\n      return;\n    }\n\n    previewFile(file.blobFile, callback);\n  }, [file, listType, maxPreviewFileSize]);\n  useEffect(function () {\n    if (!file.url) {\n      getThumbnail(function (previewImage) {\n        setPreviewImage(previewImage);\n      });\n    }\n  }, [file.url, getThumbnail]);\n  var handlePreview = useCallback(function (event) {\n    if (disabled) {\n      return;\n    }\n\n    onPreview === null || onPreview === void 0 ? void 0 : onPreview(file, event);\n  }, [disabled, file, onPreview]);\n  var handleRemove = useCallback(function (event) {\n    if (disabled) {\n      return;\n    }\n\n    onCancel === null || onCancel === void 0 ? void 0 : onCancel(file.fileKey, event);\n  }, [disabled, file.fileKey, onCancel]);\n  var handleReupload = useCallback(function (event) {\n    if (disabled) {\n      return;\n    }\n\n    onReupload === null || onReupload === void 0 ? void 0 : onReupload(file, event);\n  }, [disabled, file, onReupload]);\n  /**\n   * Rendering progress bar\n   */\n\n  var renderProgressBar = function renderProgressBar() {\n    var _file$progress = file.progress,\n        progress = _file$progress === void 0 ? 0 : _file$progress,\n        status = file.status;\n    var show = !disabled && status === 'uploading';\n    var visibility = show ? 'visible' : 'hidden';\n    var wrapStyle = {\n      visibility: visibility\n    };\n    var progressbarStyle = {\n      width: progress + \"%\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('progress'),\n      style: wrapStyle\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('progress-bar'),\n      style: progressbarStyle\n    }));\n  };\n\n  var renderPreview = function renderPreview() {\n    if (previewImage) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: prefix('preview')\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        role: \"presentation\",\n        src: previewImage,\n        alt: file.name,\n        onClick: handlePreview\n      }));\n    }\n\n    return null;\n  };\n  /**\n   * Render the loading state.\n   */\n\n\n  var renderIcon = function renderIcon() {\n    var uploading = file.status === 'uploading';\n    var classes = prefix('icon-wrapper', {\n      'icon-loading': uploading\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classes\n    }, uploading ? /*#__PURE__*/React.createElement(\"i\", {\n      className: prefix('icon')\n    }) : /*#__PURE__*/React.createElement(Attachment, {\n      className: prefix('icon')\n    }));\n  };\n  /**\n   * Render the remove file button.\n   */\n\n\n  var renderRemoveButton = function renderRemoveButton() {\n    if (!removable) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(CloseButton, {\n      className: prefix('btn-remove'),\n      onClick: handleRemove\n    });\n  };\n  /**\n   * Render error messages.\n   */\n\n\n  var renderErrorStatus = function renderErrorStatus() {\n    if (file.status === 'error') {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: prefix('status')\n      }, /*#__PURE__*/React.createElement(\"span\", null, locale === null || locale === void 0 ? void 0 : locale.error), allowReupload && /*#__PURE__*/React.createElement(\"a\", {\n        role: \"button\",\n        tabIndex: -1,\n        onClick: handleReupload\n      }, /*#__PURE__*/React.createElement(Reload, {\n        className: prefix('icon-reupload')\n      })));\n    }\n\n    return null;\n  };\n  /**\n   * Render file size.\n   */\n\n\n  var renderFileSize = function renderFileSize() {\n    if (file.status !== 'error' && file.blobFile) {\n      var _file$blobFile2;\n\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: prefix('size')\n      }, getSize(file === null || file === void 0 ? void 0 : (_file$blobFile2 = file.blobFile) === null || _file$blobFile2 === void 0 ? void 0 : _file$blobFile2.size));\n    }\n\n    return null;\n  };\n  /**\n   * Render file panel\n   */\n\n\n  var renderFilePanel = function renderFilePanel() {\n    var fileElement = /*#__PURE__*/React.createElement(\"a\", {\n      role: \"presentation\",\n      className: prefix('title'),\n      onClick: handlePreview\n    }, file.name);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('panel')\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('content')\n    }, renderFileInfo ? renderFileInfo(file, fileElement) : fileElement, renderErrorStatus(), renderFileSize()));\n  };\n\n  if (listType === 'picture') {\n    return /*#__PURE__*/React.createElement(Component, _extends({}, rest, {\n      ref: ref,\n      className: classes\n    }), renderIcon(), renderPreview(), renderErrorStatus(), renderRemoveButton());\n  }\n\n  if (listType === 'picture-text') {\n    return /*#__PURE__*/React.createElement(Component, _extends({}, rest, {\n      ref: ref,\n      className: classes\n    }), renderIcon(), renderPreview(), renderFilePanel(), renderProgressBar(), renderRemoveButton());\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({}, rest, {\n    ref: ref,\n    className: classes\n  }), renderIcon(), renderFilePanel(), renderProgressBar(), renderRemoveButton());\n});\nUploadFileItem.displayName = 'UploadFileItem';\nUploadFileItem.defaultProps = defaultProps;\nUploadFileItem.propTypes = {\n  locale: PropTypes.any,\n  file: PropTypes.object,\n  listType: PropTypes.oneOf(['text', 'picture-text', 'picture']),\n  disabled: PropTypes.bool,\n  className: PropTypes.string,\n  maxPreviewFileSize: PropTypes.number,\n  classPrefix: PropTypes.string,\n  removable: PropTypes.bool,\n  allowReupload: PropTypes.bool,\n  renderFileInfo: PropTypes.func,\n  onCancel: PropTypes.func,\n  onPreview: PropTypes.func,\n  onReupload: PropTypes.func\n};\nexport default UploadFileItem;","map":{"version":3,"sources":["C:/Programowanie/store/node_modules/rsuite/es/Uploader/UploadFileItem.js"],"names":["_extends","_objectWithoutPropertiesLoose","React","useCallback","useEffect","useState","PropTypes","Attachment","Reload","previewFile","useClassNames","CloseButton","getSize","size","K","M","G","toFixed","defaultProps","as","classPrefix","maxPreviewFileSize","listType","removable","allowReupload","UploadFileItem","forwardRef","props","ref","Component","disabled","file","className","locale","renderFileInfo","onPreview","onCancel","onReupload","rest","_useClassNames","merge","withClassPrefix","prefix","classes","status","_useState","url","previewImage","setPreviewImage","getThumbnail","callback","_file$blobFile","indexOf","blobFile","handlePreview","event","handleRemove","fileKey","handleReupload","renderProgressBar","_file$progress","progress","show","visibility","wrapStyle","progressbarStyle","width","createElement","style","renderPreview","role","src","alt","name","onClick","renderIcon","uploading","renderRemoveButton","renderErrorStatus","error","tabIndex","renderFileSize","_file$blobFile2","renderFilePanel","fileElement","displayName","propTypes","any","object","oneOf","bool","string","number","func"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Attachment from '@rsuite/icons/legacy/Attachment';\nimport Reload from '@rsuite/icons/Reload';\nimport { previewFile, useClassNames } from '../utils';\nimport CloseButton from '../CloseButton';\n\n/**\n * Format display file size\n * @param size\n */\nvar getSize = function getSize(size) {\n  if (size === void 0) {\n    size = 0;\n  }\n\n  var K = 1024;\n  var M = 1024 * 1024;\n  var G = 1024 * 1024 * 1024;\n\n  if (size > G) {\n    return (size / G).toFixed(2) + \"GB\";\n  }\n\n  if (size > M) {\n    return (size / M).toFixed(2) + \"MB\";\n  }\n\n  if (size > K) {\n    return (size / K).toFixed(2) + \"KB\";\n  }\n\n  return size + \"B\";\n};\n\nvar defaultProps = {\n  as: 'div',\n  classPrefix: 'uploader-file-item',\n  maxPreviewFileSize: 1024 * 1024 * 5,\n  // 5MB\n  listType: 'text',\n  removable: true,\n  allowReupload: true\n};\nvar UploadFileItem = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var Component = props.as,\n      disabled = props.disabled,\n      allowReupload = props.allowReupload,\n      file = props.file,\n      classPrefix = props.classPrefix,\n      listType = props.listType,\n      className = props.className,\n      removable = props.removable,\n      maxPreviewFileSize = props.maxPreviewFileSize,\n      locale = props.locale,\n      renderFileInfo = props.renderFileInfo,\n      onPreview = props.onPreview,\n      onCancel = props.onCancel,\n      onReupload = props.onReupload,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"disabled\", \"allowReupload\", \"file\", \"classPrefix\", \"listType\", \"className\", \"removable\", \"maxPreviewFileSize\", \"locale\", \"renderFileInfo\", \"onPreview\", \"onCancel\", \"onReupload\"]);\n\n  var _useClassNames = useClassNames(classPrefix),\n      merge = _useClassNames.merge,\n      withClassPrefix = _useClassNames.withClassPrefix,\n      prefix = _useClassNames.prefix;\n\n  var classes = merge(className, withClassPrefix(listType, {\n    disabled: disabled,\n    'has-error': file.status === 'error'\n  }));\n\n  var _useState = useState(file.url ? file.url : null),\n      previewImage = _useState[0],\n      setPreviewImage = _useState[1];\n  /**\n   * Get thumbnail of image file\n   */\n\n\n  var getThumbnail = useCallback(function (callback) {\n    var _file$blobFile;\n\n    if (!~['picture-text', 'picture'].indexOf(listType)) {\n      return;\n    }\n\n    if (!file.blobFile || (file === null || file === void 0 ? void 0 : (_file$blobFile = file.blobFile) === null || _file$blobFile === void 0 ? void 0 : _file$blobFile.size) > maxPreviewFileSize) {\n      return;\n    }\n\n    previewFile(file.blobFile, callback);\n  }, [file, listType, maxPreviewFileSize]);\n  useEffect(function () {\n    if (!file.url) {\n      getThumbnail(function (previewImage) {\n        setPreviewImage(previewImage);\n      });\n    }\n  }, [file.url, getThumbnail]);\n  var handlePreview = useCallback(function (event) {\n    if (disabled) {\n      return;\n    }\n\n    onPreview === null || onPreview === void 0 ? void 0 : onPreview(file, event);\n  }, [disabled, file, onPreview]);\n  var handleRemove = useCallback(function (event) {\n    if (disabled) {\n      return;\n    }\n\n    onCancel === null || onCancel === void 0 ? void 0 : onCancel(file.fileKey, event);\n  }, [disabled, file.fileKey, onCancel]);\n  var handleReupload = useCallback(function (event) {\n    if (disabled) {\n      return;\n    }\n\n    onReupload === null || onReupload === void 0 ? void 0 : onReupload(file, event);\n  }, [disabled, file, onReupload]);\n  /**\n   * Rendering progress bar\n   */\n\n  var renderProgressBar = function renderProgressBar() {\n    var _file$progress = file.progress,\n        progress = _file$progress === void 0 ? 0 : _file$progress,\n        status = file.status;\n    var show = !disabled && status === 'uploading';\n    var visibility = show ? 'visible' : 'hidden';\n    var wrapStyle = {\n      visibility: visibility\n    };\n    var progressbarStyle = {\n      width: progress + \"%\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('progress'),\n      style: wrapStyle\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('progress-bar'),\n      style: progressbarStyle\n    }));\n  };\n\n  var renderPreview = function renderPreview() {\n    if (previewImage) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: prefix('preview')\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        role: \"presentation\",\n        src: previewImage,\n        alt: file.name,\n        onClick: handlePreview\n      }));\n    }\n\n    return null;\n  };\n  /**\n   * Render the loading state.\n   */\n\n\n  var renderIcon = function renderIcon() {\n    var uploading = file.status === 'uploading';\n    var classes = prefix('icon-wrapper', {\n      'icon-loading': uploading\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classes\n    }, uploading ? /*#__PURE__*/React.createElement(\"i\", {\n      className: prefix('icon')\n    }) : /*#__PURE__*/React.createElement(Attachment, {\n      className: prefix('icon')\n    }));\n  };\n  /**\n   * Render the remove file button.\n   */\n\n\n  var renderRemoveButton = function renderRemoveButton() {\n    if (!removable) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(CloseButton, {\n      className: prefix('btn-remove'),\n      onClick: handleRemove\n    });\n  };\n  /**\n   * Render error messages.\n   */\n\n\n  var renderErrorStatus = function renderErrorStatus() {\n    if (file.status === 'error') {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: prefix('status')\n      }, /*#__PURE__*/React.createElement(\"span\", null, locale === null || locale === void 0 ? void 0 : locale.error), allowReupload && /*#__PURE__*/React.createElement(\"a\", {\n        role: \"button\",\n        tabIndex: -1,\n        onClick: handleReupload\n      }, /*#__PURE__*/React.createElement(Reload, {\n        className: prefix('icon-reupload')\n      })));\n    }\n\n    return null;\n  };\n  /**\n   * Render file size.\n   */\n\n\n  var renderFileSize = function renderFileSize() {\n    if (file.status !== 'error' && file.blobFile) {\n      var _file$blobFile2;\n\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: prefix('size')\n      }, getSize(file === null || file === void 0 ? void 0 : (_file$blobFile2 = file.blobFile) === null || _file$blobFile2 === void 0 ? void 0 : _file$blobFile2.size));\n    }\n\n    return null;\n  };\n  /**\n   * Render file panel\n   */\n\n\n  var renderFilePanel = function renderFilePanel() {\n    var fileElement = /*#__PURE__*/React.createElement(\"a\", {\n      role: \"presentation\",\n      className: prefix('title'),\n      onClick: handlePreview\n    }, file.name);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('panel')\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('content')\n    }, renderFileInfo ? renderFileInfo(file, fileElement) : fileElement, renderErrorStatus(), renderFileSize()));\n  };\n\n  if (listType === 'picture') {\n    return /*#__PURE__*/React.createElement(Component, _extends({}, rest, {\n      ref: ref,\n      className: classes\n    }), renderIcon(), renderPreview(), renderErrorStatus(), renderRemoveButton());\n  }\n\n  if (listType === 'picture-text') {\n    return /*#__PURE__*/React.createElement(Component, _extends({}, rest, {\n      ref: ref,\n      className: classes\n    }), renderIcon(), renderPreview(), renderFilePanel(), renderProgressBar(), renderRemoveButton());\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({}, rest, {\n    ref: ref,\n    className: classes\n  }), renderIcon(), renderFilePanel(), renderProgressBar(), renderRemoveButton());\n});\nUploadFileItem.displayName = 'UploadFileItem';\nUploadFileItem.defaultProps = defaultProps;\nUploadFileItem.propTypes = {\n  locale: PropTypes.any,\n  file: PropTypes.object,\n  listType: PropTypes.oneOf(['text', 'picture-text', 'picture']),\n  disabled: PropTypes.bool,\n  className: PropTypes.string,\n  maxPreviewFileSize: PropTypes.number,\n  classPrefix: PropTypes.string,\n  removable: PropTypes.bool,\n  allowReupload: PropTypes.bool,\n  renderFileInfo: PropTypes.func,\n  onCancel: PropTypes.func,\n  onPreview: PropTypes.func,\n  onReupload: PropTypes.func\n};\nexport default UploadFileItem;"]},"metadata":{},"sourceType":"module"}