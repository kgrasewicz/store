{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useRef, useEffect, useState, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport helper from '../DOMHelper';\nimport ModalManager from './ModalManager';\nimport Fade from '../Animation/Fade';\nimport { animationPropTypes } from '../Animation/utils';\nimport { mergeRefs, getDOMNode, usePortal, createChainedFunction } from '../utils';\nvar manager;\n\nfunction getManager() {\n  if (!manager) manager = new ModalManager();\n  return manager;\n}\n\nvar defaultProps = {\n  as: 'div',\n  backdrop: true,\n  keyboard: true,\n  autoFocus: true,\n  enforceFocus: true\n};\n\nvar useModalManager = function useModalManager() {\n  var modalManager = getManager();\n  var modal = useRef({\n    dialog: null,\n    backdrop: null\n  });\n  return {\n    add: function add(containerElement, containerClassName) {\n      return modalManager.add(modal.current, containerElement, containerClassName);\n    },\n    remove: function remove() {\n      return modalManager.remove(modal.current);\n    },\n    isTopModal: function isTopModal() {\n      return modalManager.isTopModal(modal.current);\n    },\n    setDialogRef: useCallback(function (ref) {\n      modal.current.dialog = ref;\n    }, []),\n    setBackdropRef: useCallback(function (ref) {\n      modal.current.backdrop = ref;\n    }, [])\n  };\n};\n\nvar Modal = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var Component = props.as,\n      children = props.children,\n      Transition = props.transition,\n      dialogTransitionTimeout = props.dialogTransitionTimeout,\n      style = props.style,\n      className = props.className,\n      container = props.container,\n      animationProps = props.animationProps,\n      containerClassName = props.containerClassName,\n      keyboard = props.keyboard,\n      enforceFocus = props.enforceFocus,\n      backdrop = props.backdrop,\n      backdropTransitionTimeout = props.backdropTransitionTimeout,\n      backdropStyle = props.backdropStyle,\n      backdropClassName = props.backdropClassName,\n      open = props.open,\n      autoFocus = props.autoFocus,\n      onBackdropClick = props.onBackdropClick,\n      onEscapeKeyUp = props.onEscapeKeyUp,\n      onExit = props.onExit,\n      onExiting = props.onExiting,\n      onExited = props.onExited,\n      onEnter = props.onEnter,\n      onEntering = props.onEntering,\n      onEntered = props.onEntered,\n      onClose = props.onClose,\n      onOpen = props.onOpen,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"children\", \"transition\", \"dialogTransitionTimeout\", \"style\", \"className\", \"container\", \"animationProps\", \"containerClassName\", \"keyboard\", \"enforceFocus\", \"backdrop\", \"backdropTransitionTimeout\", \"backdropStyle\", \"backdropClassName\", \"open\", \"autoFocus\", \"onBackdropClick\", \"onEscapeKeyUp\", \"onExit\", \"onExiting\", \"onExited\", \"onEnter\", \"onEntering\", \"onEntered\", \"onClose\", \"onOpen\"]);\n\n  var _useState = useState(!open),\n      exited = _useState[0],\n      setExited = _useState[1];\n\n  var _usePortal = usePortal({\n    container: container\n  }),\n      Portal = _usePortal.Portal;\n\n  var modal = useModalManager();\n\n  if (open) {\n    if (exited) setExited(false);\n  } else if (!Transition && !exited) {\n    setExited(true);\n  }\n\n  var mountModal = open || Transition && !exited;\n  var rootRef = useRef();\n  var lastFocus = useRef();\n  var handleDocumentKeyUp = useCallback(function (event) {\n    if (keyboard && event.keyCode === 27 && modal.isTopModal()) {\n      onEscapeKeyUp === null || onEscapeKeyUp === void 0 ? void 0 : onEscapeKeyUp(event);\n      onClose === null || onClose === void 0 ? void 0 : onClose(event);\n    }\n  }, [keyboard, modal, onEscapeKeyUp, onClose]);\n  var checkForFocus = useCallback(function () {\n    if (helper.canUseDOM) {\n      lastFocus.current = helper.activeElement();\n    }\n  }, []);\n  var restoreLastFocus = useCallback(function () {\n    if (lastFocus.current) {\n      var _lastFocus$current$fo, _lastFocus$current;\n\n      (_lastFocus$current$fo = (_lastFocus$current = lastFocus.current).focus) === null || _lastFocus$current$fo === void 0 ? void 0 : _lastFocus$current$fo.call(_lastFocus$current);\n      lastFocus.current = null;\n    }\n  }, []);\n  var getDialogElement = useCallback(function () {\n    return getDOMNode(rootRef.current);\n  }, []);\n  var handleEnforceFocus = useCallback(function () {\n    if (!enforceFocus || !modal.isTopModal()) {\n      return;\n    }\n\n    var currentActiveElement = helper.activeElement();\n    var dialog = getDialogElement();\n\n    if (dialog && dialog !== currentActiveElement && !helper.contains(dialog, currentActiveElement)) {\n      dialog.focus();\n    }\n  }, [enforceFocus, getDialogElement, modal]);\n  var handleBackdropClick = useCallback(function (event) {\n    if (event.target !== event.currentTarget) {\n      return;\n    }\n\n    onBackdropClick === null || onBackdropClick === void 0 ? void 0 : onBackdropClick(event);\n\n    if (backdrop === true) {\n      onClose === null || onClose === void 0 ? void 0 : onClose(event);\n    }\n  }, [backdrop, onBackdropClick, onClose]);\n  var documentKeyupListener = useRef();\n  var docusinListener = useRef();\n  var handleOpen = useCallback(function () {\n    var dialog = getDialogElement();\n    var containerElement = helper.getContainer(container, document.body);\n    modal.add(containerElement, containerClassName);\n    documentKeyupListener.current = helper.on(document, 'keydown', handleDocumentKeyUp);\n    docusinListener.current = helper.on(document, 'focus', handleEnforceFocus, true);\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    checkForFocus();\n\n    if (autoFocus) {\n      dialog === null || dialog === void 0 ? void 0 : dialog.focus();\n    }\n  }, [autoFocus, checkForFocus, container, containerClassName, getDialogElement, handleDocumentKeyUp, handleEnforceFocus, modal, onOpen]);\n  var handleClose = useCallback(function () {\n    var _documentKeyupListene, _docusinListener$curr;\n\n    modal.remove();\n    (_documentKeyupListene = documentKeyupListener.current) === null || _documentKeyupListene === void 0 ? void 0 : _documentKeyupListene.off();\n    (_docusinListener$curr = docusinListener.current) === null || _docusinListener$curr === void 0 ? void 0 : _docusinListener$curr.off();\n    restoreLastFocus();\n  }, [modal, restoreLastFocus]);\n  useEffect(function () {\n    if (!open) {\n      return;\n    }\n\n    handleOpen();\n  }, [open, handleOpen]);\n  useEffect(function () {\n    if (!exited) {\n      return;\n    }\n\n    handleClose();\n  }, [exited, handleClose]); // will unmount\n\n  useEffect(function () {\n    return function () {\n      handleClose();\n    };\n  }, []);\n  var handleExited = useCallback(function () {\n    setExited(true);\n  }, []);\n\n  if (!mountModal) {\n    return null;\n  }\n\n  var renderBackdrop = function renderBackdrop() {\n    var backdropPorps = {\n      style: backdropStyle,\n      onClick: handleBackdropClick\n    };\n\n    if (Transition) {\n      return /*#__PURE__*/React.createElement(Fade, {\n        transitionAppear: true,\n        in: open,\n        timeout: backdropTransitionTimeout\n      }, function (fadeProps, ref) {\n        var className = fadeProps.className,\n            rest = _objectWithoutPropertiesLoose(fadeProps, [\"className\"]);\n\n        return /*#__PURE__*/React.createElement(\"div\", _extends({\n          \"aria-hidden\": true\n        }, rest, backdropPorps, {\n          ref: mergeRefs(modal.setBackdropRef, ref),\n          className: classNames(backdropClassName, className)\n        }));\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", _extends({\n      \"aria-hidden\": true\n    }, backdropPorps, {\n      className: backdropClassName\n    }));\n  };\n\n  var dialogElement = Transition ? /*#__PURE__*/React.createElement(Transition, _extends({}, animationProps, {\n    transitionAppear: true,\n    unmountOnExit: true,\n    in: open,\n    timeout: dialogTransitionTimeout,\n    onExit: onExit,\n    onExiting: onExiting,\n    onExited: createChainedFunction(handleExited, onExited),\n    onEnter: onEnter,\n    onEntering: onEntering,\n    onEntered: onEntered\n  }), children) : children;\n  return /*#__PURE__*/React.createElement(Portal, null, /*#__PURE__*/React.createElement(Component, _extends({\n    role: \"dialog\",\n    \"aria-modal\": true\n  }, rest, {\n    ref: mergeRefs(modal.setDialogRef, ref),\n    style: style,\n    className: className,\n    tabIndex: -1\n  }), backdrop && renderBackdrop(), dialogElement));\n});\nexport var modalPropTypes = {\n  as: PropTypes.elementType,\n  className: PropTypes.string,\n  backdropClassName: PropTypes.string,\n  style: PropTypes.object,\n  backdropStyle: PropTypes.object,\n  open: PropTypes.bool,\n  backdrop: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  keyboard: PropTypes.bool,\n  autoFocus: PropTypes.bool,\n  enforceFocus: PropTypes.bool,\n  animationProps: PropTypes.object,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func\n};\nModal.displayName = 'OverlayModal';\nModal.defaultProps = defaultProps;\nModal.propTypes = _extends({}, animationPropTypes, modalPropTypes, {\n  children: PropTypes.func,\n  container: PropTypes.any,\n  containerClassName: PropTypes.string,\n  dialogTransitionTimeout: PropTypes.number,\n  backdropTransitionTimeout: PropTypes.number,\n  transition: PropTypes.any,\n  onEscapeKeyUp: PropTypes.func,\n  onBackdropClick: PropTypes.func\n});\nexport default Modal;","map":{"version":3,"sources":["C:/Programowanie/store/node_modules/rsuite/es/Overlay/Modal.js"],"names":["_extends","_objectWithoutPropertiesLoose","React","useRef","useEffect","useState","useCallback","PropTypes","classNames","helper","ModalManager","Fade","animationPropTypes","mergeRefs","getDOMNode","usePortal","createChainedFunction","manager","getManager","defaultProps","as","backdrop","keyboard","autoFocus","enforceFocus","useModalManager","modalManager","modal","dialog","add","containerElement","containerClassName","current","remove","isTopModal","setDialogRef","ref","setBackdropRef","Modal","forwardRef","props","Component","children","Transition","transition","dialogTransitionTimeout","style","className","container","animationProps","backdropTransitionTimeout","backdropStyle","backdropClassName","open","onBackdropClick","onEscapeKeyUp","onExit","onExiting","onExited","onEnter","onEntering","onEntered","onClose","onOpen","rest","_useState","exited","setExited","_usePortal","Portal","mountModal","rootRef","lastFocus","handleDocumentKeyUp","event","keyCode","checkForFocus","canUseDOM","activeElement","restoreLastFocus","_lastFocus$current$fo","_lastFocus$current","focus","call","getDialogElement","handleEnforceFocus","currentActiveElement","contains","handleBackdropClick","target","currentTarget","documentKeyupListener","docusinListener","handleOpen","getContainer","document","body","on","handleClose","_documentKeyupListene","_docusinListener$curr","off","handleExited","renderBackdrop","backdropPorps","onClick","createElement","transitionAppear","in","timeout","fadeProps","dialogElement","unmountOnExit","role","tabIndex","modalPropTypes","elementType","string","object","bool","oneOfType","func","displayName","propTypes","any","number"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,oCAArB;AACA,OAAOC,6BAAP,MAA0C,yDAA1C;AACA,OAAOC,KAAP,IAAgBC,MAAhB,EAAwBC,SAAxB,EAAmCC,QAAnC,EAA6CC,WAA7C,QAAgE,OAAhE;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,SAASC,kBAAT,QAAmC,oBAAnC;AACA,SAASC,SAAT,EAAoBC,UAApB,EAAgCC,SAAhC,EAA2CC,qBAA3C,QAAwE,UAAxE;AACA,IAAIC,OAAJ;;AAEA,SAASC,UAAT,GAAsB;AACpB,MAAI,CAACD,OAAL,EAAcA,OAAO,GAAG,IAAIP,YAAJ,EAAV;AACd,SAAOO,OAAP;AACD;;AAED,IAAIE,YAAY,GAAG;AACjBC,EAAAA,EAAE,EAAE,KADa;AAEjBC,EAAAA,QAAQ,EAAE,IAFO;AAGjBC,EAAAA,QAAQ,EAAE,IAHO;AAIjBC,EAAAA,SAAS,EAAE,IAJM;AAKjBC,EAAAA,YAAY,EAAE;AALG,CAAnB;;AAQA,IAAIC,eAAe,GAAG,SAASA,eAAT,GAA2B;AAC/C,MAAIC,YAAY,GAAGR,UAAU,EAA7B;AACA,MAAIS,KAAK,GAAGxB,MAAM,CAAC;AACjByB,IAAAA,MAAM,EAAE,IADS;AAEjBP,IAAAA,QAAQ,EAAE;AAFO,GAAD,CAAlB;AAIA,SAAO;AACLQ,IAAAA,GAAG,EAAE,SAASA,GAAT,CAAaC,gBAAb,EAA+BC,kBAA/B,EAAmD;AACtD,aAAOL,YAAY,CAACG,GAAb,CAAiBF,KAAK,CAACK,OAAvB,EAAgCF,gBAAhC,EAAkDC,kBAAlD,CAAP;AACD,KAHI;AAILE,IAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACxB,aAAOP,YAAY,CAACO,MAAb,CAAoBN,KAAK,CAACK,OAA1B,CAAP;AACD,KANI;AAOLE,IAAAA,UAAU,EAAE,SAASA,UAAT,GAAsB;AAChC,aAAOR,YAAY,CAACQ,UAAb,CAAwBP,KAAK,CAACK,OAA9B,CAAP;AACD,KATI;AAULG,IAAAA,YAAY,EAAE7B,WAAW,CAAC,UAAU8B,GAAV,EAAe;AACvCT,MAAAA,KAAK,CAACK,OAAN,CAAcJ,MAAd,GAAuBQ,GAAvB;AACD,KAFwB,EAEtB,EAFsB,CAVpB;AAaLC,IAAAA,cAAc,EAAE/B,WAAW,CAAC,UAAU8B,GAAV,EAAe;AACzCT,MAAAA,KAAK,CAACK,OAAN,CAAcX,QAAd,GAAyBe,GAAzB;AACD,KAF0B,EAExB,EAFwB;AAbtB,GAAP;AAiBD,CAvBD;;AAyBA,IAAIE,KAAK,GAAG,aAAapC,KAAK,CAACqC,UAAN,CAAiB,UAAUC,KAAV,EAAiBJ,GAAjB,EAAsB;AAC9D,MAAIK,SAAS,GAAGD,KAAK,CAACpB,EAAtB;AAAA,MACIsB,QAAQ,GAAGF,KAAK,CAACE,QADrB;AAAA,MAEIC,UAAU,GAAGH,KAAK,CAACI,UAFvB;AAAA,MAGIC,uBAAuB,GAAGL,KAAK,CAACK,uBAHpC;AAAA,MAIIC,KAAK,GAAGN,KAAK,CAACM,KAJlB;AAAA,MAKIC,SAAS,GAAGP,KAAK,CAACO,SALtB;AAAA,MAMIC,SAAS,GAAGR,KAAK,CAACQ,SANtB;AAAA,MAOIC,cAAc,GAAGT,KAAK,CAACS,cAP3B;AAAA,MAQIlB,kBAAkB,GAAGS,KAAK,CAACT,kBAR/B;AAAA,MASIT,QAAQ,GAAGkB,KAAK,CAAClB,QATrB;AAAA,MAUIE,YAAY,GAAGgB,KAAK,CAAChB,YAVzB;AAAA,MAWIH,QAAQ,GAAGmB,KAAK,CAACnB,QAXrB;AAAA,MAYI6B,yBAAyB,GAAGV,KAAK,CAACU,yBAZtC;AAAA,MAaIC,aAAa,GAAGX,KAAK,CAACW,aAb1B;AAAA,MAcIC,iBAAiB,GAAGZ,KAAK,CAACY,iBAd9B;AAAA,MAeIC,IAAI,GAAGb,KAAK,CAACa,IAfjB;AAAA,MAgBI9B,SAAS,GAAGiB,KAAK,CAACjB,SAhBtB;AAAA,MAiBI+B,eAAe,GAAGd,KAAK,CAACc,eAjB5B;AAAA,MAkBIC,aAAa,GAAGf,KAAK,CAACe,aAlB1B;AAAA,MAmBIC,MAAM,GAAGhB,KAAK,CAACgB,MAnBnB;AAAA,MAoBIC,SAAS,GAAGjB,KAAK,CAACiB,SApBtB;AAAA,MAqBIC,QAAQ,GAAGlB,KAAK,CAACkB,QArBrB;AAAA,MAsBIC,OAAO,GAAGnB,KAAK,CAACmB,OAtBpB;AAAA,MAuBIC,UAAU,GAAGpB,KAAK,CAACoB,UAvBvB;AAAA,MAwBIC,SAAS,GAAGrB,KAAK,CAACqB,SAxBtB;AAAA,MAyBIC,OAAO,GAAGtB,KAAK,CAACsB,OAzBpB;AAAA,MA0BIC,MAAM,GAAGvB,KAAK,CAACuB,MA1BnB;AAAA,MA2BIC,IAAI,GAAG/D,6BAA6B,CAACuC,KAAD,EAAQ,CAAC,IAAD,EAAO,UAAP,EAAmB,YAAnB,EAAiC,yBAAjC,EAA4D,OAA5D,EAAqE,WAArE,EAAkF,WAAlF,EAA+F,gBAA/F,EAAiH,oBAAjH,EAAuI,UAAvI,EAAmJ,cAAnJ,EAAmK,UAAnK,EAA+K,2BAA/K,EAA4M,eAA5M,EAA6N,mBAA7N,EAAkP,MAAlP,EAA0P,WAA1P,EAAuQ,iBAAvQ,EAA0R,eAA1R,EAA2S,QAA3S,EAAqT,WAArT,EAAkU,UAAlU,EAA8U,SAA9U,EAAyV,YAAzV,EAAuW,WAAvW,EAAoX,SAApX,EAA+X,QAA/X,CAAR,CA3BxC;;AA6BA,MAAIyB,SAAS,GAAG5D,QAAQ,CAAC,CAACgD,IAAF,CAAxB;AAAA,MACIa,MAAM,GAAGD,SAAS,CAAC,CAAD,CADtB;AAAA,MAEIE,SAAS,GAAGF,SAAS,CAAC,CAAD,CAFzB;;AAIA,MAAIG,UAAU,GAAGrD,SAAS,CAAC;AACzBiC,IAAAA,SAAS,EAAEA;AADc,GAAD,CAA1B;AAAA,MAGIqB,MAAM,GAAGD,UAAU,CAACC,MAHxB;;AAKA,MAAI1C,KAAK,GAAGF,eAAe,EAA3B;;AAEA,MAAI4B,IAAJ,EAAU;AACR,QAAIa,MAAJ,EAAYC,SAAS,CAAC,KAAD,CAAT;AACb,GAFD,MAEO,IAAI,CAACxB,UAAD,IAAe,CAACuB,MAApB,EAA4B;AACjCC,IAAAA,SAAS,CAAC,IAAD,CAAT;AACD;;AAED,MAAIG,UAAU,GAAGjB,IAAI,IAAIV,UAAU,IAAI,CAACuB,MAAxC;AACA,MAAIK,OAAO,GAAGpE,MAAM,EAApB;AACA,MAAIqE,SAAS,GAAGrE,MAAM,EAAtB;AACA,MAAIsE,mBAAmB,GAAGnE,WAAW,CAAC,UAAUoE,KAAV,EAAiB;AACrD,QAAIpD,QAAQ,IAAIoD,KAAK,CAACC,OAAN,KAAkB,EAA9B,IAAoChD,KAAK,CAACO,UAAN,EAAxC,EAA4D;AAC1DqB,MAAAA,aAAa,KAAK,IAAlB,IAA0BA,aAAa,KAAK,KAAK,CAAjD,GAAqD,KAAK,CAA1D,GAA8DA,aAAa,CAACmB,KAAD,CAA3E;AACAZ,MAAAA,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,CAACY,KAAD,CAAzD;AACD;AACF,GALoC,EAKlC,CAACpD,QAAD,EAAWK,KAAX,EAAkB4B,aAAlB,EAAiCO,OAAjC,CALkC,CAArC;AAMA,MAAIc,aAAa,GAAGtE,WAAW,CAAC,YAAY;AAC1C,QAAIG,MAAM,CAACoE,SAAX,EAAsB;AACpBL,MAAAA,SAAS,CAACxC,OAAV,GAAoBvB,MAAM,CAACqE,aAAP,EAApB;AACD;AACF,GAJ8B,EAI5B,EAJ4B,CAA/B;AAKA,MAAIC,gBAAgB,GAAGzE,WAAW,CAAC,YAAY;AAC7C,QAAIkE,SAAS,CAACxC,OAAd,EAAuB;AACrB,UAAIgD,qBAAJ,EAA2BC,kBAA3B;;AAEA,OAACD,qBAAqB,GAAG,CAACC,kBAAkB,GAAGT,SAAS,CAACxC,OAAhC,EAAyCkD,KAAlE,MAA6E,IAA7E,IAAqFF,qBAAqB,KAAK,KAAK,CAApH,GAAwH,KAAK,CAA7H,GAAiIA,qBAAqB,CAACG,IAAtB,CAA2BF,kBAA3B,CAAjI;AACAT,MAAAA,SAAS,CAACxC,OAAV,GAAoB,IAApB;AACD;AACF,GAPiC,EAO/B,EAP+B,CAAlC;AAQA,MAAIoD,gBAAgB,GAAG9E,WAAW,CAAC,YAAY;AAC7C,WAAOQ,UAAU,CAACyD,OAAO,CAACvC,OAAT,CAAjB;AACD,GAFiC,EAE/B,EAF+B,CAAlC;AAGA,MAAIqD,kBAAkB,GAAG/E,WAAW,CAAC,YAAY;AAC/C,QAAI,CAACkB,YAAD,IAAiB,CAACG,KAAK,CAACO,UAAN,EAAtB,EAA0C;AACxC;AACD;;AAED,QAAIoD,oBAAoB,GAAG7E,MAAM,CAACqE,aAAP,EAA3B;AACA,QAAIlD,MAAM,GAAGwD,gBAAgB,EAA7B;;AAEA,QAAIxD,MAAM,IAAIA,MAAM,KAAK0D,oBAArB,IAA6C,CAAC7E,MAAM,CAAC8E,QAAP,CAAgB3D,MAAhB,EAAwB0D,oBAAxB,CAAlD,EAAiG;AAC/F1D,MAAAA,MAAM,CAACsD,KAAP;AACD;AACF,GAXmC,EAWjC,CAAC1D,YAAD,EAAe4D,gBAAf,EAAiCzD,KAAjC,CAXiC,CAApC;AAYA,MAAI6D,mBAAmB,GAAGlF,WAAW,CAAC,UAAUoE,KAAV,EAAiB;AACrD,QAAIA,KAAK,CAACe,MAAN,KAAiBf,KAAK,CAACgB,aAA3B,EAA0C;AACxC;AACD;;AAEDpC,IAAAA,eAAe,KAAK,IAApB,IAA4BA,eAAe,KAAK,KAAK,CAArD,GAAyD,KAAK,CAA9D,GAAkEA,eAAe,CAACoB,KAAD,CAAjF;;AAEA,QAAIrD,QAAQ,KAAK,IAAjB,EAAuB;AACrByC,MAAAA,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,CAACY,KAAD,CAAzD;AACD;AACF,GAVoC,EAUlC,CAACrD,QAAD,EAAWiC,eAAX,EAA4BQ,OAA5B,CAVkC,CAArC;AAWA,MAAI6B,qBAAqB,GAAGxF,MAAM,EAAlC;AACA,MAAIyF,eAAe,GAAGzF,MAAM,EAA5B;AACA,MAAI0F,UAAU,GAAGvF,WAAW,CAAC,YAAY;AACvC,QAAIsB,MAAM,GAAGwD,gBAAgB,EAA7B;AACA,QAAItD,gBAAgB,GAAGrB,MAAM,CAACqF,YAAP,CAAoB9C,SAApB,EAA+B+C,QAAQ,CAACC,IAAxC,CAAvB;AACArE,IAAAA,KAAK,CAACE,GAAN,CAAUC,gBAAV,EAA4BC,kBAA5B;AACA4D,IAAAA,qBAAqB,CAAC3D,OAAtB,GAAgCvB,MAAM,CAACwF,EAAP,CAAUF,QAAV,EAAoB,SAApB,EAA+BtB,mBAA/B,CAAhC;AACAmB,IAAAA,eAAe,CAAC5D,OAAhB,GAA0BvB,MAAM,CAACwF,EAAP,CAAUF,QAAV,EAAoB,OAApB,EAA6BV,kBAA7B,EAAiD,IAAjD,CAA1B;AACAtB,IAAAA,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuC,KAAK,CAA5C,GAAgDA,MAAM,EAAtD;AACAa,IAAAA,aAAa;;AAEb,QAAIrD,SAAJ,EAAe;AACbK,MAAAA,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuC,KAAK,CAA5C,GAAgDA,MAAM,CAACsD,KAAP,EAAhD;AACD;AACF,GAZ2B,EAYzB,CAAC3D,SAAD,EAAYqD,aAAZ,EAA2B5B,SAA3B,EAAsCjB,kBAAtC,EAA0DqD,gBAA1D,EAA4EX,mBAA5E,EAAiGY,kBAAjG,EAAqH1D,KAArH,EAA4HoC,MAA5H,CAZyB,CAA5B;AAaA,MAAImC,WAAW,GAAG5F,WAAW,CAAC,YAAY;AACxC,QAAI6F,qBAAJ,EAA2BC,qBAA3B;;AAEAzE,IAAAA,KAAK,CAACM,MAAN;AACA,KAACkE,qBAAqB,GAAGR,qBAAqB,CAAC3D,OAA/C,MAA4D,IAA5D,IAAoEmE,qBAAqB,KAAK,KAAK,CAAnG,GAAuG,KAAK,CAA5G,GAAgHA,qBAAqB,CAACE,GAAtB,EAAhH;AACA,KAACD,qBAAqB,GAAGR,eAAe,CAAC5D,OAAzC,MAAsD,IAAtD,IAA8DoE,qBAAqB,KAAK,KAAK,CAA7F,GAAiG,KAAK,CAAtG,GAA0GA,qBAAqB,CAACC,GAAtB,EAA1G;AACAtB,IAAAA,gBAAgB;AACjB,GAP4B,EAO1B,CAACpD,KAAD,EAAQoD,gBAAR,CAP0B,CAA7B;AAQA3E,EAAAA,SAAS,CAAC,YAAY;AACpB,QAAI,CAACiD,IAAL,EAAW;AACT;AACD;;AAEDwC,IAAAA,UAAU;AACX,GANQ,EAMN,CAACxC,IAAD,EAAOwC,UAAP,CANM,CAAT;AAOAzF,EAAAA,SAAS,CAAC,YAAY;AACpB,QAAI,CAAC8D,MAAL,EAAa;AACX;AACD;;AAEDgC,IAAAA,WAAW;AACZ,GANQ,EAMN,CAAChC,MAAD,EAASgC,WAAT,CANM,CAAT,CA7H8D,CAmInC;;AAE3B9F,EAAAA,SAAS,CAAC,YAAY;AACpB,WAAO,YAAY;AACjB8F,MAAAA,WAAW;AACZ,KAFD;AAGD,GAJQ,EAIN,EAJM,CAAT;AAKA,MAAII,YAAY,GAAGhG,WAAW,CAAC,YAAY;AACzC6D,IAAAA,SAAS,CAAC,IAAD,CAAT;AACD,GAF6B,EAE3B,EAF2B,CAA9B;;AAIA,MAAI,CAACG,UAAL,EAAiB;AACf,WAAO,IAAP;AACD;;AAED,MAAIiC,cAAc,GAAG,SAASA,cAAT,GAA0B;AAC7C,QAAIC,aAAa,GAAG;AAClB1D,MAAAA,KAAK,EAAEK,aADW;AAElBsD,MAAAA,OAAO,EAAEjB;AAFS,KAApB;;AAKA,QAAI7C,UAAJ,EAAgB;AACd,aAAO,aAAazC,KAAK,CAACwG,aAAN,CAAoB/F,IAApB,EAA0B;AAC5CgG,QAAAA,gBAAgB,EAAE,IAD0B;AAE5CC,QAAAA,EAAE,EAAEvD,IAFwC;AAG5CwD,QAAAA,OAAO,EAAE3D;AAHmC,OAA1B,EAIjB,UAAU4D,SAAV,EAAqB1E,GAArB,EAA0B;AAC3B,YAAIW,SAAS,GAAG+D,SAAS,CAAC/D,SAA1B;AAAA,YACIiB,IAAI,GAAG/D,6BAA6B,CAAC6G,SAAD,EAAY,CAAC,WAAD,CAAZ,CADxC;;AAGA,eAAO,aAAa5G,KAAK,CAACwG,aAAN,CAAoB,KAApB,EAA2B1G,QAAQ,CAAC;AACtD,yBAAe;AADuC,SAAD,EAEpDgE,IAFoD,EAE9CwC,aAF8C,EAE/B;AACtBpE,UAAAA,GAAG,EAAEvB,SAAS,CAACc,KAAK,CAACU,cAAP,EAAuBD,GAAvB,CADQ;AAEtBW,UAAAA,SAAS,EAAEvC,UAAU,CAAC4C,iBAAD,EAAoBL,SAApB;AAFC,SAF+B,CAAnC,CAApB;AAMD,OAdmB,CAApB;AAeD;;AAED,WAAO,aAAa7C,KAAK,CAACwG,aAAN,CAAoB,KAApB,EAA2B1G,QAAQ,CAAC;AACtD,qBAAe;AADuC,KAAD,EAEpDwG,aAFoD,EAErC;AAChBzD,MAAAA,SAAS,EAAEK;AADK,KAFqC,CAAnC,CAApB;AAKD,GA7BD;;AA+BA,MAAI2D,aAAa,GAAGpE,UAAU,GAAG,aAAazC,KAAK,CAACwG,aAAN,CAAoB/D,UAApB,EAAgC3C,QAAQ,CAAC,EAAD,EAAKiD,cAAL,EAAqB;AACzG0D,IAAAA,gBAAgB,EAAE,IADuF;AAEzGK,IAAAA,aAAa,EAAE,IAF0F;AAGzGJ,IAAAA,EAAE,EAAEvD,IAHqG;AAIzGwD,IAAAA,OAAO,EAAEhE,uBAJgG;AAKzGW,IAAAA,MAAM,EAAEA,MALiG;AAMzGC,IAAAA,SAAS,EAAEA,SAN8F;AAOzGC,IAAAA,QAAQ,EAAE1C,qBAAqB,CAACsF,YAAD,EAAe5C,QAAf,CAP0E;AAQzGC,IAAAA,OAAO,EAAEA,OARgG;AASzGC,IAAAA,UAAU,EAAEA,UAT6F;AAUzGC,IAAAA,SAAS,EAAEA;AAV8F,GAArB,CAAxC,EAW1CnB,QAX0C,CAAhB,GAWdA,QAXhB;AAYA,SAAO,aAAaxC,KAAK,CAACwG,aAAN,CAAoBrC,MAApB,EAA4B,IAA5B,EAAkC,aAAanE,KAAK,CAACwG,aAAN,CAAoBjE,SAApB,EAA+BzC,QAAQ,CAAC;AACzGiH,IAAAA,IAAI,EAAE,QADmG;AAEzG,kBAAc;AAF2F,GAAD,EAGvGjD,IAHuG,EAGjG;AACP5B,IAAAA,GAAG,EAAEvB,SAAS,CAACc,KAAK,CAACQ,YAAP,EAAqBC,GAArB,CADP;AAEPU,IAAAA,KAAK,EAAEA,KAFA;AAGPC,IAAAA,SAAS,EAAEA,SAHJ;AAIPmE,IAAAA,QAAQ,EAAE,CAAC;AAJJ,GAHiG,CAAvC,EAQ/D7F,QAAQ,IAAIkF,cAAc,EARqC,EAQjCQ,aARiC,CAA/C,CAApB;AASD,CAtMwB,CAAzB;AAuMA,OAAO,IAAII,cAAc,GAAG;AAC1B/F,EAAAA,EAAE,EAAEb,SAAS,CAAC6G,WADY;AAE1BrE,EAAAA,SAAS,EAAExC,SAAS,CAAC8G,MAFK;AAG1BjE,EAAAA,iBAAiB,EAAE7C,SAAS,CAAC8G,MAHH;AAI1BvE,EAAAA,KAAK,EAAEvC,SAAS,CAAC+G,MAJS;AAK1BnE,EAAAA,aAAa,EAAE5C,SAAS,CAAC+G,MALC;AAM1BjE,EAAAA,IAAI,EAAE9C,SAAS,CAACgH,IANU;AAO1BlG,EAAAA,QAAQ,EAAEd,SAAS,CAACiH,SAAV,CAAoB,CAACjH,SAAS,CAACgH,IAAX,EAAiBhH,SAAS,CAAC8G,MAA3B,CAApB,CAPgB;AAQ1B/F,EAAAA,QAAQ,EAAEf,SAAS,CAACgH,IARM;AAS1BhG,EAAAA,SAAS,EAAEhB,SAAS,CAACgH,IATK;AAU1B/F,EAAAA,YAAY,EAAEjB,SAAS,CAACgH,IAVE;AAW1BtE,EAAAA,cAAc,EAAE1C,SAAS,CAAC+G,MAXA;AAY1BvD,EAAAA,MAAM,EAAExD,SAAS,CAACkH,IAZQ;AAa1B3D,EAAAA,OAAO,EAAEvD,SAAS,CAACkH;AAbO,CAArB;AAePnF,KAAK,CAACoF,WAAN,GAAoB,cAApB;AACApF,KAAK,CAACnB,YAAN,GAAqBA,YAArB;AACAmB,KAAK,CAACqF,SAAN,GAAkB3H,QAAQ,CAAC,EAAD,EAAKY,kBAAL,EAAyBuG,cAAzB,EAAyC;AACjEzE,EAAAA,QAAQ,EAAEnC,SAAS,CAACkH,IAD6C;AAEjEzE,EAAAA,SAAS,EAAEzC,SAAS,CAACqH,GAF4C;AAGjE7F,EAAAA,kBAAkB,EAAExB,SAAS,CAAC8G,MAHmC;AAIjExE,EAAAA,uBAAuB,EAAEtC,SAAS,CAACsH,MAJ8B;AAKjE3E,EAAAA,yBAAyB,EAAE3C,SAAS,CAACsH,MAL4B;AAMjEjF,EAAAA,UAAU,EAAErC,SAAS,CAACqH,GAN2C;AAOjErE,EAAAA,aAAa,EAAEhD,SAAS,CAACkH,IAPwC;AAQjEnE,EAAAA,eAAe,EAAE/C,SAAS,CAACkH;AARsC,CAAzC,CAA1B;AAUA,eAAenF,KAAf","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useRef, useEffect, useState, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport helper from '../DOMHelper';\nimport ModalManager from './ModalManager';\nimport Fade from '../Animation/Fade';\nimport { animationPropTypes } from '../Animation/utils';\nimport { mergeRefs, getDOMNode, usePortal, createChainedFunction } from '../utils';\nvar manager;\n\nfunction getManager() {\n  if (!manager) manager = new ModalManager();\n  return manager;\n}\n\nvar defaultProps = {\n  as: 'div',\n  backdrop: true,\n  keyboard: true,\n  autoFocus: true,\n  enforceFocus: true\n};\n\nvar useModalManager = function useModalManager() {\n  var modalManager = getManager();\n  var modal = useRef({\n    dialog: null,\n    backdrop: null\n  });\n  return {\n    add: function add(containerElement, containerClassName) {\n      return modalManager.add(modal.current, containerElement, containerClassName);\n    },\n    remove: function remove() {\n      return modalManager.remove(modal.current);\n    },\n    isTopModal: function isTopModal() {\n      return modalManager.isTopModal(modal.current);\n    },\n    setDialogRef: useCallback(function (ref) {\n      modal.current.dialog = ref;\n    }, []),\n    setBackdropRef: useCallback(function (ref) {\n      modal.current.backdrop = ref;\n    }, [])\n  };\n};\n\nvar Modal = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var Component = props.as,\n      children = props.children,\n      Transition = props.transition,\n      dialogTransitionTimeout = props.dialogTransitionTimeout,\n      style = props.style,\n      className = props.className,\n      container = props.container,\n      animationProps = props.animationProps,\n      containerClassName = props.containerClassName,\n      keyboard = props.keyboard,\n      enforceFocus = props.enforceFocus,\n      backdrop = props.backdrop,\n      backdropTransitionTimeout = props.backdropTransitionTimeout,\n      backdropStyle = props.backdropStyle,\n      backdropClassName = props.backdropClassName,\n      open = props.open,\n      autoFocus = props.autoFocus,\n      onBackdropClick = props.onBackdropClick,\n      onEscapeKeyUp = props.onEscapeKeyUp,\n      onExit = props.onExit,\n      onExiting = props.onExiting,\n      onExited = props.onExited,\n      onEnter = props.onEnter,\n      onEntering = props.onEntering,\n      onEntered = props.onEntered,\n      onClose = props.onClose,\n      onOpen = props.onOpen,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"children\", \"transition\", \"dialogTransitionTimeout\", \"style\", \"className\", \"container\", \"animationProps\", \"containerClassName\", \"keyboard\", \"enforceFocus\", \"backdrop\", \"backdropTransitionTimeout\", \"backdropStyle\", \"backdropClassName\", \"open\", \"autoFocus\", \"onBackdropClick\", \"onEscapeKeyUp\", \"onExit\", \"onExiting\", \"onExited\", \"onEnter\", \"onEntering\", \"onEntered\", \"onClose\", \"onOpen\"]);\n\n  var _useState = useState(!open),\n      exited = _useState[0],\n      setExited = _useState[1];\n\n  var _usePortal = usePortal({\n    container: container\n  }),\n      Portal = _usePortal.Portal;\n\n  var modal = useModalManager();\n\n  if (open) {\n    if (exited) setExited(false);\n  } else if (!Transition && !exited) {\n    setExited(true);\n  }\n\n  var mountModal = open || Transition && !exited;\n  var rootRef = useRef();\n  var lastFocus = useRef();\n  var handleDocumentKeyUp = useCallback(function (event) {\n    if (keyboard && event.keyCode === 27 && modal.isTopModal()) {\n      onEscapeKeyUp === null || onEscapeKeyUp === void 0 ? void 0 : onEscapeKeyUp(event);\n      onClose === null || onClose === void 0 ? void 0 : onClose(event);\n    }\n  }, [keyboard, modal, onEscapeKeyUp, onClose]);\n  var checkForFocus = useCallback(function () {\n    if (helper.canUseDOM) {\n      lastFocus.current = helper.activeElement();\n    }\n  }, []);\n  var restoreLastFocus = useCallback(function () {\n    if (lastFocus.current) {\n      var _lastFocus$current$fo, _lastFocus$current;\n\n      (_lastFocus$current$fo = (_lastFocus$current = lastFocus.current).focus) === null || _lastFocus$current$fo === void 0 ? void 0 : _lastFocus$current$fo.call(_lastFocus$current);\n      lastFocus.current = null;\n    }\n  }, []);\n  var getDialogElement = useCallback(function () {\n    return getDOMNode(rootRef.current);\n  }, []);\n  var handleEnforceFocus = useCallback(function () {\n    if (!enforceFocus || !modal.isTopModal()) {\n      return;\n    }\n\n    var currentActiveElement = helper.activeElement();\n    var dialog = getDialogElement();\n\n    if (dialog && dialog !== currentActiveElement && !helper.contains(dialog, currentActiveElement)) {\n      dialog.focus();\n    }\n  }, [enforceFocus, getDialogElement, modal]);\n  var handleBackdropClick = useCallback(function (event) {\n    if (event.target !== event.currentTarget) {\n      return;\n    }\n\n    onBackdropClick === null || onBackdropClick === void 0 ? void 0 : onBackdropClick(event);\n\n    if (backdrop === true) {\n      onClose === null || onClose === void 0 ? void 0 : onClose(event);\n    }\n  }, [backdrop, onBackdropClick, onClose]);\n  var documentKeyupListener = useRef();\n  var docusinListener = useRef();\n  var handleOpen = useCallback(function () {\n    var dialog = getDialogElement();\n    var containerElement = helper.getContainer(container, document.body);\n    modal.add(containerElement, containerClassName);\n    documentKeyupListener.current = helper.on(document, 'keydown', handleDocumentKeyUp);\n    docusinListener.current = helper.on(document, 'focus', handleEnforceFocus, true);\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    checkForFocus();\n\n    if (autoFocus) {\n      dialog === null || dialog === void 0 ? void 0 : dialog.focus();\n    }\n  }, [autoFocus, checkForFocus, container, containerClassName, getDialogElement, handleDocumentKeyUp, handleEnforceFocus, modal, onOpen]);\n  var handleClose = useCallback(function () {\n    var _documentKeyupListene, _docusinListener$curr;\n\n    modal.remove();\n    (_documentKeyupListene = documentKeyupListener.current) === null || _documentKeyupListene === void 0 ? void 0 : _documentKeyupListene.off();\n    (_docusinListener$curr = docusinListener.current) === null || _docusinListener$curr === void 0 ? void 0 : _docusinListener$curr.off();\n    restoreLastFocus();\n  }, [modal, restoreLastFocus]);\n  useEffect(function () {\n    if (!open) {\n      return;\n    }\n\n    handleOpen();\n  }, [open, handleOpen]);\n  useEffect(function () {\n    if (!exited) {\n      return;\n    }\n\n    handleClose();\n  }, [exited, handleClose]); // will unmount\n\n  useEffect(function () {\n    return function () {\n      handleClose();\n    };\n  }, []);\n  var handleExited = useCallback(function () {\n    setExited(true);\n  }, []);\n\n  if (!mountModal) {\n    return null;\n  }\n\n  var renderBackdrop = function renderBackdrop() {\n    var backdropPorps = {\n      style: backdropStyle,\n      onClick: handleBackdropClick\n    };\n\n    if (Transition) {\n      return /*#__PURE__*/React.createElement(Fade, {\n        transitionAppear: true,\n        in: open,\n        timeout: backdropTransitionTimeout\n      }, function (fadeProps, ref) {\n        var className = fadeProps.className,\n            rest = _objectWithoutPropertiesLoose(fadeProps, [\"className\"]);\n\n        return /*#__PURE__*/React.createElement(\"div\", _extends({\n          \"aria-hidden\": true\n        }, rest, backdropPorps, {\n          ref: mergeRefs(modal.setBackdropRef, ref),\n          className: classNames(backdropClassName, className)\n        }));\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", _extends({\n      \"aria-hidden\": true\n    }, backdropPorps, {\n      className: backdropClassName\n    }));\n  };\n\n  var dialogElement = Transition ? /*#__PURE__*/React.createElement(Transition, _extends({}, animationProps, {\n    transitionAppear: true,\n    unmountOnExit: true,\n    in: open,\n    timeout: dialogTransitionTimeout,\n    onExit: onExit,\n    onExiting: onExiting,\n    onExited: createChainedFunction(handleExited, onExited),\n    onEnter: onEnter,\n    onEntering: onEntering,\n    onEntered: onEntered\n  }), children) : children;\n  return /*#__PURE__*/React.createElement(Portal, null, /*#__PURE__*/React.createElement(Component, _extends({\n    role: \"dialog\",\n    \"aria-modal\": true\n  }, rest, {\n    ref: mergeRefs(modal.setDialogRef, ref),\n    style: style,\n    className: className,\n    tabIndex: -1\n  }), backdrop && renderBackdrop(), dialogElement));\n});\nexport var modalPropTypes = {\n  as: PropTypes.elementType,\n  className: PropTypes.string,\n  backdropClassName: PropTypes.string,\n  style: PropTypes.object,\n  backdropStyle: PropTypes.object,\n  open: PropTypes.bool,\n  backdrop: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  keyboard: PropTypes.bool,\n  autoFocus: PropTypes.bool,\n  enforceFocus: PropTypes.bool,\n  animationProps: PropTypes.object,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func\n};\nModal.displayName = 'OverlayModal';\nModal.defaultProps = defaultProps;\nModal.propTypes = _extends({}, animationPropTypes, modalPropTypes, {\n  children: PropTypes.func,\n  container: PropTypes.any,\n  containerClassName: PropTypes.string,\n  dialogTransitionTimeout: PropTypes.number,\n  backdropTransitionTimeout: PropTypes.number,\n  transition: PropTypes.any,\n  onEscapeKeyUp: PropTypes.func,\n  onBackdropClick: PropTypes.func\n});\nexport default Modal;"]},"metadata":{},"sourceType":"module"}