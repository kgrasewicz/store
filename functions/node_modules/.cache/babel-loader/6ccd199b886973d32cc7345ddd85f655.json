{"ast":null,"code":"import _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/esm/taggedTemplateLiteralLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteralLoose([\"tag-wrapper\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteralLoose([\"focused\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteralLoose([\"tag\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"none\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport isUndefined from 'lodash/isUndefined';\nimport isNil from 'lodash/isNil';\nimport isFunction from 'lodash/isFunction';\nimport remove from 'lodash/remove';\nimport clone from 'lodash/clone';\nimport isArray from 'lodash/isArray';\nimport omit from 'lodash/omit';\nimport pick from 'lodash/pick';\nimport { getWidth } from 'dom-lib';\nimport shallowEqual from '../utils/shallowEqual';\nimport { filterNodesOfTree } from '../utils/treeUtils';\nimport Plaintext from '../Plaintext';\nimport { createChainedFunction, tplTransform, getDataGroupBy, useClassNames, useCustom, useControlled, mergeRefs } from '../utils';\nimport { DropdownMenu, DropdownMenuItem, DropdownMenuCheckItem, PickerToggle, PickerOverlay, PickerToggleTrigger, useFocusItemValue, usePickerClassName, useSearch, usePublicMethods, useToggleKeyDownEvent, pickTriggerPropKeys, omitTriggerPropKeys, listPickerPropTypes } from '../Picker';\nimport Tag from '../Tag';\nimport InputAutosize from './InputAutosize';\nimport InputSearch from './InputSearch';\nvar defaultProps = {\n  as: 'div',\n  appearance: 'default',\n  cleanable: true,\n  cacheData: [],\n  classPrefix: 'picker',\n  data: [],\n  disabledItemValues: [],\n  valueKey: 'value',\n  labelKey: 'label',\n  placement: 'bottomStart',\n  searchable: true,\n  menuAutoWidth: true,\n  menuMaxHeight: 320,\n  tagProps: {}\n};\nvar InputPicker = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _merge;\n\n  var Component = props.as,\n      cleanable = props.cleanable,\n      cacheData = props.cacheData,\n      classPrefix = props.classPrefix,\n      controlledData = props.data,\n      disabled = props.disabled,\n      readOnly = props.readOnly,\n      plaintext = props.plaintext,\n      defaultValue = props.defaultValue,\n      defaultOpen = props.defaultOpen,\n      disabledItemValues = props.disabledItemValues,\n      overrideLocale = props.locale,\n      toggleAs = props.toggleAs,\n      style = props.style,\n      searchable = props.searchable,\n      multi = props.multi,\n      controlledOpen = props.open,\n      placeholder = props.placeholder,\n      tagProps = props.tagProps,\n      groupBy = props.groupBy,\n      menuClassName = props.menuClassName,\n      menuStyle = props.menuStyle,\n      menuAutoWidth = props.menuAutoWidth,\n      menuMaxHeight = props.menuMaxHeight,\n      creatable = props.creatable,\n      valueProp = props.value,\n      valueKey = props.valueKey,\n      virtualized = props.virtualized,\n      labelKey = props.labelKey,\n      listProps = props.listProps,\n      id = props.id,\n      tabIndex = props.tabIndex,\n      sort = props.sort,\n      renderMenu = props.renderMenu,\n      renderExtraFooter = props.renderExtraFooter,\n      renderValue = props.renderValue,\n      renderMenuItem = props.renderMenuItem,\n      renderMenuGroup = props.renderMenuGroup,\n      onEnter = props.onEnter,\n      onEntered = props.onEntered,\n      onExit = props.onExit,\n      onExited = props.onExited,\n      onChange = props.onChange,\n      onClean = props.onClean,\n      onSearch = props.onSearch,\n      onSelect = props.onSelect,\n      onOpen = props.onOpen,\n      onClose = props.onClose,\n      onBlur = props.onBlur,\n      onFocus = props.onFocus,\n      searchBy = props.searchBy,\n      placement = props.placement,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"cleanable\", \"cacheData\", \"classPrefix\", \"data\", \"disabled\", \"readOnly\", \"plaintext\", \"defaultValue\", \"defaultOpen\", \"disabledItemValues\", \"locale\", \"toggleAs\", \"style\", \"searchable\", \"multi\", \"open\", \"placeholder\", \"tagProps\", \"groupBy\", \"menuClassName\", \"menuStyle\", \"menuAutoWidth\", \"menuMaxHeight\", \"creatable\", \"value\", \"valueKey\", \"virtualized\", \"labelKey\", \"listProps\", \"id\", \"tabIndex\", \"sort\", \"renderMenu\", \"renderExtraFooter\", \"renderValue\", \"renderMenuItem\", \"renderMenuGroup\", \"onEnter\", \"onEntered\", \"onExit\", \"onExited\", \"onChange\", \"onClean\", \"onSearch\", \"onSelect\", \"onOpen\", \"onClose\", \"onBlur\", \"onFocus\", \"searchBy\", \"placement\"]);\n\n  if (groupBy === valueKey || groupBy === labelKey) {\n    throw Error('`groupBy` can not be equal to `valueKey` and `labelKey`');\n  }\n\n  var overlayRef = useRef();\n  var targetRef = useRef();\n  var triggerRef = useRef();\n  var inputRef = useRef();\n\n  var _useCustom = useCustom(['Picker', 'InputPicker'], overrideLocale),\n      locale = _useCustom.locale;\n\n  var _useClassNames = useClassNames(classPrefix),\n      prefix = _useClassNames.prefix,\n      merge = _useClassNames.merge;\n\n  var _useState = useState(controlledData),\n      uncontrolledData = _useState[0],\n      setData = _useState[1];\n\n  var _useState2 = useState(100),\n      maxWidth = _useState2[0],\n      setMaxWidth = _useState2[1];\n\n  var _useState3 = useState([]),\n      newData = _useState3[0],\n      setNewData = _useState3[1];\n\n  var _useState4 = useState(defaultOpen),\n      uncontrolledOpen = _useState4[0],\n      setOpen = _useState4[1];\n\n  var open = isUndefined(controlledOpen) ? uncontrolledOpen : controlledOpen;\n  var getAllData = useCallback(function () {\n    return [].concat(uncontrolledData, newData);\n  }, [uncontrolledData, newData]);\n  var getAllDataAndCache = useCallback(function () {\n    return [].concat(getAllData(), cacheData);\n  }, [getAllData, cacheData]);\n\n  var _useControlled = useControlled(valueProp, multi ? defaultValue || [] : defaultValue),\n      value = _useControlled[0],\n      setValue = _useControlled[1],\n      isControlled = _useControlled[2];\n\n  var cloneValue = useCallback(function () {\n    return multi ? clone(value) || [] : value;\n  }, [multi, value]);\n  var handleClose = useCallback(function () {\n    var _triggerRef$current;\n\n    triggerRef === null || triggerRef === void 0 ? void 0 : (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : _triggerRef$current.close();\n  }, [triggerRef]); // Used to hover the focuse item  when trigger `onKeydown`\n\n  var _useFocusItemValue = useFocusItemValue(multi ? value === null || value === void 0 ? void 0 : value[0] : value, {\n    data: getAllDataAndCache(),\n    valueKey: valueKey,\n    target: function target() {\n      return overlayRef.current;\n    }\n  }),\n      focusItemValue = _useFocusItemValue.focusItemValue,\n      setFocusItemValue = _useFocusItemValue.setFocusItemValue,\n      onKeyDown = _useFocusItemValue.onKeyDown;\n\n  var handleSearchCallback = useCallback(function (searchKeyword, filteredData, event) {\n    var _filteredData$; // The first option after filtering is the focus.\n\n\n    setFocusItemValue((filteredData === null || filteredData === void 0 ? void 0 : (_filteredData$ = filteredData[0]) === null || _filteredData$ === void 0 ? void 0 : _filteredData$[valueKey]) || searchKeyword);\n    onSearch === null || onSearch === void 0 ? void 0 : onSearch(searchKeyword, event);\n  }, [setFocusItemValue, onSearch, valueKey]); // Use search keywords to filter options.\n\n  var _useSearch = useSearch({\n    labelKey: labelKey,\n    data: getAllData(),\n    searchBy: searchBy,\n    callback: handleSearchCallback\n  }),\n      searchKeyword = _useSearch.searchKeyword,\n      setSearchKeyword = _useSearch.setSearchKeyword,\n      checkShouldDisplay = _useSearch.checkShouldDisplay,\n      handleSearch = _useSearch.handleSearch; // Update the state when the data in props changes\n\n\n  useEffect(function () {\n    if (controlledData && !shallowEqual(controlledData, uncontrolledData)) {\n      var _controlledData$;\n\n      setData(controlledData);\n      setNewData([]);\n      setFocusItemValue(controlledData === null || controlledData === void 0 ? void 0 : (_controlledData$ = controlledData[0]) === null || _controlledData$ === void 0 ? void 0 : _controlledData$[valueKey]);\n    }\n  }, [setFocusItemValue, controlledData, uncontrolledData, valueKey]);\n  useEffect(function () {\n    var _triggerRef$current2; // In multiple selection, you need to set a maximum width for the input.\n\n\n    if ((_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : _triggerRef$current2.root) {\n      setMaxWidth(getWidth(triggerRef.current.root));\n    }\n  }, []); // Update the position of the menu when the search keyword and value change\n\n  useEffect(function () {\n    var _triggerRef$current3, _triggerRef$current3$;\n\n    (_triggerRef$current3 = triggerRef.current) === null || _triggerRef$current3 === void 0 ? void 0 : (_triggerRef$current3$ = _triggerRef$current3.updatePosition) === null || _triggerRef$current3$ === void 0 ? void 0 : _triggerRef$current3$.call(_triggerRef$current3);\n  }, [searchKeyword, value]);\n\n  var getDateItem = function getDateItem(value) {\n    // Find active `MenuItem` by `value`\n    var allData = getAllDataAndCache();\n    var activeItem = allData.find(function (item) {\n      return shallowEqual(item[valueKey], value);\n    });\n    var displayElement = placeholder;\n\n    if (activeItem === null || activeItem === void 0 ? void 0 : activeItem[labelKey]) {\n      displayElement = activeItem === null || activeItem === void 0 ? void 0 : activeItem[labelKey];\n    }\n\n    return {\n      isValid: !!activeItem,\n      activeItem: activeItem,\n      displayElement: displayElement\n    };\n  };\n\n  var getInput = useCallback(function () {\n    var _inputRef$current;\n\n    return multi ? (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.input : inputRef.current;\n  }, [inputRef, multi]);\n  var focusInput = useCallback(function () {\n    var _getInput;\n\n    return (_getInput = getInput()) === null || _getInput === void 0 ? void 0 : _getInput.focus();\n  }, [getInput]);\n  var blurInput = useCallback(function () {\n    var _getInput2;\n\n    return (_getInput2 = getInput()) === null || _getInput2 === void 0 ? void 0 : _getInput2.blur();\n  }, [getInput]);\n  /**\n   * Convert the string of the newly created option into an object.\n   */\n\n  var createOption = useCallback(function (value) {\n    var _ref2;\n\n    if (groupBy) {\n      var _ref;\n\n      return _ref = {\n        create: true\n      }, _ref[groupBy] = locale === null || locale === void 0 ? void 0 : locale.newItem, _ref[valueKey] = value, _ref[labelKey] = value, _ref;\n    }\n\n    return _ref2 = {\n      create: true\n    }, _ref2[valueKey] = value, _ref2[labelKey] = value, _ref2;\n  }, [groupBy, valueKey, labelKey, locale]);\n  var handleChange = useCallback(function (value, event) {\n    onChange === null || onChange === void 0 ? void 0 : onChange(value, event);\n  }, [onChange]);\n  var handleRemoveItemByTag = useCallback(function (tag, event) {\n    event.stopPropagation();\n    var val = cloneValue();\n    remove(val, function (itemVal) {\n      return shallowEqual(itemVal, tag);\n    });\n    setValue(val);\n    handleChange(val, event);\n  }, [setValue, cloneValue, handleChange]);\n  var handleSelect = useCallback(function (value, item, event) {\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(value, item, event);\n\n    if (creatable && item.create) {\n      delete item.create;\n      setNewData(newData.concat(item));\n    }\n  }, [creatable, newData, onSelect]);\n  /**\n   * Callback triggered by single selection\n   * @param value\n   * @param item\n   * @param event\n   */\n\n  var handleItemSelect = function handleItemSelect(value, item, event) {\n    setValue(value);\n    setFocusItemValue(value);\n    setSearchKeyword('');\n    handleSelect(value, item, event);\n    handleChange(value, event);\n    handleClose();\n  };\n  /**\n   * Callback triggered by multiple selection\n   * @param nextItemValue\n   * @param item\n   * @param event\n   * @param checked\n   */\n\n\n  var handleCheckItemSelect = function handleCheckItemSelect(nextItemValue, item, event, checked) {\n    var val = cloneValue();\n\n    if (checked) {\n      val.push(nextItemValue);\n    } else {\n      remove(val, function (itemVal) {\n        return shallowEqual(itemVal, nextItemValue);\n      });\n    }\n\n    setValue(val);\n    setSearchKeyword('');\n    setFocusItemValue(nextItemValue);\n    handleSelect(val, item, event);\n    handleChange(val, event);\n    focusInput();\n  };\n\n  var selectFocusMenuCheckItem = useCallback(function (event) {\n    var val = cloneValue();\n    var data = getAllData();\n\n    if (!focusItemValue || !data) {\n      return;\n    } // If the value is disabled in this option, it is returned.\n\n\n    if (disabledItemValues === null || disabledItemValues === void 0 ? void 0 : disabledItemValues.some(function (item) {\n      return item === focusItemValue;\n    })) {\n      return;\n    }\n\n    if (!val.some(function (v) {\n      return shallowEqual(v, focusItemValue);\n    })) {\n      val.push(focusItemValue);\n    } else {\n      remove(val, function (itemVal) {\n        return shallowEqual(itemVal, focusItemValue);\n      });\n    }\n\n    var focusItem = data.find(function (item) {\n      return shallowEqual(item === null || item === void 0 ? void 0 : item[valueKey], focusItemValue);\n    });\n\n    if (!focusItem) {\n      focusItem = createOption(focusItemValue);\n    }\n\n    setValue(val);\n    setSearchKeyword('');\n    handleSelect(val, focusItem, event);\n    handleChange(val, event);\n  }, [setValue, cloneValue, getAllData, handleChange, handleSelect, createOption, setSearchKeyword, disabledItemValues, focusItemValue, valueKey]);\n  var selectFocusMenuItem = useCallback(function (event) {\n    if (!focusItemValue || !controlledData) {\n      return;\n    } // If the value is disabled in this option, it is returned.\n\n\n    if (disabledItemValues === null || disabledItemValues === void 0 ? void 0 : disabledItemValues.some(function (item) {\n      return item === focusItemValue;\n    })) {\n      return;\n    } // Find active `MenuItem` by `value`\n\n\n    var allData = getAllData();\n    var focusItem = allData.find(function (item) {\n      return shallowEqual(item[valueKey], focusItemValue);\n    });\n\n    if (!focusItem && focusItemValue === searchKeyword) {\n      focusItem = createOption(searchKeyword);\n    }\n\n    setValue(focusItemValue);\n    setSearchKeyword('');\n    handleSelect(focusItemValue, focusItem, event);\n    handleChange(focusItemValue, event);\n    handleClose();\n  }, [setValue, disabledItemValues, controlledData, focusItemValue, valueKey, searchKeyword, handleClose, setSearchKeyword, createOption, getAllData, handleChange, handleSelect]);\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef,\n    targetRef: targetRef\n  });\n  /**\n   * Remove the last item, after pressing the back key on the keyboard.\n   * @param event\n   */\n\n  var removeLastItem = useCallback(function (event) {\n    var target = event === null || event === void 0 ? void 0 : event.target;\n\n    if ((target === null || target === void 0 ? void 0 : target.tagName) !== 'INPUT') {\n      focusInput();\n      return;\n    }\n\n    if ((target === null || target === void 0 ? void 0 : target.tagName) === 'INPUT' && (target === null || target === void 0 ? void 0 : target.value)) {\n      return;\n    }\n\n    var val = cloneValue();\n    val.pop();\n    setValue(val);\n    handleChange(val, event);\n  }, [setValue, focusInput, handleChange, cloneValue]);\n  var handleClean = useCallback(function (event) {\n    if (disabled || searchKeyword !== '') {\n      return;\n    }\n\n    setValue(null);\n    setFocusItemValue(null);\n    setSearchKeyword('');\n    handleChange(null, event);\n    onClean === null || onClean === void 0 ? void 0 : onClean(event);\n  }, [disabled, searchKeyword, onClean, handleChange, setValue, setFocusItemValue, setSearchKeyword]);\n  var onPickerKeyDown = useToggleKeyDownEvent(_extends({\n    triggerRef: triggerRef,\n    targetRef: targetRef,\n    overlayRef: overlayRef,\n    onMenuPressEnter: multi ? selectFocusMenuCheckItem : selectFocusMenuItem,\n    onMenuPressBackspace: multi ? removeLastItem : handleClean,\n    onMenuKeyDown: onKeyDown\n  }, rest));\n  var handleExited = useCallback(function () {\n    setFocusItemValue(multi ? value === null || value === void 0 ? void 0 : value[0] : value);\n    setSearchKeyword('');\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n  }, [setFocusItemValue, setSearchKeyword, onClose, value, multi]);\n  var handleFocus = useCallback(function () {\n    var _triggerRef$current4;\n\n    setOpen(true);\n    (_triggerRef$current4 = triggerRef.current) === null || _triggerRef$current4 === void 0 ? void 0 : _triggerRef$current4.open();\n  }, []);\n  var handleBlur = useCallback(function () {\n    setOpen(false);\n  }, []);\n  var handleEnter = useCallback(function () {\n    focusInput();\n    setOpen(true);\n  }, [focusInput]);\n  var handleExit = useCallback(function () {\n    blurInput();\n    setOpen(false);\n  }, [blurInput]);\n\n  var renderDropdownMenuItem = function renderDropdownMenuItem(label, item) {\n    // 'Create option \"{0}\"' =>  Create option \"xxxxx\"\n    var newLabel = item.create ? /*#__PURE__*/React.createElement(\"span\", null, tplTransform(locale === null || locale === void 0 ? void 0 : locale.createOption, label)) : label;\n    return renderMenuItem ? renderMenuItem(newLabel, item) : newLabel;\n  };\n\n  var renderSingleValue = function renderSingleValue() {\n    if (multi) {\n      return {\n        isValid: false,\n        displayElement: placeholder\n      };\n    }\n\n    var dataItem = getDateItem(value);\n    var displayElement = dataItem.displayElement;\n\n    if (!isNil(value) && isFunction(renderValue)) {\n      displayElement = renderValue(value, dataItem.activeItem, displayElement);\n    }\n\n    return {\n      isValid: dataItem.isValid,\n      displayElement: displayElement\n    };\n  };\n\n  var renderMultiValue = function renderMultiValue() {\n    if (!multi) {\n      return null;\n    }\n\n    var _tagProps$closable = tagProps.closable,\n        closable = _tagProps$closable === void 0 ? true : _tagProps$closable,\n        onClose = tagProps.onClose,\n        tagRest = _objectWithoutPropertiesLoose(tagProps, [\"closable\", \"onClose\"]);\n\n    var tags = value || [];\n    var items = [];\n    var tagElements = tags.map(function (tag) {\n      var _getDateItem = getDateItem(tag),\n          isValid = _getDateItem.isValid,\n          displayElement = _getDateItem.displayElement,\n          activeItem = _getDateItem.activeItem;\n\n      items.push(activeItem);\n\n      if (!isValid) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(Tag, _extends({}, tagRest, {\n        key: tag,\n        closable: !disabled && closable && !readOnly && !plaintext,\n        title: typeof displayElement === 'string' ? displayElement : undefined,\n        onClose: createChainedFunction(handleRemoveItemByTag.bind(null, tag), onClose)\n      }), displayElement);\n    }).filter(function (item) {\n      return item !== null;\n    });\n\n    if ((tags.length > 0 || isControlled) && isFunction(renderValue)) {\n      return renderValue(value, items, tagElements);\n    }\n\n    return tagElements;\n  };\n\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var left = positionProps.left,\n        top = positionProps.top,\n        className = positionProps.className;\n    var menuClassPrefix = multi ? 'picker-check-menu' : 'picker-select-menu';\n    var classes = merge(className, menuClassName, prefix(menuClassPrefix));\n\n    var styles = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n\n    var items = filterNodesOfTree(getAllData(), checkShouldDisplay);\n\n    if (creatable && searchKeyword && !items.find(function (item) {\n      return item[valueKey] === searchKeyword;\n    })) {\n      items = [].concat(items, [createOption(searchKeyword)]);\n    } // Create a tree structure data when set `groupBy`\n\n\n    if (groupBy) {\n      items = getDataGroupBy(items, groupBy, sort);\n    } else if (typeof sort === 'function') {\n      items = items.sort(sort(false));\n    }\n\n    var menu = items.length ? /*#__PURE__*/React.createElement(DropdownMenu, {\n      id: id ? id + \"-listbox\" : undefined,\n      listProps: listProps,\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      classPrefix: menuClassPrefix,\n      dropdownMenuItemClassPrefix: multi ? undefined : menuClassPrefix + \"-item\",\n      dropdownMenuItemAs: multi ? DropdownMenuCheckItem : DropdownMenuItem,\n      activeItemValues: multi ? value : [value],\n      focusItemValue: focusItemValue,\n      maxHeight: menuMaxHeight,\n      data: items,\n      group: !isUndefined(groupBy),\n      onSelect: multi ? handleCheckItemSelect : handleItemSelect,\n      renderMenuGroup: renderMenuGroup,\n      renderMenuItem: renderDropdownMenuItem,\n      virtualized: virtualized\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix(_templateObject())\n    }, locale === null || locale === void 0 ? void 0 : locale.noResultsText);\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      ref: mergeRefs(overlayRef, speakerRef),\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: styles,\n      target: triggerRef,\n      onKeyDown: onPickerKeyDown\n    }, renderMenu ? renderMenu(menu) : menu, renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  var _renderSingleValue = renderSingleValue(),\n      isValid = _renderSingleValue.isValid,\n      displayElement = _renderSingleValue.displayElement;\n\n  var tagElements = renderMultiValue();\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   * 3.If renderValue returns null or undefined, hasValue is false.\n   */\n\n  var hasSingleValue = !isNil(value) && isFunction(renderValue) && !isNil(displayElement);\n  var hasMultiValue = isArray(value) && value.length > 0 && isFunction(renderValue) && !isNil(tagElements);\n  var hasValue = multi ? !!(tagElements === null || tagElements === void 0 ? void 0 : tagElements.length) || hasMultiValue : isValid || hasSingleValue;\n\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n    hasValue: hasValue,\n    name: 'input'\n  })),\n      pickerClasses = _usePickerClassName[0],\n      usedClassNamePropKeys = _usePickerClassName[1];\n\n  var classes = merge(pickerClasses, (_merge = {}, _merge[prefix(_templateObject2())] = multi, _merge[prefix(_templateObject3())] = open, _merge));\n  var searching = !!searchKeyword && open;\n  var displaySearchInput = searchable && !disabled;\n  var inputProps = multi ? {\n    inputStyle: {\n      maxWidth: maxWidth - 63\n    },\n    as: InputAutosize\n  } : {\n    as: 'input'\n  };\n\n  if (plaintext) {\n    return /*#__PURE__*/React.createElement(Plaintext, {\n      localeKey: \"notSelected\"\n    }, displayElement || (tagElements === null || tagElements === void 0 ? void 0 : tagElements.length) ? tagElements : null);\n  }\n\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    pickerProps: pick(props, pickTriggerPropKeys),\n    ref: triggerRef,\n    trigger: \"active\",\n    onEnter: createChainedFunction(handleEnter, onEnter),\n    onEntered: createChainedFunction(onEntered, onOpen),\n    onExit: createChainedFunction(handleExit, onExit),\n    onExited: createChainedFunction(handleExited, onExited),\n    speaker: renderDropdownMenu,\n    placement: placement\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style,\n    onClick: focusInput,\n    onKeyDown: onPickerKeyDown\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys)), {\n    id: id,\n    readOnly: readOnly,\n    plaintext: plaintext,\n    ref: targetRef,\n    as: toggleAs,\n    tabIndex: null,\n    onClean: handleClean,\n    cleanable: cleanable && !disabled,\n    hasValue: hasValue,\n    active: open,\n    disabled: disabled,\n    placement: placement,\n    inputValue: value\n  }), searching || multi && hasValue ? null : displayElement || (locale === null || locale === void 0 ? void 0 : locale.placeholder)), /*#__PURE__*/React.createElement(\"div\", {\n    className: prefix(_templateObject4())\n  }, tagElements, displaySearchInput && /*#__PURE__*/React.createElement(InputSearch, _extends({}, inputProps, {\n    tabIndex: tabIndex,\n    readOnly: readOnly,\n    onBlur: createChainedFunction(handleBlur, onBlur),\n    onFocus: createChainedFunction(handleFocus, onFocus),\n    inputRef: inputRef,\n    onChange: handleSearch,\n    value: open ? searchKeyword : ''\n  })))));\n});\nInputPicker.displayName = 'InputPicker';\nInputPicker.defaultProps = defaultProps;\nInputPicker.propTypes = _extends({}, listPickerPropTypes, {\n  locale: PropTypes.any,\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  cacheData: PropTypes.array,\n  menuAutoWidth: PropTypes.bool,\n  menuMaxHeight: PropTypes.number,\n  searchable: PropTypes.bool,\n  creatable: PropTypes.bool,\n  multi: PropTypes.bool,\n  groupBy: PropTypes.any,\n  sort: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderMenuItem: PropTypes.func,\n  renderMenuGroup: PropTypes.func,\n  onSelect: PropTypes.func,\n  onGroupTitleClick: PropTypes.func,\n  onSearch: PropTypes.func,\n  virtualized: PropTypes.bool,\n  searchBy: PropTypes.func,\n  tagProps: PropTypes.object\n});\nexport default InputPicker;","map":{"version":3,"sources":["C:/Programowanie/store/node_modules/rsuite/es/InputPicker/InputPicker.js"],"names":["_taggedTemplateLiteralLoose","_extends","_objectWithoutPropertiesLoose","_templateObject4","data","_templateObject3","_templateObject2","_templateObject","React","useState","useRef","useEffect","useCallback","PropTypes","isUndefined","isNil","isFunction","remove","clone","isArray","omit","pick","getWidth","shallowEqual","filterNodesOfTree","Plaintext","createChainedFunction","tplTransform","getDataGroupBy","useClassNames","useCustom","useControlled","mergeRefs","DropdownMenu","DropdownMenuItem","DropdownMenuCheckItem","PickerToggle","PickerOverlay","PickerToggleTrigger","useFocusItemValue","usePickerClassName","useSearch","usePublicMethods","useToggleKeyDownEvent","pickTriggerPropKeys","omitTriggerPropKeys","listPickerPropTypes","Tag","InputAutosize","InputSearch","defaultProps","as","appearance","cleanable","cacheData","classPrefix","disabledItemValues","valueKey","labelKey","placement","searchable","menuAutoWidth","menuMaxHeight","tagProps","InputPicker","forwardRef","props","ref","_merge","Component","controlledData","disabled","readOnly","plaintext","defaultValue","defaultOpen","overrideLocale","locale","toggleAs","style","multi","controlledOpen","open","placeholder","groupBy","menuClassName","menuStyle","creatable","valueProp","value","virtualized","listProps","id","tabIndex","sort","renderMenu","renderExtraFooter","renderValue","renderMenuItem","renderMenuGroup","onEnter","onEntered","onExit","onExited","onChange","onClean","onSearch","onSelect","onOpen","onClose","onBlur","onFocus","searchBy","rest","Error","overlayRef","targetRef","triggerRef","inputRef","_useCustom","_useClassNames","prefix","merge","_useState","uncontrolledData","setData","_useState2","maxWidth","setMaxWidth","_useState3","newData","setNewData","_useState4","uncontrolledOpen","setOpen","getAllData","concat","getAllDataAndCache","_useControlled","setValue","isControlled","cloneValue","handleClose","_triggerRef$current","current","close","_useFocusItemValue","target","focusItemValue","setFocusItemValue","onKeyDown","handleSearchCallback","searchKeyword","filteredData","event","_filteredData$","_useSearch","callback","setSearchKeyword","checkShouldDisplay","handleSearch","_controlledData$","_triggerRef$current2","root","_triggerRef$current3","_triggerRef$current3$","updatePosition","call","getDateItem","allData","activeItem","find","item","displayElement","isValid","getInput","_inputRef$current","input","focusInput","_getInput","focus","blurInput","_getInput2","blur","createOption","_ref2","_ref","create","newItem","handleChange","handleRemoveItemByTag","tag","stopPropagation","val","itemVal","handleSelect","handleItemSelect","handleCheckItemSelect","nextItemValue","checked","push","selectFocusMenuCheckItem","some","v","focusItem","selectFocusMenuItem","removeLastItem","tagName","pop","handleClean","onPickerKeyDown","onMenuPressEnter","onMenuPressBackspace","onMenuKeyDown","handleExited","handleFocus","_triggerRef$current4","handleBlur","handleEnter","handleExit","renderDropdownMenuItem","label","newLabel","createElement","renderSingleValue","dataItem","renderMultiValue","_tagProps$closable","closable","tagRest","tags","items","tagElements","map","_getDateItem","key","title","undefined","bind","filter","length","renderDropdownMenu","positionProps","speakerRef","left","top","className","menuClassPrefix","classes","styles","menu","dropdownMenuItemClassPrefix","dropdownMenuItemAs","activeItemValues","maxHeight","group","noResultsText","autoWidth","_renderSingleValue","hasSingleValue","hasMultiValue","hasValue","_usePickerClassName","name","pickerClasses","usedClassNamePropKeys","searching","displaySearchInput","inputProps","inputStyle","localeKey","pickerProps","trigger","speaker","onClick","active","inputValue","displayName","propTypes","any","oneOf","array","bool","number","func","onGroupTitleClick","object"],"mappings":"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","sourcesContent":["import _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/esm/taggedTemplateLiteralLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteralLoose([\"tag-wrapper\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteralLoose([\"focused\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteralLoose([\"tag\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"none\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport isUndefined from 'lodash/isUndefined';\nimport isNil from 'lodash/isNil';\nimport isFunction from 'lodash/isFunction';\nimport remove from 'lodash/remove';\nimport clone from 'lodash/clone';\nimport isArray from 'lodash/isArray';\nimport omit from 'lodash/omit';\nimport pick from 'lodash/pick';\nimport { getWidth } from 'dom-lib';\nimport shallowEqual from '../utils/shallowEqual';\nimport { filterNodesOfTree } from '../utils/treeUtils';\nimport Plaintext from '../Plaintext';\nimport { createChainedFunction, tplTransform, getDataGroupBy, useClassNames, useCustom, useControlled, mergeRefs } from '../utils';\nimport { DropdownMenu, DropdownMenuItem, DropdownMenuCheckItem, PickerToggle, PickerOverlay, PickerToggleTrigger, useFocusItemValue, usePickerClassName, useSearch, usePublicMethods, useToggleKeyDownEvent, pickTriggerPropKeys, omitTriggerPropKeys, listPickerPropTypes } from '../Picker';\nimport Tag from '../Tag';\nimport InputAutosize from './InputAutosize';\nimport InputSearch from './InputSearch';\nvar defaultProps = {\n  as: 'div',\n  appearance: 'default',\n  cleanable: true,\n  cacheData: [],\n  classPrefix: 'picker',\n  data: [],\n  disabledItemValues: [],\n  valueKey: 'value',\n  labelKey: 'label',\n  placement: 'bottomStart',\n  searchable: true,\n  menuAutoWidth: true,\n  menuMaxHeight: 320,\n  tagProps: {}\n};\nvar InputPicker = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _merge;\n\n  var Component = props.as,\n      cleanable = props.cleanable,\n      cacheData = props.cacheData,\n      classPrefix = props.classPrefix,\n      controlledData = props.data,\n      disabled = props.disabled,\n      readOnly = props.readOnly,\n      plaintext = props.plaintext,\n      defaultValue = props.defaultValue,\n      defaultOpen = props.defaultOpen,\n      disabledItemValues = props.disabledItemValues,\n      overrideLocale = props.locale,\n      toggleAs = props.toggleAs,\n      style = props.style,\n      searchable = props.searchable,\n      multi = props.multi,\n      controlledOpen = props.open,\n      placeholder = props.placeholder,\n      tagProps = props.tagProps,\n      groupBy = props.groupBy,\n      menuClassName = props.menuClassName,\n      menuStyle = props.menuStyle,\n      menuAutoWidth = props.menuAutoWidth,\n      menuMaxHeight = props.menuMaxHeight,\n      creatable = props.creatable,\n      valueProp = props.value,\n      valueKey = props.valueKey,\n      virtualized = props.virtualized,\n      labelKey = props.labelKey,\n      listProps = props.listProps,\n      id = props.id,\n      tabIndex = props.tabIndex,\n      sort = props.sort,\n      renderMenu = props.renderMenu,\n      renderExtraFooter = props.renderExtraFooter,\n      renderValue = props.renderValue,\n      renderMenuItem = props.renderMenuItem,\n      renderMenuGroup = props.renderMenuGroup,\n      onEnter = props.onEnter,\n      onEntered = props.onEntered,\n      onExit = props.onExit,\n      onExited = props.onExited,\n      onChange = props.onChange,\n      onClean = props.onClean,\n      onSearch = props.onSearch,\n      onSelect = props.onSelect,\n      onOpen = props.onOpen,\n      onClose = props.onClose,\n      onBlur = props.onBlur,\n      onFocus = props.onFocus,\n      searchBy = props.searchBy,\n      placement = props.placement,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"cleanable\", \"cacheData\", \"classPrefix\", \"data\", \"disabled\", \"readOnly\", \"plaintext\", \"defaultValue\", \"defaultOpen\", \"disabledItemValues\", \"locale\", \"toggleAs\", \"style\", \"searchable\", \"multi\", \"open\", \"placeholder\", \"tagProps\", \"groupBy\", \"menuClassName\", \"menuStyle\", \"menuAutoWidth\", \"menuMaxHeight\", \"creatable\", \"value\", \"valueKey\", \"virtualized\", \"labelKey\", \"listProps\", \"id\", \"tabIndex\", \"sort\", \"renderMenu\", \"renderExtraFooter\", \"renderValue\", \"renderMenuItem\", \"renderMenuGroup\", \"onEnter\", \"onEntered\", \"onExit\", \"onExited\", \"onChange\", \"onClean\", \"onSearch\", \"onSelect\", \"onOpen\", \"onClose\", \"onBlur\", \"onFocus\", \"searchBy\", \"placement\"]);\n\n  if (groupBy === valueKey || groupBy === labelKey) {\n    throw Error('`groupBy` can not be equal to `valueKey` and `labelKey`');\n  }\n\n  var overlayRef = useRef();\n  var targetRef = useRef();\n  var triggerRef = useRef();\n  var inputRef = useRef();\n\n  var _useCustom = useCustom(['Picker', 'InputPicker'], overrideLocale),\n      locale = _useCustom.locale;\n\n  var _useClassNames = useClassNames(classPrefix),\n      prefix = _useClassNames.prefix,\n      merge = _useClassNames.merge;\n\n  var _useState = useState(controlledData),\n      uncontrolledData = _useState[0],\n      setData = _useState[1];\n\n  var _useState2 = useState(100),\n      maxWidth = _useState2[0],\n      setMaxWidth = _useState2[1];\n\n  var _useState3 = useState([]),\n      newData = _useState3[0],\n      setNewData = _useState3[1];\n\n  var _useState4 = useState(defaultOpen),\n      uncontrolledOpen = _useState4[0],\n      setOpen = _useState4[1];\n\n  var open = isUndefined(controlledOpen) ? uncontrolledOpen : controlledOpen;\n  var getAllData = useCallback(function () {\n    return [].concat(uncontrolledData, newData);\n  }, [uncontrolledData, newData]);\n  var getAllDataAndCache = useCallback(function () {\n    return [].concat(getAllData(), cacheData);\n  }, [getAllData, cacheData]);\n\n  var _useControlled = useControlled(valueProp, multi ? defaultValue || [] : defaultValue),\n      value = _useControlled[0],\n      setValue = _useControlled[1],\n      isControlled = _useControlled[2];\n\n  var cloneValue = useCallback(function () {\n    return multi ? clone(value) || [] : value;\n  }, [multi, value]);\n  var handleClose = useCallback(function () {\n    var _triggerRef$current;\n\n    triggerRef === null || triggerRef === void 0 ? void 0 : (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : _triggerRef$current.close();\n  }, [triggerRef]); // Used to hover the focuse item  when trigger `onKeydown`\n\n  var _useFocusItemValue = useFocusItemValue(multi ? value === null || value === void 0 ? void 0 : value[0] : value, {\n    data: getAllDataAndCache(),\n    valueKey: valueKey,\n    target: function target() {\n      return overlayRef.current;\n    }\n  }),\n      focusItemValue = _useFocusItemValue.focusItemValue,\n      setFocusItemValue = _useFocusItemValue.setFocusItemValue,\n      onKeyDown = _useFocusItemValue.onKeyDown;\n\n  var handleSearchCallback = useCallback(function (searchKeyword, filteredData, event) {\n    var _filteredData$;\n\n    // The first option after filtering is the focus.\n    setFocusItemValue((filteredData === null || filteredData === void 0 ? void 0 : (_filteredData$ = filteredData[0]) === null || _filteredData$ === void 0 ? void 0 : _filteredData$[valueKey]) || searchKeyword);\n    onSearch === null || onSearch === void 0 ? void 0 : onSearch(searchKeyword, event);\n  }, [setFocusItemValue, onSearch, valueKey]); // Use search keywords to filter options.\n\n  var _useSearch = useSearch({\n    labelKey: labelKey,\n    data: getAllData(),\n    searchBy: searchBy,\n    callback: handleSearchCallback\n  }),\n      searchKeyword = _useSearch.searchKeyword,\n      setSearchKeyword = _useSearch.setSearchKeyword,\n      checkShouldDisplay = _useSearch.checkShouldDisplay,\n      handleSearch = _useSearch.handleSearch; // Update the state when the data in props changes\n\n\n  useEffect(function () {\n    if (controlledData && !shallowEqual(controlledData, uncontrolledData)) {\n      var _controlledData$;\n\n      setData(controlledData);\n      setNewData([]);\n      setFocusItemValue(controlledData === null || controlledData === void 0 ? void 0 : (_controlledData$ = controlledData[0]) === null || _controlledData$ === void 0 ? void 0 : _controlledData$[valueKey]);\n    }\n  }, [setFocusItemValue, controlledData, uncontrolledData, valueKey]);\n  useEffect(function () {\n    var _triggerRef$current2;\n\n    // In multiple selection, you need to set a maximum width for the input.\n    if ((_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : _triggerRef$current2.root) {\n      setMaxWidth(getWidth(triggerRef.current.root));\n    }\n  }, []); // Update the position of the menu when the search keyword and value change\n\n  useEffect(function () {\n    var _triggerRef$current3, _triggerRef$current3$;\n\n    (_triggerRef$current3 = triggerRef.current) === null || _triggerRef$current3 === void 0 ? void 0 : (_triggerRef$current3$ = _triggerRef$current3.updatePosition) === null || _triggerRef$current3$ === void 0 ? void 0 : _triggerRef$current3$.call(_triggerRef$current3);\n  }, [searchKeyword, value]);\n\n  var getDateItem = function getDateItem(value) {\n    // Find active `MenuItem` by `value`\n    var allData = getAllDataAndCache();\n    var activeItem = allData.find(function (item) {\n      return shallowEqual(item[valueKey], value);\n    });\n    var displayElement = placeholder;\n\n    if (activeItem === null || activeItem === void 0 ? void 0 : activeItem[labelKey]) {\n      displayElement = activeItem === null || activeItem === void 0 ? void 0 : activeItem[labelKey];\n    }\n\n    return {\n      isValid: !!activeItem,\n      activeItem: activeItem,\n      displayElement: displayElement\n    };\n  };\n\n  var getInput = useCallback(function () {\n    var _inputRef$current;\n\n    return multi ? (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.input : inputRef.current;\n  }, [inputRef, multi]);\n  var focusInput = useCallback(function () {\n    var _getInput;\n\n    return (_getInput = getInput()) === null || _getInput === void 0 ? void 0 : _getInput.focus();\n  }, [getInput]);\n  var blurInput = useCallback(function () {\n    var _getInput2;\n\n    return (_getInput2 = getInput()) === null || _getInput2 === void 0 ? void 0 : _getInput2.blur();\n  }, [getInput]);\n  /**\n   * Convert the string of the newly created option into an object.\n   */\n\n  var createOption = useCallback(function (value) {\n    var _ref2;\n\n    if (groupBy) {\n      var _ref;\n\n      return _ref = {\n        create: true\n      }, _ref[groupBy] = locale === null || locale === void 0 ? void 0 : locale.newItem, _ref[valueKey] = value, _ref[labelKey] = value, _ref;\n    }\n\n    return _ref2 = {\n      create: true\n    }, _ref2[valueKey] = value, _ref2[labelKey] = value, _ref2;\n  }, [groupBy, valueKey, labelKey, locale]);\n  var handleChange = useCallback(function (value, event) {\n    onChange === null || onChange === void 0 ? void 0 : onChange(value, event);\n  }, [onChange]);\n  var handleRemoveItemByTag = useCallback(function (tag, event) {\n    event.stopPropagation();\n    var val = cloneValue();\n    remove(val, function (itemVal) {\n      return shallowEqual(itemVal, tag);\n    });\n    setValue(val);\n    handleChange(val, event);\n  }, [setValue, cloneValue, handleChange]);\n  var handleSelect = useCallback(function (value, item, event) {\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(value, item, event);\n\n    if (creatable && item.create) {\n      delete item.create;\n      setNewData(newData.concat(item));\n    }\n  }, [creatable, newData, onSelect]);\n  /**\n   * Callback triggered by single selection\n   * @param value\n   * @param item\n   * @param event\n   */\n\n  var handleItemSelect = function handleItemSelect(value, item, event) {\n    setValue(value);\n    setFocusItemValue(value);\n    setSearchKeyword('');\n    handleSelect(value, item, event);\n    handleChange(value, event);\n    handleClose();\n  };\n  /**\n   * Callback triggered by multiple selection\n   * @param nextItemValue\n   * @param item\n   * @param event\n   * @param checked\n   */\n\n\n  var handleCheckItemSelect = function handleCheckItemSelect(nextItemValue, item, event, checked) {\n    var val = cloneValue();\n\n    if (checked) {\n      val.push(nextItemValue);\n    } else {\n      remove(val, function (itemVal) {\n        return shallowEqual(itemVal, nextItemValue);\n      });\n    }\n\n    setValue(val);\n    setSearchKeyword('');\n    setFocusItemValue(nextItemValue);\n    handleSelect(val, item, event);\n    handleChange(val, event);\n    focusInput();\n  };\n\n  var selectFocusMenuCheckItem = useCallback(function (event) {\n    var val = cloneValue();\n    var data = getAllData();\n\n    if (!focusItemValue || !data) {\n      return;\n    } // If the value is disabled in this option, it is returned.\n\n\n    if (disabledItemValues === null || disabledItemValues === void 0 ? void 0 : disabledItemValues.some(function (item) {\n      return item === focusItemValue;\n    })) {\n      return;\n    }\n\n    if (!val.some(function (v) {\n      return shallowEqual(v, focusItemValue);\n    })) {\n      val.push(focusItemValue);\n    } else {\n      remove(val, function (itemVal) {\n        return shallowEqual(itemVal, focusItemValue);\n      });\n    }\n\n    var focusItem = data.find(function (item) {\n      return shallowEqual(item === null || item === void 0 ? void 0 : item[valueKey], focusItemValue);\n    });\n\n    if (!focusItem) {\n      focusItem = createOption(focusItemValue);\n    }\n\n    setValue(val);\n    setSearchKeyword('');\n    handleSelect(val, focusItem, event);\n    handleChange(val, event);\n  }, [setValue, cloneValue, getAllData, handleChange, handleSelect, createOption, setSearchKeyword, disabledItemValues, focusItemValue, valueKey]);\n  var selectFocusMenuItem = useCallback(function (event) {\n    if (!focusItemValue || !controlledData) {\n      return;\n    } // If the value is disabled in this option, it is returned.\n\n\n    if (disabledItemValues === null || disabledItemValues === void 0 ? void 0 : disabledItemValues.some(function (item) {\n      return item === focusItemValue;\n    })) {\n      return;\n    } // Find active `MenuItem` by `value`\n\n\n    var allData = getAllData();\n    var focusItem = allData.find(function (item) {\n      return shallowEqual(item[valueKey], focusItemValue);\n    });\n\n    if (!focusItem && focusItemValue === searchKeyword) {\n      focusItem = createOption(searchKeyword);\n    }\n\n    setValue(focusItemValue);\n    setSearchKeyword('');\n    handleSelect(focusItemValue, focusItem, event);\n    handleChange(focusItemValue, event);\n    handleClose();\n  }, [setValue, disabledItemValues, controlledData, focusItemValue, valueKey, searchKeyword, handleClose, setSearchKeyword, createOption, getAllData, handleChange, handleSelect]);\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef,\n    targetRef: targetRef\n  });\n  /**\n   * Remove the last item, after pressing the back key on the keyboard.\n   * @param event\n   */\n\n  var removeLastItem = useCallback(function (event) {\n    var target = event === null || event === void 0 ? void 0 : event.target;\n\n    if ((target === null || target === void 0 ? void 0 : target.tagName) !== 'INPUT') {\n      focusInput();\n      return;\n    }\n\n    if ((target === null || target === void 0 ? void 0 : target.tagName) === 'INPUT' && (target === null || target === void 0 ? void 0 : target.value)) {\n      return;\n    }\n\n    var val = cloneValue();\n    val.pop();\n    setValue(val);\n    handleChange(val, event);\n  }, [setValue, focusInput, handleChange, cloneValue]);\n  var handleClean = useCallback(function (event) {\n    if (disabled || searchKeyword !== '') {\n      return;\n    }\n\n    setValue(null);\n    setFocusItemValue(null);\n    setSearchKeyword('');\n    handleChange(null, event);\n    onClean === null || onClean === void 0 ? void 0 : onClean(event);\n  }, [disabled, searchKeyword, onClean, handleChange, setValue, setFocusItemValue, setSearchKeyword]);\n  var onPickerKeyDown = useToggleKeyDownEvent(_extends({\n    triggerRef: triggerRef,\n    targetRef: targetRef,\n    overlayRef: overlayRef,\n    onMenuPressEnter: multi ? selectFocusMenuCheckItem : selectFocusMenuItem,\n    onMenuPressBackspace: multi ? removeLastItem : handleClean,\n    onMenuKeyDown: onKeyDown\n  }, rest));\n  var handleExited = useCallback(function () {\n    setFocusItemValue(multi ? value === null || value === void 0 ? void 0 : value[0] : value);\n    setSearchKeyword('');\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n  }, [setFocusItemValue, setSearchKeyword, onClose, value, multi]);\n  var handleFocus = useCallback(function () {\n    var _triggerRef$current4;\n\n    setOpen(true);\n    (_triggerRef$current4 = triggerRef.current) === null || _triggerRef$current4 === void 0 ? void 0 : _triggerRef$current4.open();\n  }, []);\n  var handleBlur = useCallback(function () {\n    setOpen(false);\n  }, []);\n  var handleEnter = useCallback(function () {\n    focusInput();\n    setOpen(true);\n  }, [focusInput]);\n  var handleExit = useCallback(function () {\n    blurInput();\n    setOpen(false);\n  }, [blurInput]);\n\n  var renderDropdownMenuItem = function renderDropdownMenuItem(label, item) {\n    // 'Create option \"{0}\"' =>  Create option \"xxxxx\"\n    var newLabel = item.create ? /*#__PURE__*/React.createElement(\"span\", null, tplTransform(locale === null || locale === void 0 ? void 0 : locale.createOption, label)) : label;\n    return renderMenuItem ? renderMenuItem(newLabel, item) : newLabel;\n  };\n\n  var renderSingleValue = function renderSingleValue() {\n    if (multi) {\n      return {\n        isValid: false,\n        displayElement: placeholder\n      };\n    }\n\n    var dataItem = getDateItem(value);\n    var displayElement = dataItem.displayElement;\n\n    if (!isNil(value) && isFunction(renderValue)) {\n      displayElement = renderValue(value, dataItem.activeItem, displayElement);\n    }\n\n    return {\n      isValid: dataItem.isValid,\n      displayElement: displayElement\n    };\n  };\n\n  var renderMultiValue = function renderMultiValue() {\n    if (!multi) {\n      return null;\n    }\n\n    var _tagProps$closable = tagProps.closable,\n        closable = _tagProps$closable === void 0 ? true : _tagProps$closable,\n        onClose = tagProps.onClose,\n        tagRest = _objectWithoutPropertiesLoose(tagProps, [\"closable\", \"onClose\"]);\n\n    var tags = value || [];\n    var items = [];\n    var tagElements = tags.map(function (tag) {\n      var _getDateItem = getDateItem(tag),\n          isValid = _getDateItem.isValid,\n          displayElement = _getDateItem.displayElement,\n          activeItem = _getDateItem.activeItem;\n\n      items.push(activeItem);\n\n      if (!isValid) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(Tag, _extends({}, tagRest, {\n        key: tag,\n        closable: !disabled && closable && !readOnly && !plaintext,\n        title: typeof displayElement === 'string' ? displayElement : undefined,\n        onClose: createChainedFunction(handleRemoveItemByTag.bind(null, tag), onClose)\n      }), displayElement);\n    }).filter(function (item) {\n      return item !== null;\n    });\n\n    if ((tags.length > 0 || isControlled) && isFunction(renderValue)) {\n      return renderValue(value, items, tagElements);\n    }\n\n    return tagElements;\n  };\n\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var left = positionProps.left,\n        top = positionProps.top,\n        className = positionProps.className;\n    var menuClassPrefix = multi ? 'picker-check-menu' : 'picker-select-menu';\n    var classes = merge(className, menuClassName, prefix(menuClassPrefix));\n\n    var styles = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n\n    var items = filterNodesOfTree(getAllData(), checkShouldDisplay);\n\n    if (creatable && searchKeyword && !items.find(function (item) {\n      return item[valueKey] === searchKeyword;\n    })) {\n      items = [].concat(items, [createOption(searchKeyword)]);\n    } // Create a tree structure data when set `groupBy`\n\n\n    if (groupBy) {\n      items = getDataGroupBy(items, groupBy, sort);\n    } else if (typeof sort === 'function') {\n      items = items.sort(sort(false));\n    }\n\n    var menu = items.length ? /*#__PURE__*/React.createElement(DropdownMenu, {\n      id: id ? id + \"-listbox\" : undefined,\n      listProps: listProps,\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      classPrefix: menuClassPrefix,\n      dropdownMenuItemClassPrefix: multi ? undefined : menuClassPrefix + \"-item\",\n      dropdownMenuItemAs: multi ? DropdownMenuCheckItem : DropdownMenuItem,\n      activeItemValues: multi ? value : [value],\n      focusItemValue: focusItemValue,\n      maxHeight: menuMaxHeight,\n      data: items,\n      group: !isUndefined(groupBy),\n      onSelect: multi ? handleCheckItemSelect : handleItemSelect,\n      renderMenuGroup: renderMenuGroup,\n      renderMenuItem: renderDropdownMenuItem,\n      virtualized: virtualized\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix(_templateObject())\n    }, locale === null || locale === void 0 ? void 0 : locale.noResultsText);\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      ref: mergeRefs(overlayRef, speakerRef),\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: styles,\n      target: triggerRef,\n      onKeyDown: onPickerKeyDown\n    }, renderMenu ? renderMenu(menu) : menu, renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  var _renderSingleValue = renderSingleValue(),\n      isValid = _renderSingleValue.isValid,\n      displayElement = _renderSingleValue.displayElement;\n\n  var tagElements = renderMultiValue();\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   * 3.If renderValue returns null or undefined, hasValue is false.\n   */\n\n  var hasSingleValue = !isNil(value) && isFunction(renderValue) && !isNil(displayElement);\n  var hasMultiValue = isArray(value) && value.length > 0 && isFunction(renderValue) && !isNil(tagElements);\n  var hasValue = multi ? !!(tagElements === null || tagElements === void 0 ? void 0 : tagElements.length) || hasMultiValue : isValid || hasSingleValue;\n\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n    hasValue: hasValue,\n    name: 'input'\n  })),\n      pickerClasses = _usePickerClassName[0],\n      usedClassNamePropKeys = _usePickerClassName[1];\n\n  var classes = merge(pickerClasses, (_merge = {}, _merge[prefix(_templateObject2())] = multi, _merge[prefix(_templateObject3())] = open, _merge));\n  var searching = !!searchKeyword && open;\n  var displaySearchInput = searchable && !disabled;\n  var inputProps = multi ? {\n    inputStyle: {\n      maxWidth: maxWidth - 63\n    },\n    as: InputAutosize\n  } : {\n    as: 'input'\n  };\n\n  if (plaintext) {\n    return /*#__PURE__*/React.createElement(Plaintext, {\n      localeKey: \"notSelected\"\n    }, displayElement || (tagElements === null || tagElements === void 0 ? void 0 : tagElements.length) ? tagElements : null);\n  }\n\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    pickerProps: pick(props, pickTriggerPropKeys),\n    ref: triggerRef,\n    trigger: \"active\",\n    onEnter: createChainedFunction(handleEnter, onEnter),\n    onEntered: createChainedFunction(onEntered, onOpen),\n    onExit: createChainedFunction(handleExit, onExit),\n    onExited: createChainedFunction(handleExited, onExited),\n    speaker: renderDropdownMenu,\n    placement: placement\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style,\n    onClick: focusInput,\n    onKeyDown: onPickerKeyDown\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys)), {\n    id: id,\n    readOnly: readOnly,\n    plaintext: plaintext,\n    ref: targetRef,\n    as: toggleAs,\n    tabIndex: null,\n    onClean: handleClean,\n    cleanable: cleanable && !disabled,\n    hasValue: hasValue,\n    active: open,\n    disabled: disabled,\n    placement: placement,\n    inputValue: value\n  }), searching || multi && hasValue ? null : displayElement || (locale === null || locale === void 0 ? void 0 : locale.placeholder)), /*#__PURE__*/React.createElement(\"div\", {\n    className: prefix(_templateObject4())\n  }, tagElements, displaySearchInput && /*#__PURE__*/React.createElement(InputSearch, _extends({}, inputProps, {\n    tabIndex: tabIndex,\n    readOnly: readOnly,\n    onBlur: createChainedFunction(handleBlur, onBlur),\n    onFocus: createChainedFunction(handleFocus, onFocus),\n    inputRef: inputRef,\n    onChange: handleSearch,\n    value: open ? searchKeyword : ''\n  })))));\n});\nInputPicker.displayName = 'InputPicker';\nInputPicker.defaultProps = defaultProps;\nInputPicker.propTypes = _extends({}, listPickerPropTypes, {\n  locale: PropTypes.any,\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  cacheData: PropTypes.array,\n  menuAutoWidth: PropTypes.bool,\n  menuMaxHeight: PropTypes.number,\n  searchable: PropTypes.bool,\n  creatable: PropTypes.bool,\n  multi: PropTypes.bool,\n  groupBy: PropTypes.any,\n  sort: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderMenuItem: PropTypes.func,\n  renderMenuGroup: PropTypes.func,\n  onSelect: PropTypes.func,\n  onGroupTitleClick: PropTypes.func,\n  onSearch: PropTypes.func,\n  virtualized: PropTypes.bool,\n  searchBy: PropTypes.func,\n  tagProps: PropTypes.object\n});\nexport default InputPicker;"]},"metadata":{},"sourceType":"module"}