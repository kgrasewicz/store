{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useState, useCallback, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport isNil from 'lodash/isNil';\nimport AngleUpIcon from '@rsuite/icons/legacy/AngleUp';\nimport AngleDownIcon from '@rsuite/icons/legacy/AngleDown';\nimport helper from '../DOMHelper';\nimport InputGroup from '../InputGroup/InputGroup';\nimport InputGroupAddon from '../InputGroup/InputGroupAddon';\nimport Input from '../Input';\nimport Button from '../Button';\nimport { partitionHTMLProps, createChainedFunction, useClassNames, useControlled } from '../utils';\n/**\n * Check if the value is a number.\n * @param value\n */\n\nvar isNumber = function isNumber(value) {\n  return /(^-?|^\\+?|^\\d?)\\d*\\.\\d+$/.test(value + '');\n};\n/**\n * Get the length of the decimal.\n * @param value\n */\n\n\nfunction getDecimalLength(value) {\n  if (isNumber(value)) {\n    return value.toString().split('.')[1].length;\n  }\n\n  return 0;\n}\n/**\n * Get the value after the decimal point.\n * @param values\n */\n\n\nfunction decimals() {\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n    values[_key] = arguments[_key];\n  }\n\n  var lengths = values.map(getDecimalLength);\n  return Math.max.apply(Math, lengths);\n}\n/**\n * Disable the upper limit of the number.\n * @param value\n * @param max\n */\n\n\nfunction disableMaxValue(value, max) {\n  if (!isNil(value)) {\n    return +value >= max;\n  }\n\n  return false;\n}\n/**\n * Disable the lower limit of the number.\n * @param value\n * @param min\n */\n\n\nfunction disableMinValue(value, min) {\n  if (!isNil(value)) {\n    return +value <= min;\n  }\n\n  return false;\n}\n\nvar defaultProps = {\n  as: InputGroup,\n  classPrefix: 'input-number',\n  min: -Infinity,\n  max: Infinity,\n  step: 1,\n  buttonAppearance: 'subtle',\n  scrollable: true\n};\nvar InputNumber = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var Component = props.as,\n      className = props.className,\n      classPrefix = props.classPrefix,\n      disabled = props.disabled,\n      readOnly = props.readOnly,\n      plaintext = props.plaintext,\n      valueProp = props.value,\n      defaultValue = props.defaultValue,\n      size = props.size,\n      prefixElement = props.prefix,\n      postfix = props.postfix,\n      step = props.step,\n      buttonAppearance = props.buttonAppearance,\n      min = props.min,\n      max = props.max,\n      scrollable = props.scrollable,\n      onChange = props.onChange,\n      onWheel = props.onWheel,\n      restProps = _objectWithoutPropertiesLoose(props, [\"as\", \"className\", \"classPrefix\", \"disabled\", \"readOnly\", \"plaintext\", \"value\", \"defaultValue\", \"size\", \"prefix\", \"postfix\", \"step\", \"buttonAppearance\", \"min\", \"max\", \"scrollable\", \"onChange\", \"onWheel\"]);\n\n  var _useControlled = useControlled(valueProp, defaultValue),\n      value = _useControlled[0],\n      setValue = _useControlled[1];\n\n  var _useState = useState(disableMaxValue(value, max)),\n      disabledUpButton = _useState[0],\n      setDisabledUpButton = _useState[1];\n\n  var _useState2 = useState(disableMinValue(value, min)),\n      disabledDownButton = _useState2[0],\n      setDisabledDownButton = _useState2[1];\n\n  var _useClassNames = useClassNames(classPrefix),\n      withClassPrefix = _useClassNames.withClassPrefix,\n      merge = _useClassNames.merge,\n      prefix = _useClassNames.prefix;\n\n  var classes = merge(className, withClassPrefix());\n\n  var _partitionHTMLProps = partitionHTMLProps(restProps),\n      htmlInputProps = _partitionHTMLProps[0],\n      rest = _partitionHTMLProps[1];\n\n  var inputRef = useRef();\n  var handleValue = useCallback(function (currentValue, event) {\n    if (currentValue !== value) {\n      // Disable the up button when the value is greater than the maximum value.\n      setDisabledUpButton(disableMaxValue(currentValue, max)); // Disable the down button when the value is greater than the minimum value.\n\n      setDisabledDownButton(disableMinValue(currentValue, min));\n      setValue(currentValue);\n      onChange === null || onChange === void 0 ? void 0 : onChange(currentValue, event);\n    }\n  }, [max, min, onChange, setValue, value]);\n  var getSafeValue = useCallback(function (value) {\n    if (!Number.isNaN(value)) {\n      if (+value > max) {\n        value = max;\n      }\n\n      if (+value < min) {\n        value = min;\n      }\n    } else {\n      value = '';\n    }\n\n    return value.toString();\n  }, [max, min]);\n  var handlePlus = useCallback(function (event) {\n    var val = +(value || 0);\n    var bit = decimals(val, step);\n    handleValue(getSafeValue((val + step).toFixed(bit)), event);\n  }, [getSafeValue, handleValue, step, value]);\n  var handleMinus = useCallback(function (event) {\n    var val = +(value || 0);\n    var bit = decimals(val, step);\n    handleValue(getSafeValue((val - step).toFixed(bit)), event);\n  }, [getSafeValue, handleValue, step, value]);\n  var handleWheel = useCallback(function (event) {\n    if (!disabled && !readOnly && event.target === document.activeElement) {\n      event.preventDefault();\n      var delta = event['wheelDelta'] || -event.deltaY || -(event === null || event === void 0 ? void 0 : event.detail);\n\n      if (delta > 0) {\n        handleMinus(event);\n      }\n\n      if (delta < 0) {\n        handlePlus(event);\n      }\n    }\n\n    onWheel === null || onWheel === void 0 ? void 0 : onWheel(event);\n  }, [disabled, handleMinus, handlePlus, onWheel, readOnly]);\n  var handleChange = useCallback(function (value, event) {\n    if (!/^-?(?:\\d+)?(\\.)?(\\d+)*$/.test(value) && value !== '') {\n      return;\n    }\n\n    handleValue(value, event);\n  }, [handleValue]);\n  var handleBlur = useCallback(function (event) {\n    var _event$target;\n\n    var targetValue = Number.parseFloat((_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.value);\n    handleValue(getSafeValue(targetValue), event);\n  }, [getSafeValue, handleValue]);\n  useEffect(function () {\n    var wheelListener;\n\n    if (inputRef.current && scrollable) {\n      wheelListener = helper.on(inputRef.current, 'wheel', handleWheel, {\n        passive: false\n      });\n    }\n\n    return function () {\n      var _wheelListener;\n\n      (_wheelListener = wheelListener) === null || _wheelListener === void 0 ? void 0 : _wheelListener.off();\n    };\n  }, [handleWheel, scrollable]);\n  var input = /*#__PURE__*/React.createElement(Input, _extends({}, htmlInputProps, {\n    type: \"text\",\n    autoComplete: \"off\",\n    step: step,\n    inputRef: inputRef,\n    onChange: handleChange,\n    onBlur: createChainedFunction(handleBlur, htmlInputProps === null || htmlInputProps === void 0 ? void 0 : htmlInputProps.onBlur),\n    value: isNil(value) ? '' : \"\" + value,\n    disabled: disabled,\n    readOnly: readOnly,\n    plaintext: plaintext\n  }));\n\n  if (plaintext) {\n    return input;\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({}, rest, {\n    ref: ref,\n    className: classes,\n    disabled: disabled,\n    size: size\n  }), prefixElement && /*#__PURE__*/React.createElement(InputGroupAddon, null, prefixElement), input, /*#__PURE__*/React.createElement(\"span\", {\n    className: prefix('btn-group-vertical')\n  }, /*#__PURE__*/React.createElement(Button, {\n    appearance: buttonAppearance,\n    className: prefix('touchspin-up'),\n    onClick: handlePlus,\n    disabled: disabledUpButton || disabled || readOnly\n  }, /*#__PURE__*/React.createElement(AngleUpIcon, null)), /*#__PURE__*/React.createElement(Button, {\n    appearance: buttonAppearance,\n    className: prefix('touchspin-down'),\n    onClick: handleMinus,\n    disabled: disabledDownButton || disabled || readOnly\n  }, /*#__PURE__*/React.createElement(AngleDownIcon, null))), postfix && /*#__PURE__*/React.createElement(InputGroupAddon, null, postfix));\n});\nInputNumber.displayName = 'InputNumber';\nInputNumber.defaultProps = defaultProps;\nInputNumber.propTypes = {\n  className: PropTypes.string,\n  classPrefix: PropTypes.string,\n  min: PropTypes.number,\n  max: PropTypes.number,\n  step: PropTypes.number,\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  defaultValue: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  prefix: PropTypes.node,\n  postfix: PropTypes.node,\n  disabled: PropTypes.bool,\n  readOnly: PropTypes.bool,\n  plaintext: PropTypes.bool,\n  scrollable: PropTypes.bool,\n  size: PropTypes.oneOf(['lg', 'md', 'sm', 'xs']),\n  buttonAppearance: PropTypes.oneOf(['default', 'primary', 'link', 'subtle', 'ghost']),\n  onWheel: PropTypes.func,\n  onChange: PropTypes.func\n};\nexport default InputNumber;","map":{"version":3,"sources":["C:/Programowanie/store/node_modules/rsuite/es/InputNumber/InputNumber.js"],"names":["_extends","_objectWithoutPropertiesLoose","React","useState","useCallback","useEffect","useRef","PropTypes","isNil","AngleUpIcon","AngleDownIcon","helper","InputGroup","InputGroupAddon","Input","Button","partitionHTMLProps","createChainedFunction","useClassNames","useControlled","isNumber","value","test","getDecimalLength","toString","split","length","decimals","_len","arguments","values","Array","_key","lengths","map","Math","max","apply","disableMaxValue","disableMinValue","min","defaultProps","as","classPrefix","Infinity","step","buttonAppearance","scrollable","InputNumber","forwardRef","props","ref","Component","className","disabled","readOnly","plaintext","valueProp","defaultValue","size","prefixElement","prefix","postfix","onChange","onWheel","restProps","_useControlled","setValue","_useState","disabledUpButton","setDisabledUpButton","_useState2","disabledDownButton","setDisabledDownButton","_useClassNames","withClassPrefix","merge","classes","_partitionHTMLProps","htmlInputProps","rest","inputRef","handleValue","currentValue","event","getSafeValue","Number","isNaN","handlePlus","val","bit","toFixed","handleMinus","handleWheel","target","document","activeElement","preventDefault","delta","deltaY","detail","handleChange","handleBlur","_event$target","targetValue","parseFloat","wheelListener","current","on","passive","_wheelListener","off","input","createElement","type","autoComplete","onBlur","appearance","onClick","displayName","propTypes","string","number","oneOfType","node","bool","oneOf","func"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useState, useCallback, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport isNil from 'lodash/isNil';\nimport AngleUpIcon from '@rsuite/icons/legacy/AngleUp';\nimport AngleDownIcon from '@rsuite/icons/legacy/AngleDown';\nimport helper from '../DOMHelper';\nimport InputGroup from '../InputGroup/InputGroup';\nimport InputGroupAddon from '../InputGroup/InputGroupAddon';\nimport Input from '../Input';\nimport Button from '../Button';\nimport { partitionHTMLProps, createChainedFunction, useClassNames, useControlled } from '../utils';\n\n/**\n * Check if the value is a number.\n * @param value\n */\nvar isNumber = function isNumber(value) {\n  return /(^-?|^\\+?|^\\d?)\\d*\\.\\d+$/.test(value + '');\n};\n/**\n * Get the length of the decimal.\n * @param value\n */\n\n\nfunction getDecimalLength(value) {\n  if (isNumber(value)) {\n    return value.toString().split('.')[1].length;\n  }\n\n  return 0;\n}\n/**\n * Get the value after the decimal point.\n * @param values\n */\n\n\nfunction decimals() {\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n    values[_key] = arguments[_key];\n  }\n\n  var lengths = values.map(getDecimalLength);\n  return Math.max.apply(Math, lengths);\n}\n/**\n * Disable the upper limit of the number.\n * @param value\n * @param max\n */\n\n\nfunction disableMaxValue(value, max) {\n  if (!isNil(value)) {\n    return +value >= max;\n  }\n\n  return false;\n}\n/**\n * Disable the lower limit of the number.\n * @param value\n * @param min\n */\n\n\nfunction disableMinValue(value, min) {\n  if (!isNil(value)) {\n    return +value <= min;\n  }\n\n  return false;\n}\n\nvar defaultProps = {\n  as: InputGroup,\n  classPrefix: 'input-number',\n  min: -Infinity,\n  max: Infinity,\n  step: 1,\n  buttonAppearance: 'subtle',\n  scrollable: true\n};\nvar InputNumber = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var Component = props.as,\n      className = props.className,\n      classPrefix = props.classPrefix,\n      disabled = props.disabled,\n      readOnly = props.readOnly,\n      plaintext = props.plaintext,\n      valueProp = props.value,\n      defaultValue = props.defaultValue,\n      size = props.size,\n      prefixElement = props.prefix,\n      postfix = props.postfix,\n      step = props.step,\n      buttonAppearance = props.buttonAppearance,\n      min = props.min,\n      max = props.max,\n      scrollable = props.scrollable,\n      onChange = props.onChange,\n      onWheel = props.onWheel,\n      restProps = _objectWithoutPropertiesLoose(props, [\"as\", \"className\", \"classPrefix\", \"disabled\", \"readOnly\", \"plaintext\", \"value\", \"defaultValue\", \"size\", \"prefix\", \"postfix\", \"step\", \"buttonAppearance\", \"min\", \"max\", \"scrollable\", \"onChange\", \"onWheel\"]);\n\n  var _useControlled = useControlled(valueProp, defaultValue),\n      value = _useControlled[0],\n      setValue = _useControlled[1];\n\n  var _useState = useState(disableMaxValue(value, max)),\n      disabledUpButton = _useState[0],\n      setDisabledUpButton = _useState[1];\n\n  var _useState2 = useState(disableMinValue(value, min)),\n      disabledDownButton = _useState2[0],\n      setDisabledDownButton = _useState2[1];\n\n  var _useClassNames = useClassNames(classPrefix),\n      withClassPrefix = _useClassNames.withClassPrefix,\n      merge = _useClassNames.merge,\n      prefix = _useClassNames.prefix;\n\n  var classes = merge(className, withClassPrefix());\n\n  var _partitionHTMLProps = partitionHTMLProps(restProps),\n      htmlInputProps = _partitionHTMLProps[0],\n      rest = _partitionHTMLProps[1];\n\n  var inputRef = useRef();\n  var handleValue = useCallback(function (currentValue, event) {\n    if (currentValue !== value) {\n      // Disable the up button when the value is greater than the maximum value.\n      setDisabledUpButton(disableMaxValue(currentValue, max)); // Disable the down button when the value is greater than the minimum value.\n\n      setDisabledDownButton(disableMinValue(currentValue, min));\n      setValue(currentValue);\n      onChange === null || onChange === void 0 ? void 0 : onChange(currentValue, event);\n    }\n  }, [max, min, onChange, setValue, value]);\n  var getSafeValue = useCallback(function (value) {\n    if (!Number.isNaN(value)) {\n      if (+value > max) {\n        value = max;\n      }\n\n      if (+value < min) {\n        value = min;\n      }\n    } else {\n      value = '';\n    }\n\n    return value.toString();\n  }, [max, min]);\n  var handlePlus = useCallback(function (event) {\n    var val = +(value || 0);\n    var bit = decimals(val, step);\n    handleValue(getSafeValue((val + step).toFixed(bit)), event);\n  }, [getSafeValue, handleValue, step, value]);\n  var handleMinus = useCallback(function (event) {\n    var val = +(value || 0);\n    var bit = decimals(val, step);\n    handleValue(getSafeValue((val - step).toFixed(bit)), event);\n  }, [getSafeValue, handleValue, step, value]);\n  var handleWheel = useCallback(function (event) {\n    if (!disabled && !readOnly && event.target === document.activeElement) {\n      event.preventDefault();\n      var delta = event['wheelDelta'] || -event.deltaY || -(event === null || event === void 0 ? void 0 : event.detail);\n\n      if (delta > 0) {\n        handleMinus(event);\n      }\n\n      if (delta < 0) {\n        handlePlus(event);\n      }\n    }\n\n    onWheel === null || onWheel === void 0 ? void 0 : onWheel(event);\n  }, [disabled, handleMinus, handlePlus, onWheel, readOnly]);\n  var handleChange = useCallback(function (value, event) {\n    if (!/^-?(?:\\d+)?(\\.)?(\\d+)*$/.test(value) && value !== '') {\n      return;\n    }\n\n    handleValue(value, event);\n  }, [handleValue]);\n  var handleBlur = useCallback(function (event) {\n    var _event$target;\n\n    var targetValue = Number.parseFloat((_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.value);\n    handleValue(getSafeValue(targetValue), event);\n  }, [getSafeValue, handleValue]);\n  useEffect(function () {\n    var wheelListener;\n\n    if (inputRef.current && scrollable) {\n      wheelListener = helper.on(inputRef.current, 'wheel', handleWheel, {\n        passive: false\n      });\n    }\n\n    return function () {\n      var _wheelListener;\n\n      (_wheelListener = wheelListener) === null || _wheelListener === void 0 ? void 0 : _wheelListener.off();\n    };\n  }, [handleWheel, scrollable]);\n  var input = /*#__PURE__*/React.createElement(Input, _extends({}, htmlInputProps, {\n    type: \"text\",\n    autoComplete: \"off\",\n    step: step,\n    inputRef: inputRef,\n    onChange: handleChange,\n    onBlur: createChainedFunction(handleBlur, htmlInputProps === null || htmlInputProps === void 0 ? void 0 : htmlInputProps.onBlur),\n    value: isNil(value) ? '' : \"\" + value,\n    disabled: disabled,\n    readOnly: readOnly,\n    plaintext: plaintext\n  }));\n\n  if (plaintext) {\n    return input;\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({}, rest, {\n    ref: ref,\n    className: classes,\n    disabled: disabled,\n    size: size\n  }), prefixElement && /*#__PURE__*/React.createElement(InputGroupAddon, null, prefixElement), input, /*#__PURE__*/React.createElement(\"span\", {\n    className: prefix('btn-group-vertical')\n  }, /*#__PURE__*/React.createElement(Button, {\n    appearance: buttonAppearance,\n    className: prefix('touchspin-up'),\n    onClick: handlePlus,\n    disabled: disabledUpButton || disabled || readOnly\n  }, /*#__PURE__*/React.createElement(AngleUpIcon, null)), /*#__PURE__*/React.createElement(Button, {\n    appearance: buttonAppearance,\n    className: prefix('touchspin-down'),\n    onClick: handleMinus,\n    disabled: disabledDownButton || disabled || readOnly\n  }, /*#__PURE__*/React.createElement(AngleDownIcon, null))), postfix && /*#__PURE__*/React.createElement(InputGroupAddon, null, postfix));\n});\nInputNumber.displayName = 'InputNumber';\nInputNumber.defaultProps = defaultProps;\nInputNumber.propTypes = {\n  className: PropTypes.string,\n  classPrefix: PropTypes.string,\n  min: PropTypes.number,\n  max: PropTypes.number,\n  step: PropTypes.number,\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  defaultValue: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  prefix: PropTypes.node,\n  postfix: PropTypes.node,\n  disabled: PropTypes.bool,\n  readOnly: PropTypes.bool,\n  plaintext: PropTypes.bool,\n  scrollable: PropTypes.bool,\n  size: PropTypes.oneOf(['lg', 'md', 'sm', 'xs']),\n  buttonAppearance: PropTypes.oneOf(['default', 'primary', 'link', 'subtle', 'ghost']),\n  onWheel: PropTypes.func,\n  onChange: PropTypes.func\n};\nexport default InputNumber;"]},"metadata":{},"sourceType":"module"}